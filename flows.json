[
    {
        "id": "c006f5a803bed002",
        "type": "tab",
        "label": "Webhooks",
        "disabled": false,
        "info": ""
    },
    {
        "id": "29d62c5bded88903",
        "type": "tab",
        "label": "Welcome",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "c65734bb7dc811a1",
        "type": "tab",
        "label": "Main",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "e90b3c4f5c50962c",
        "type": "tab",
        "label": "Check Number",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "8851dd36bcc9afaa",
        "type": "tab",
        "label": "Files",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "5aeea1c008d64d4d",
        "type": "tab",
        "label": "Consultation",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "93c71a31f4ec166d",
        "type": "tab",
        "label": "Error",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "542d33d1da2e3551",
        "type": "tab",
        "label": "Goodbye",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "13630048e9aa6406",
        "type": "tab",
        "label": "Test",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "53571d9900b8ee5c",
        "type": "tab",
        "label": "FAQ",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "c0fb582d432c3044",
        "type": "tab",
        "label": "Chatwoot",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "8e9dd0b44d3c40ea",
        "type": "subflow",
        "name": "APILogs",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 120,
                "y": 492,
                "wires": [
                    {
                        "id": "fbd55e615dd2a3b2"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 2580,
                "y": 460,
                "wires": [
                    {
                        "id": "cc02dd60dd38ea55",
                        "port": 0
                    }
                ]
            },
            {
                "x": 2580,
                "y": 540,
                "wires": [
                    {
                        "id": "3921229b60cc22ee",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "color": "#C0DEED",
        "icon": "node-red/white-globe.svg"
    },
    {
        "id": "f4518790.0c2b88",
        "type": "subflow",
        "name": "FilesAPI",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 200,
                "y": 200,
                "wires": [
                    {
                        "id": "d209c173.1dfdb"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 1480,
                "y": 160,
                "wires": [
                    {
                        "id": "322b70ac.b07aa8",
                        "port": 0
                    }
                ]
            },
            {
                "x": 1480,
                "y": 240,
                "wires": [
                    {
                        "id": "6a39abb5.f81ec4",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "meta": {},
        "color": "#DDAA99"
    },
    {
        "id": "4b227c0aa46a1b6c",
        "type": "subflow",
        "name": "Get file url",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 460,
                "y": 280,
                "wires": [
                    {
                        "id": "c88f8d2b61af5934"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 1800,
                "y": 200,
                "wires": [
                    {
                        "id": "1949111779497c9e",
                        "port": 0
                    }
                ]
            },
            {
                "x": 1040,
                "y": 320,
                "wires": [
                    {
                        "id": "40b25fcda60fbe3a",
                        "port": 1
                    },
                    {
                        "id": "71bfdb4f3e1cb788",
                        "port": 1
                    }
                ]
            }
        ],
        "env": [],
        "meta": {},
        "color": "#DDAA99"
    },
    {
        "id": "967c121f062eaad7",
        "type": "http request",
        "z": "8e9dd0b44d3c40ea",
        "name": "",
        "method": "use",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [],
        "x": 1250,
        "y": 560,
        "wires": [
            [
                "12e6e434e7702f53"
            ]
        ]
    },
    {
        "id": "d631fc702a32e69b",
        "type": "function",
        "z": "8e9dd0b44d3c40ea",
        "name": "check for string",
        "func": "let response = typeof msg.payload\nif (response == \"string\"){\nmsg.response = msg.payload\nmsg.payload = {}\n} else {\n  msg.response = JSON.stringify(msg.payload)\n}\nmsg.requestType = null;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2020,
        "y": 460,
        "wires": [
            [
                "3166ba6003d11e40"
            ]
        ]
    },
    {
        "id": "875e2932ebddbefd",
        "type": "function",
        "z": "8e9dd0b44d3c40ea",
        "name": "check for string",
        "func": "let response = typeof msg.payload\nif (response == \"string\"){\nmsg.response = msg.payload\nmsg.payload = {}\n} else {\n  msg.response = JSON.stringify(msg.payload)\n}\nmsg.requestType = null;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2020,
        "y": 540,
        "wires": [
            [
                "38510f813a1a151b"
            ]
        ]
    },
    {
        "id": "3166ba6003d11e40",
        "type": "change",
        "z": "8e9dd0b44d3c40ea",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload.Log.level",
                "pt": "msg",
                "to": "info",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload.Log._application",
                "pt": "msg",
                "to": "NodeRedTG",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload.Log.stage",
                "pt": "msg",
                "to": "stage",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload.Log.userID",
                "pt": "msg",
                "to": "req.headers[\"x-userid\"]",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload.Log.traceID",
                "pt": "msg",
                "to": "req.headers[\"x-uuid\"]",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload.Log.statusCode",
                "pt": "msg",
                "to": "statusCode",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload.Log.outUrl",
                "pt": "msg",
                "to": "url",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload.Log.request",
                "pt": "msg",
                "to": "request",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload.Log.response",
                "pt": "msg",
                "to": "response",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2220,
        "y": 460,
        "wires": [
            [
                "cc02dd60dd38ea55"
            ]
        ]
    },
    {
        "id": "38510f813a1a151b",
        "type": "change",
        "z": "8e9dd0b44d3c40ea",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload.Log.level",
                "pt": "msg",
                "to": "error",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload.Log._application",
                "pt": "msg",
                "to": "NodeRedTG",
                "tot": "str"
            },
            {
                "t": "set",
                "p": "payload.Log.stage",
                "pt": "msg",
                "to": "stage",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload.Log.userID",
                "pt": "msg",
                "to": "req.headers[\"x-userid\"]",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload.Log.traceID",
                "pt": "msg",
                "to": "req.headers[\"x-uuid\"]",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload.Log.statusCode",
                "pt": "msg",
                "to": "statusCode",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload.Log.errorCode",
                "pt": "msg",
                "to": "payload.code",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload.Log.outUrl",
                "pt": "msg",
                "to": "url",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload.Log.request",
                "pt": "msg",
                "to": "request",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "payload.Log.response",
                "pt": "msg",
                "to": "response",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2210,
        "y": 540,
        "wires": [
            [
                "3921229b60cc22ee"
            ]
        ]
    },
    {
        "id": "cc02dd60dd38ea55",
        "type": "function",
        "z": "8e9dd0b44d3c40ea",
        "name": "Log successfull ",
        "func": "msg.payload.Log.request = JSON.stringify(msg.payload.Log.request)\nmsg.payload.Log.timestamp = new Date()\n\nnode.log(msg.payload.Log);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 2420,
        "y": 460,
        "wires": [
            [
                "827303bc2579de8e"
            ]
        ]
    },
    {
        "id": "3921229b60cc22ee",
        "type": "function",
        "z": "8e9dd0b44d3c40ea",
        "name": "Log unsuccessfull ",
        "func": "msg.payload.Log.timestamp = new Date()\nmsg.payload.Log.request = JSON.stringify(msg.payload.Log.request)\n\nnode.error(msg.payload.Log);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 2430,
        "y": 540,
        "wires": [
            [
                "04484cb52297cdb3"
            ]
        ]
    },
    {
        "id": "827303bc2579de8e",
        "type": "debug",
        "z": "8e9dd0b44d3c40ea",
        "name": "Log successfull",
        "active": true,
        "tosidebar": false,
        "console": false,
        "tostatus": false,
        "complete": "payload.Log",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 2640,
        "y": 380,
        "wires": []
    },
    {
        "id": "04484cb52297cdb3",
        "type": "debug",
        "z": "8e9dd0b44d3c40ea",
        "name": "Log unsuccessfull",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload.Log",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 2650,
        "y": 620,
        "wires": []
    },
    {
        "id": "12e6e434e7702f53",
        "type": "switch",
        "z": "8e9dd0b44d3c40ea",
        "name": "http code",
        "property": "statusCode",
        "propertyType": "msg",
        "rules": [
            {
                "t": "regex",
                "v": "^2",
                "vt": "str",
                "case": false
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 1760,
        "y": 500,
        "wires": [
            [
                "d631fc702a32e69b",
                "a0d8e7eb9cb8e001"
            ],
            [
                "875e2932ebddbefd",
                "a0d8e7eb9cb8e001"
            ]
        ]
    },
    {
        "id": "574fe4d58df4d1bd",
        "type": "change",
        "z": "8e9dd0b44d3c40ea",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "request.method",
                "pt": "msg",
                "to": "method",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "request.receiver",
                "pt": "msg",
                "to": "receiver",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "request.lang",
                "pt": "msg",
                "to": "lang",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "request.state",
                "pt": "msg",
                "to": "state",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "request.body",
                "pt": "msg",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 760,
        "y": 500,
        "wires": [
            [
                "9f577706ffebd497",
                "30c53f9ef4c6a84d"
            ]
        ]
    },
    {
        "id": "fbd55e615dd2a3b2",
        "type": "switch",
        "z": "8e9dd0b44d3c40ea",
        "name": "GET",
        "property": "method",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "GET",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 310,
        "y": 492,
        "wires": [
            [
                "a5db936bd5cd6f78"
            ],
            [
                "574fe4d58df4d1bd"
            ]
        ]
    },
    {
        "id": "a5db936bd5cd6f78",
        "type": "change",
        "z": "8e9dd0b44d3c40ea",
        "name": "set payload {}",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 520,
        "y": 460,
        "wires": [
            [
                "574fe4d58df4d1bd"
            ]
        ]
    },
    {
        "id": "a0d8e7eb9cb8e001",
        "type": "debug",
        "z": "8e9dd0b44d3c40ea",
        "name": "APILogs response",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1870,
        "y": 380,
        "wires": []
    },
    {
        "id": "9f577706ffebd497",
        "type": "debug",
        "z": "8e9dd0b44d3c40ea",
        "name": "APILogs request",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1020,
        "y": 440,
        "wires": []
    },
    {
        "id": "30c53f9ef4c6a84d",
        "type": "switch",
        "z": "8e9dd0b44d3c40ea",
        "name": "requestType",
        "property": "requestType",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "binary",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "buffer",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "xml",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 4,
        "x": 1010,
        "y": 500,
        "wires": [
            [
                "f5c60cbf96bb1aad"
            ],
            [
                "eaef9d119b49b066"
            ],
            [
                "39b41f655c78222e"
            ],
            [
                "967c121f062eaad7"
            ]
        ]
    },
    {
        "id": "a9d5878f246894ab",
        "type": "xml",
        "z": "8e9dd0b44d3c40ea",
        "name": "",
        "property": "payload",
        "attr": "",
        "chr": "",
        "x": 1450,
        "y": 500,
        "wires": [
            [
                "12e6e434e7702f53"
            ]
        ]
    },
    {
        "id": "39b41f655c78222e",
        "type": "http request",
        "z": "8e9dd0b44d3c40ea",
        "name": "",
        "method": "use",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [],
        "x": 1250,
        "y": 500,
        "wires": [
            [
                "a9d5878f246894ab"
            ]
        ]
    },
    {
        "id": "eaef9d119b49b066",
        "type": "http request",
        "z": "8e9dd0b44d3c40ea",
        "name": "",
        "method": "use",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [],
        "x": 1250,
        "y": 440,
        "wires": [
            [
                "206d083d42342182"
            ]
        ]
    },
    {
        "id": "206d083d42342182",
        "type": "json",
        "z": "8e9dd0b44d3c40ea",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 1450,
        "y": 440,
        "wires": [
            [
                "12e6e434e7702f53"
            ]
        ]
    },
    {
        "id": "f5c60cbf96bb1aad",
        "type": "http request",
        "z": "8e9dd0b44d3c40ea",
        "name": "binary",
        "method": "use",
        "ret": "bin",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [],
        "x": 1230,
        "y": 380,
        "wires": [
            [
                "12e6e434e7702f53"
            ]
        ]
    },
    {
        "id": "a7eb04ce.e6b5a8",
        "type": "http request",
        "z": "f4518790.0c2b88",
        "name": "",
        "method": "use",
        "ret": "obj",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "x": 590,
        "y": 200,
        "wires": [
            [
                "9379e4ae.5a65b",
                "aa3753cf.755a3"
            ]
        ]
    },
    {
        "id": "9379e4ae.5a65b",
        "type": "switch",
        "z": "f4518790.0c2b88",
        "name": "What HTTP Code?",
        "property": "statusCode",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "200",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "201",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 830,
        "y": 200,
        "wires": [
            [
                "f107b311.adfe2"
            ],
            [
                "f107b311.adfe2"
            ],
            [
                "deb0a8d1.67935"
            ]
        ]
    },
    {
        "id": "f107b311.adfe2",
        "type": "function",
        "z": "f4518790.0c2b88",
        "name": "checkString",
        "func": "var uuid = global.get(\"uuid\");\nvar moment = global.get(\"moment\");\n\nlet response = typeof msg.payload\nif (response == \"string\"){\nmsg.response = msg.payload\n} else {\n  msg.response = JSON.stringify(msg.payload)\n}\nmsg.Log = {\n    \"level\": \"info\",\n    \"_application\": \"NodeRedViber\",\n    \"_stage\": msg.NODE_ENV,\n    \"timestamp\": new Date(),\n    \"userID\": msg.userID,\n    \"traceID\": msg.traceID,\n    \"statusCode\": 200,\n    \"outUrl\": msg.responseUrl,\n    \"request\": msg.request.request,\n    \"response\": msg.response\n}\n\n\n\n \nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1070,
        "y": 160,
        "wires": [
            [
                "322b70ac.b07aa8"
            ]
        ]
    },
    {
        "id": "deb0a8d1.67935",
        "type": "function",
        "z": "f4518790.0c2b88",
        "name": "checkString",
        "func": "var uuid = global.get(\"uuid\");\nvar moment = global.get(\"moment\");\n\nlet response = typeof msg.payload\nif (response == \"string\"){\nmsg.response = msg.payload\n} else {\n  msg.response = JSON.stringify(msg.payload)\n}\nmsg.Log = {\n     \"level\": \"error\",\n    \"_application\": \"NodeRedViber\",\n    \"_stage\": msg.NODE_ENV,\n    \"timestamp\": new Date(),\n    \"userID\": msg.userID,\n    \"traceID\": msg.traceID,\n    \"statusCode\": msg.statusCode,\n    \"errorCode\": msg.payload.code,\n    \"outUrl\": msg.responseUrl,\n    \"request\": msg.request.request,\n    \"response\": msg.response,\n    \"message\": JSON.stringify(msg.payload.message)\n\n}\n\n \nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1070,
        "y": 240,
        "wires": [
            [
                "6a39abb5.f81ec4"
            ]
        ]
    },
    {
        "id": "322b70ac.b07aa8",
        "type": "function",
        "z": "f4518790.0c2b88",
        "name": "files_logs_error",
        "func": "node.log(msg.Log);\n \nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1300,
        "y": 160,
        "wires": [
            []
        ]
    },
    {
        "id": "6a39abb5.f81ec4",
        "type": "function",
        "z": "f4518790.0c2b88",
        "name": "files_logs_error",
        "func": "node.error(msg.Log);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1300,
        "y": 240,
        "wires": [
            []
        ]
    },
    {
        "id": "aa3753cf.755a3",
        "type": "debug",
        "z": "f4518790.0c2b88",
        "name": "message api logs",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "x": 610,
        "y": 120,
        "wires": []
    },
    {
        "id": "d209c173.1dfdb",
        "type": "function",
        "z": "f4518790.0c2b88",
        "name": "save request",
        "func": "msg.headers ={\n    \"Authorization\": msg.messageApiKey,\n    \"X-User-Id\": msg.userID,\n    \"X-Trace-Id\": msg.traceID\n}\nvar query = \"\"\nif(msg.url.includes(\"?\")){\n    query = msg.url.substring(msg.url.indexOf(\"?\")+1,msg.url.length)\n}else{\n    query = \"-\"\n}\nmsg.request = {\n    \"request\": JSON.stringify({\n        \"method\": msg.method,\n        \"query\":query,\n        \"body\":msg.payload\n        \n    })\n    \n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 370,
        "y": 200,
        "wires": [
            [
                "a7eb04ce.e6b5a8"
            ]
        ]
    },
    {
        "id": "fb904be26ba98f99",
        "type": "function",
        "z": "4b227c0aa46a1b6c",
        "name": "Base64FileData",
        "func": "// msg.payload = (Buffer.from(msg.payload.Data.Base64FileData, 'base64').toString('ascii'));\n\n// msg.payload = atob(msg.payload.Data.Base64FileData)\n\nmsg.Extension = msg.payload.Data.Extension;\nmsg.payload = Buffer.from(msg.payload.Data.Base64FileData, \"base64\");\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1100,
        "y": 260,
        "wires": [
            [
                "f8265fb9e28b41ef"
            ]
        ]
    },
    {
        "id": "f8265fb9e28b41ef",
        "type": "function",
        "z": "4b227c0aa46a1b6c",
        "name": "StorageAPI",
        "func": "msg.service = \"StorageAPI\"\n\nmsg.method = \"POST\"\nmsg.url = `${msg.storageApiUrl}/v1/storage/upload`;\nmsg.headers = {\n    //\"authorization\": msg.storageApiKey,\n    \"Content-Type\": 'multipart/form-data',\n    \"x-user-id\": msg.userID,\n    \"x-trace-id\": msg.traceID\n}\n\nmsg.payload = {\n        file: {\n            value: msg.payload,\n            options: {\n                filename: \"fine-file\" + msg.Extension\n            },\n        },\n};\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1310,
        "y": 260,
        "wires": [
            [
                "40b25fcda60fbe3a"
            ]
        ]
    },
    {
        "id": "1949111779497c9e",
        "type": "function",
        "z": "4b227c0aa46a1b6c",
        "name": "set fileUrl",
        "func": "msg.fileUrl = msg.payload.url;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1660,
        "y": 200,
        "wires": [
            []
        ]
    },
    {
        "id": "b4a3e3f43c3fb26c",
        "type": "debug",
        "z": "4b227c0aa46a1b6c",
        "name": "debug 50",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1660,
        "y": 160,
        "wires": []
    },
    {
        "id": "c88f8d2b61af5934",
        "type": "function",
        "z": "4b227c0aa46a1b6c",
        "name": "get file",
        "func": "msg.method = \"GET\";\nmsg.requestType = \"buffer\";\n// msg.url = msg.fileUrl;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 650,
        "y": 280,
        "wires": [
            [
                "71bfdb4f3e1cb788"
            ]
        ]
    },
    {
        "id": "40b25fcda60fbe3a",
        "type": "subflow:8e9dd0b44d3c40ea",
        "z": "4b227c0aa46a1b6c",
        "name": "",
        "x": 1500,
        "y": 260,
        "wires": [
            [
                "1949111779497c9e"
            ],
            []
        ]
    },
    {
        "id": "71bfdb4f3e1cb788",
        "type": "subflow:8e9dd0b44d3c40ea",
        "z": "4b227c0aa46a1b6c",
        "name": "",
        "x": 860,
        "y": 280,
        "wires": [
            [
                "fb904be26ba98f99"
            ],
            []
        ]
    },
    {
        "id": "cfd7a2bf92f706ad",
        "type": "http in",
        "z": "c006f5a803bed002",
        "name": "/webhook",
        "url": "/webhook",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 120,
        "y": 280,
        "wires": [
            [
                "3193dd39f21af2a6",
                "a3fd725f6a0fcc5d",
                "e81b67f0c3bbe10f"
            ]
        ]
    },
    {
        "id": "eab73479b1620119",
        "type": "http response",
        "z": "c006f5a803bed002",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 230,
        "y": 220,
        "wires": []
    },
    {
        "id": "9c004e622c1f65f4",
        "type": "function",
        "z": "c006f5a803bed002",
        "name": "get envs",
        "func": "\nmsg.apiVersion = \"v1\";\n\nmsg.messagesApiKey = env.get(\"MESSAGES_API_KEY\");\nmsg.customerApiKey = env.get(\"CUSTOMER_API_KEY\");\nmsg.messagesApiUrl = env.get(\"MESSAGES_API_URL\") + \"/\" + msg.apiVersion;\nmsg.customerApi = env.get(\"CUSTOMER_API_URL\") + \"/\" + msg.apiVersion;\n\nmsg.externalApiUrl = env.get(\"EXTERNAL_API_URL\")\nmsg.externalApiKey = env.get(\"EXTERNAL_API_KEY\")\n\nmsg.storageApiUrl = env.get(\"STORAGE_API_URL\")\nmsg.storageApiKey = env.get(\"STORAGE_API_KEY\")\n\nmsg.chatwootApiUrl = env.get(\"CHATWOOT_API_URL\")\nmsg.chatwootApiUrl += \"/api/v1\" \nmsg.chatwootApiKey = env.get(\"CHATWOOT_API_KEY\")\nmsg.inboxId = env.get(\"CHATWOOT_INBOX_ID\")\n\nmsg.companyId = msg.payload.botSettings.companyId;\nmsg.botId = msg.payload.botSettings.botId;\nmsg.channel = msg.payload.customer.channel;\n\nmsg.state = msg.payload.customer.state;\nmsg.settings = msg.payload.customer.settings;\nmsg.customerSettings = JSON.parse(msg.payload.customer.settings)\n\nmsg.stage = env.get(\"NODE_ENV\");\n\nmsg.lang = \"en\"\n\nmsg.faqs = [\n    {\n        \"title\": \"How to pay my Notice\"\n    },\n    {\n        \"title\": \"Chat to Agent\"\n    },\n    {\n        \"title\": \"Dispute\"\n    },\n    {\n        \"title\": \"Other Queries\"\n    },\n    {\n        \"title\": \"Main Menu\"\n    }\n];\nmsg.accountId = env.get(\"CHATWOOT_ACCOUNT_ID\");\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 500,
        "y": 280,
        "wires": [
            [
                "48e659aef7b1d252",
                "bb2c7e77ab72e8f1"
            ]
        ]
    },
    {
        "id": "3193dd39f21af2a6",
        "type": "debug",
        "z": "c006f5a803bed002",
        "name": "/webhook",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 120,
        "y": 340,
        "wires": []
    },
    {
        "id": "a3fd725f6a0fcc5d",
        "type": "change",
        "z": "c006f5a803bed002",
        "name": "set main params",
        "rules": [
            {
                "t": "set",
                "p": "traceID",
                "pt": "msg",
                "to": "payload.traceID",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "userID",
                "pt": "msg",
                "to": "payload.userID",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "chatId",
                "pt": "msg",
                "to": "payload.chatId",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "phone",
                "pt": "msg",
                "to": "payload.customer.phone",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "state",
                "pt": "msg",
                "to": "payload.customer.state",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "customerSettings",
                "pt": "msg",
                "to": "payload.customer.settings",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "text",
                "pt": "msg",
                "to": "payload.text",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "buttonPayload",
                "pt": "msg",
                "to": "payload.originalBody.entry[0].messaging[0].postback.payload",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "quickReplyPayload",
                "pt": "msg",
                "to": "payload.originalBody.entry[0].messaging[0].message.quick_reply.payload",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "originalBody",
                "pt": "msg",
                "to": "payload.originalBody",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "botName",
                "pt": "msg",
                "to": "payload.botSettings.botName",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "replyType",
                "pt": "msg",
                "to": "payload.replyType",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "botSettings",
                "pt": "msg",
                "to": "payload.botSettings",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "previousState",
                "pt": "msg",
                "to": "payload.customer.previousState",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 310,
        "y": 280,
        "wires": [
            [
                "9c004e622c1f65f4"
            ]
        ]
    },
    {
        "id": "e81b67f0c3bbe10f",
        "type": "change",
        "z": "c006f5a803bed002",
        "name": "ok",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "ok",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 110,
        "y": 220,
        "wires": [
            [
                "eab73479b1620119"
            ]
        ]
    },
    {
        "id": "bb2c7e77ab72e8f1",
        "type": "switch",
        "z": "c006f5a803bed002",
        "name": "state",
        "property": "state",
        "propertyType": "msg",
        "rules": [
            {
                "t": "null"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 750,
        "y": 280,
        "wires": [
            [
                "c3babc7ec9e31ae5",
                "34b1a7b0d64b6648"
            ],
            [
                "59c30a217875bf81"
            ]
        ]
    },
    {
        "id": "c3babc7ec9e31ae5",
        "type": "link out",
        "z": "c006f5a803bed002",
        "name": "welcome message",
        "mode": "link",
        "links": [
            "ffb27b2ae071c95f"
        ],
        "x": 950,
        "y": 240,
        "wires": [],
        "l": true
    },
    {
        "id": "d1b324e58189f769",
        "type": "link out",
        "z": "c006f5a803bed002",
        "name": "state",
        "mode": "link",
        "links": [
            "6d7662a1b98e6dc0",
            "65dfa21966bac33f",
            "1502b9f6f89f3b27"
        ],
        "x": 1350,
        "y": 480,
        "wires": [],
        "l": true
    },
    {
        "id": "01d7be1f0a39edc3",
        "type": "switch",
        "z": "c006f5a803bed002",
        "name": "text",
        "property": "text",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "start",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Hi",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "hi",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Hello",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "hello",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 6,
        "x": 1130,
        "y": 400,
        "wires": [
            [
                "010a64dc8f1eea3e"
            ],
            [
                "010a64dc8f1eea3e"
            ],
            [
                "010a64dc8f1eea3e"
            ],
            [
                "010a64dc8f1eea3e"
            ],
            [
                "010a64dc8f1eea3e"
            ],
            [
                "d1b324e58189f769"
            ]
        ]
    },
    {
        "id": "18ccab3da19e6e07",
        "type": "http in",
        "z": "c006f5a803bed002",
        "name": "/webhook/nouserdata/hessequawebhook",
        "url": "/webhook/nouserdata/hessequawebhook",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 310,
        "y": 720,
        "wires": [
            [
                "6d8335cc12605ce5",
                "10b59170c61ababa"
            ]
        ]
    },
    {
        "id": "e528c1db373fceac",
        "type": "http response",
        "z": "c006f5a803bed002",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 410,
        "y": 920,
        "wires": []
    },
    {
        "id": "6d8335cc12605ce5",
        "type": "change",
        "z": "c006f5a803bed002",
        "name": "ok",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "ok",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 290,
        "y": 920,
        "wires": [
            [
                "e528c1db373fceac"
            ]
        ]
    },
    {
        "id": "91429f4c2514994d",
        "type": "link out",
        "z": "c006f5a803bed002",
        "name": "goodbue out 1",
        "mode": "link",
        "links": [
            "806330a6233f1910"
        ],
        "x": 1735,
        "y": 720,
        "wires": []
    },
    {
        "id": "10b59170c61ababa",
        "type": "function",
        "z": "c006f5a803bed002",
        "name": "get envs",
        "func": "\nmsg.apiVersion = \"v1\";\n\nmsg.messagesApiKey = env.get(\"MESSAGES_API_KEY\");\nmsg.customerApiKey = env.get(\"CUSTOMER_API_KEY\");\nmsg.messagesApiUrl = env.get(\"MESSAGES_API_URL\") + \"/\" + msg.apiVersion;\nmsg.customerApi = env.get(\"CUSTOMER_API_URL\") + \"/\" + msg.apiVersion;\n\nmsg.externalApiUrl = env.get(\"EXTERNAL_API_URL\")\nmsg.externalApiKey = env.get(\"EXTERNAL_API_KEY\")\n\nmsg.chatwootApiUrl = env.get(\"CHATWOOT_API_URL\")\nmsg.chatwootApiUrl += \"/api/v1\" \nmsg.chatwootApiKey = env.get(\"CHATWOOT_API_KEY\")\n\nmsg.companyId = msg.payload.botSettings.companyId;\nmsg.botId = msg.payload.botSettings.botId;\nmsg.channel = msg.payload.botSettings.channel;\n\nmsg.stage = env.get(\"NODE_ENV\");\n\nmsg.lang = \"en\"\n\n\nif (msg.payload.originalBody.conversation && msg.payload.originalBody.conversation.meta && msg.payload.originalBody.conversation.meta.sender.phone_number){\n    msg.phone = msg.payload.originalBody.conversation.meta.sender.phone_number\n} else if (msg.payload.originalBody.contact_inbox.source_id){\n    msg.phone = msg.payload.originalBody.contact_inbox.source_id\n}\n\nif (msg.phone[0] !== '+')\n{ msg.phone = \"+\" + msg.phone}\n\nmsg.userID = msg.companyId + \"_\" + msg.botId + \"_\" + msg.channel + \"_\" + msg.phone\nmsg.accountId = env.get(\"CHATWOOT_ACCOUNT_ID\")\n\nmsg.traceID = \"7c7bc4f5-f1ac-4f09-91b2-8cfabd0b0102\"\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 580,
        "y": 720,
        "wires": [
            [
                "f9b7c1cf0cf7d40b",
                "8016ecb0b0ca86bc"
            ]
        ]
    },
    {
        "id": "f9b7c1cf0cf7d40b",
        "type": "debug",
        "z": "c006f5a803bed002",
        "name": "/webhook",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 580,
        "y": 660,
        "wires": []
    },
    {
        "id": "8016ecb0b0ca86bc",
        "type": "switch",
        "z": "c006f5a803bed002",
        "name": "is First Message",
        "property": "payload.originalBody.conversation.messages[0].content",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "first message",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 810,
        "y": 720,
        "wires": [
            [
                "c66654209a4d76ba"
            ],
            [
                "268c0a86cb97ce74"
            ]
        ]
    },
    {
        "id": "5b65aa1ff7551b1c",
        "type": "send-message",
        "z": "c006f5a803bed002",
        "isTimerUsed": false,
        "language": "lang",
        "languageType": "msg",
        "messageOption": "",
        "messageID": "",
        "messageIDType": "str",
        "name": "main_0_0",
        "props": {
            "": [],
            "welcomeMessage": [],
            "main_1_1": [],
            "main_1": [],
            "main_1_0": [],
            "main_0_0": [
                {
                    "property": "new",
                    "value": "payload.originalBody.content",
                    "valueType": "msg"
                }
            ]
        },
        "templateId": "main_0_0",
        "templateIdToDelete": "",
        "templatesJsons": {
            "welcomeMessage": {
                "text": "{{text}}",
                "en": {
                    "text": "*New Traffic Fine Notification from Ekurhuleni\nMetro Police Department*\nPlease take note that a new traffic fine (REF:\nC1/93563/808/187933) has been issued against ID\nending 51.\nFor more information or options to pay the fine\nplease reply to this message and our friendly\nChatbot, Traffic Officer Buddy will gladly assist you.\nAlternatively log onto payCity.co.za for more\ninformation and options to pay.\n1. Pay Fine\n2. More Options\n3. View/Query all my fines from Ekurhuleni"
                }
            },
            "main_1_1": {
                "text": "{{text}}",
                "en": {
                    "text": "Please follow the link below.\nhttps://paynow.paycity.co.za\n1. Back to Payment Options\n2. Main Menu\nYou can also pay at any of the\nfollowing locations: Spar, Shoprite &\nCheckers & Pnp."
                }
            },
            "main_1": {
                "text": "{{text}}",
                "en": {
                    "text": "Please pay your fine using the link below.\nYou can also pay at any of the\nfollowing locations: Spar, Shoprite &\nCheckers & Pnp."
                }
            },
            "main_1_0": {
                "text": "{{text}}",
                "en": {
                    "text": "Goodbye 👋 To enagage again with Traffic Officer Buddy please type 'Hi'"
                }
            },
            "main_0_0": {
                "text": "{{text}}",
                "en": {
                    "text": "{{new}}"
                }
            }
        },
        "templatesList": [
            "fine_not_found",
            "faq_representations",
            "faq_my_vehicle_not_driver",
            "querying_fine_details_waiting",
            "paynow_express_payment",
            "pay_your_fine",
            "main_nextfines",
            "main_image_file",
            "main_payment_info_allowedreason",
            "faq_dispute",
            "main_finedetail_1",
            "get_started",
            "main_image_placeholder",
            "goodbye",
            "enter_digit_number",
            "select_the_option",
            "connect_agent",
            "enter_digit_number_error",
            "main_3_1_1_1_1_3",
            "welocme",
            "main_3_1_1_1_1",
            "main_1_0",
            "main_3_error",
            "main_3_1",
            "main_1",
            "main_3_1_1_0",
            "main_3",
            "fines_pdf_file",
            "welcomeMessage",
            "main_0_0_pdf",
            "main_0_0",
            "main_2_2",
            "main_3_1_1_1_0_0",
            "main_2",
            "main_2_1",
            "querying_for_fines",
            "sendwindowopener_template",
            "fines_info",
            "main_3_1_1_1_1_2",
            "main_1_3",
            "main_pdf_placeholder",
            "main_1_2",
            "main_1_1",
            "main_3_1_1_1_1_1",
            "faq_other_queries",
            "main_1_2_1",
            "main_3_1_1",
            "main_3_1_3",
            "main_3_1_2",
            "main_3_1_1_1_0",
            "main_3_1_1_1",
            "fines_not_found",
            "errorMessage",
            "faq_representations_contacts",
            "faq_my_vehicle_not_driver_contacts",
            "registration_image_file"
        ],
        "userID": "userID",
        "userIDType": "msg",
        "traceID": "traceID",
        "traceIDType": "msg",
        "useTimer": false,
        "timer": "",
        "outputs": 3,
        "jsonToCreate": "{\"text\":\"{{text}}\",\"en\":{\"text\":\"{{text}}\"}}",
        "jsonToCreateType": "json",
        "templateDescriptionButtonsContainerToCreate": [],
        "templateDesciptionDetailsToCreate": "main",
        "templateDesciptionTextToCreate": "",
        "templateIdToCreate": "main_0_0",
        "templateGroupToCreate": "main",
        "currentTemplateDescription": {
            "details": "main"
        },
        "currentTemplateGroup": "main",
        "currentTemplateTimer": "",
        "currentTemplateType": "standard",
        "jsonToEdit": "{\"text\":\"{{text}}\",\"en\":{\"text\":\"{{new}}\"}}",
        "jsonToEditType": "json",
        "templateIdToEdit": "main_0_0",
        "templateDescriptionButtonsContainerToEdit": [],
        "templateDesciptionDetailsToEdit": "main",
        "templateDesciptionTextToEdit": "",
        "x": 1740,
        "y": 840,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "268c0a86cb97ce74",
        "type": "switch",
        "z": "c006f5a803bed002",
        "name": "check event",
        "property": "payload.originalBody.event",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "conversation_status_changed",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "message_created",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 1030,
        "y": 900,
        "wires": [
            [
                "3012c25e89e35cbe"
            ],
            [
                "341d9e48e37f4fab",
                "ae8cf7bb6230fd23"
            ],
            [
                "28ce16234359cc8f"
            ]
        ]
    },
    {
        "id": "3012c25e89e35cbe",
        "type": "switch",
        "z": "c006f5a803bed002",
        "name": "check status",
        "property": "payload.originalBody.status",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "resolved",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1230,
        "y": 740,
        "wires": [
            [
                "1506ebabefab4c79"
            ],
            [
                "09d0c80ace5889bb"
            ]
        ]
    },
    {
        "id": "c66654209a4d76ba",
        "type": "function",
        "z": "c006f5a803bed002",
        "name": "set startDialogFlag",
        "func": "msg.service = \"CustomerAPI\"\n\nmsg.method = \"POST\"\nmsg.url = `${msg.customerApi}/settings`;\nmsg.headers = {\n    \"authorization\": msg.customerApiKey,\n    \"x-trace-id\": msg.traceID,\n    \"x-user-id\": msg.userID\n}\n\nmsg.payload = {\n    \"dialogIsActive\": true\n}\n\nreturn msg;\n\n// msg.method = \"GET\";\n// msg.url = `${msg.chatwootApiUrl}/accounts/${msg.accountId}/contacts/search?q=${msg.chatId}`;\n\n// msg.payload = {};\n// msg.headers = {};\n// msg.headers['Content-Type'] = 'application/json';\n// msg.headers['api_access_token'] = msg.chatwootApiKey;\n// return msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1050,
        "y": 660,
        "wires": [
            [
                "7d5be47119e94582"
            ]
        ]
    },
    {
        "id": "7d5be47119e94582",
        "type": "subflow:8e9dd0b44d3c40ea",
        "z": "c006f5a803bed002",
        "name": "",
        "x": 1240,
        "y": 660,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "59c30a217875bf81",
        "type": "switch",
        "z": "c006f5a803bed002",
        "name": "dialogIsActive",
        "property": "msg.customerSettings.dialogIsActive",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 940,
        "y": 320,
        "wires": [
            [
                "d7fcacaedfbaf773"
            ],
            [
                "01d7be1f0a39edc3"
            ]
        ]
    },
    {
        "id": "48e659aef7b1d252",
        "type": "debug",
        "z": "c006f5a803bed002",
        "name": "/webhook",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 760,
        "y": 200,
        "wires": []
    },
    {
        "id": "1506ebabefab4c79",
        "type": "function",
        "z": "c006f5a803bed002",
        "name": "set finishDialogFlag",
        "func": "msg.service = \"CustomerAPI\"\n\nmsg.method = \"POST\"\nmsg.url = `${msg.customerApi}/settings`;\nmsg.headers = {\n    \"authorization\": msg.customerApiKey,\n    \"x-trace-id\": msg.traceID,\n    \"x-user-id\": msg.userID\n}\n\nmsg.payload = {\n    \"dialogIsActive\": false\n}\n\nreturn msg;\n\n// msg.method = \"GET\";\n// msg.url = `${msg.chatwootApiUrl}/accounts/${msg.accountId}/contacts/search?q=${msg.chatId}`;\n\n// msg.payload = {};\n// msg.headers = {};\n// msg.headers['Content-Type'] = 'application/json';\n// msg.headers['api_access_token'] = msg.chatwootApiKey;\n// return msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1420,
        "y": 720,
        "wires": [
            [
                "9b80af322e3f5b64",
                "c2d47ff0f36563e9"
            ]
        ]
    },
    {
        "id": "9b80af322e3f5b64",
        "type": "subflow:8e9dd0b44d3c40ea",
        "z": "c006f5a803bed002",
        "name": "",
        "x": 1620,
        "y": 720,
        "wires": [
            [
                "91429f4c2514994d"
            ],
            []
        ]
    },
    {
        "id": "d7fcacaedfbaf773",
        "type": "link out",
        "z": "c006f5a803bed002",
        "name": "consultation out",
        "mode": "link",
        "links": [
            "2feac52c66178c48",
            "da89575deb09d456"
        ],
        "x": 1095,
        "y": 280,
        "wires": []
    },
    {
        "id": "341d9e48e37f4fab",
        "type": "switch",
        "z": "c006f5a803bed002",
        "name": "check message_type",
        "property": "payload.originalBody.message_type",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "outgoing",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "incoming",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1260,
        "y": 920,
        "wires": [
            [
                "22fba705f4b4e4b6"
            ],
            [
                "0d098e29c268cfec"
            ]
        ]
    },
    {
        "id": "c2d47ff0f36563e9",
        "type": "debug",
        "z": "c006f5a803bed002",
        "name": "/webhook",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1620,
        "y": 680,
        "wires": []
    },
    {
        "id": "06062da0a945fc41",
        "type": "send-message",
        "z": "c006f5a803bed002",
        "isTimerUsed": false,
        "language": "lang",
        "languageType": "msg",
        "messageOption": "",
        "messageID": "",
        "messageIDType": "str",
        "name": "main_0_0_pdf",
        "props": {
            "": [],
            "welcomeMessage": [],
            "main_1_1": [],
            "main_1": [],
            "main_1_0": [],
            "main_0_0": [
                {
                    "property": "new",
                    "value": "payload.originalBody.content",
                    "valueType": "msg"
                }
            ],
            "main_0_0_pdf": [
                {
                    "property": "pdf_url",
                    "value": "pdf_url",
                    "valueType": "msg"
                }
            ]
        },
        "templateId": "main_0_0_pdf",
        "templateIdToDelete": "",
        "templatesJsons": {
            "welcomeMessage": {
                "text": "{{text}}",
                "en": {
                    "text": "*New Traffic Fine Notification from Ekurhuleni\nMetro Police Department*\nPlease take note that a new traffic fine (REF:\nC1/93563/808/187933) has been issued against ID\nending 51.\nFor more information or options to pay the fine\nplease reply to this message and our friendly\nChatbot, Traffic Officer Buddy will gladly assist you.\nAlternatively log onto payCity.co.za for more\ninformation and options to pay.\n1. Pay Fine\n2. More Options\n3. View/Query all my fines from Ekurhuleni"
                }
            },
            "main_1_1": {
                "text": "{{text}}",
                "en": {
                    "text": "Please follow the link below.\nhttps://paynow.paycity.co.za\n1. Back to Payment Options\n2. Main Menu\nYou can also pay at any of the\nfollowing locations: Spar, Shoprite &\nCheckers & Pnp."
                }
            },
            "main_1": {
                "text": "{{text}}",
                "en": {
                    "text": "Please pay your fine using the link below.\nYou can also pay at any of the\nfollowing locations: Spar, Shoprite &\nCheckers & Pnp."
                }
            },
            "main_1_0": {
                "text": "{{text}}",
                "en": {
                    "text": "Goodbye 👋 To enagage again with Traffic Officer Buddy please type 'Hi'"
                }
            },
            "main_0_0": {
                "text": "{{text}}",
                "en": {
                    "text": "{{new}}"
                }
            },
            "main_0_0_pdf": {
                "pdfUrl": "{{pdfUrl}}",
                "en": {
                    "pdfUrl": "{{pdf_url}}"
                }
            }
        },
        "templatesList": [
            "fine_not_found",
            "faq_representations",
            "faq_my_vehicle_not_driver",
            "querying_fine_details_waiting",
            "paynow_express_payment",
            "pay_your_fine",
            "main_nextfines",
            "main_image_file",
            "main_payment_info_allowedreason",
            "faq_dispute",
            "main_finedetail_1",
            "get_started",
            "main_image_placeholder",
            "goodbye",
            "enter_digit_number",
            "select_the_option",
            "connect_agent",
            "enter_digit_number_error",
            "main_3_1_1_1_1_3",
            "welocme",
            "main_3_1_1_1_1",
            "main_1_0",
            "main_3_error",
            "main_3_1",
            "main_1",
            "main_3_1_1_0",
            "main_3",
            "fines_pdf_file",
            "welcomeMessage",
            "main_0_0_pdf",
            "main_0_0",
            "main_2_2",
            "main_3_1_1_1_0_0",
            "main_2",
            "main_2_1",
            "querying_for_fines",
            "sendwindowopener_template",
            "fines_info",
            "main_3_1_1_1_1_2",
            "main_1_3",
            "main_pdf_placeholder",
            "main_1_2",
            "main_1_1",
            "main_3_1_1_1_1_1",
            "faq_other_queries",
            "main_1_2_1",
            "main_3_1_1",
            "main_3_1_3",
            "main_3_1_2",
            "main_3_1_1_1_0",
            "main_3_1_1_1",
            "fines_not_found",
            "errorMessage",
            "faq_representations_contacts",
            "faq_my_vehicle_not_driver_contacts",
            "registration_image_file"
        ],
        "userID": "userID",
        "userIDType": "msg",
        "traceID": "traceID",
        "traceIDType": "msg",
        "useTimer": false,
        "timer": "",
        "outputs": 3,
        "jsonToCreate": "{\"text\":\"{{text}}\",\"en\":{\"text\":\"{{text}}\"}}",
        "jsonToCreateType": "json",
        "templateDescriptionButtonsContainerToCreate": [],
        "templateDesciptionDetailsToCreate": "main",
        "templateDesciptionTextToCreate": "",
        "templateIdToCreate": "main_0_0",
        "templateGroupToCreate": "main",
        "currentTemplateDescription": {
            "details": "main"
        },
        "currentTemplateGroup": "main",
        "currentTemplateTimer": null,
        "currentTemplateType": "standard",
        "jsonToEdit": "{\"pdfUrl\":\"{{pdfUrl}}\",\"en\":{\"pdfUrl\":\"{{pdf_url}}\"}}",
        "jsonToEditType": "json",
        "templateIdToEdit": "main_0_0_pdf",
        "templateDescriptionButtonsContainerToEdit": [],
        "templateDesciptionDetailsToEdit": "main",
        "templateDesciptionTextToEdit": "",
        "x": 1960,
        "y": 780,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "ae8cf7bb6230fd23",
        "type": "debug",
        "z": "c006f5a803bed002",
        "name": "/webhook",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1220,
        "y": 880,
        "wires": []
    },
    {
        "id": "ed91ed04d4994825",
        "type": "switch",
        "z": "c006f5a803bed002",
        "name": "check message_type",
        "property": "payload.originalBody.conversation.messages[0].attachments",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nnull"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1580,
        "y": 900,
        "wires": [
            [
                "b5277f5a564ec430",
                "5b65aa1ff7551b1c"
            ],
            [
                "11d0fc673e76e01f"
            ]
        ]
    },
    {
        "id": "b5277f5a564ec430",
        "type": "change",
        "z": "c006f5a803bed002",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "pdf_url",
                "pt": "msg",
                "to": "payload.originalBody.conversation.messages[0].attachments[0].data_url",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1760,
        "y": 780,
        "wires": [
            [
                "06062da0a945fc41"
            ]
        ]
    },
    {
        "id": "11d0fc673e76e01f",
        "type": "send-message",
        "z": "c006f5a803bed002",
        "isTimerUsed": false,
        "language": "lang",
        "languageType": "msg",
        "messageOption": "",
        "messageID": "",
        "messageIDType": "str",
        "name": "main_0_0",
        "props": {
            "": [],
            "welcomeMessage": [],
            "main_1_1": [],
            "main_1": [],
            "main_1_0": [],
            "main_0_0": [
                {
                    "property": "new",
                    "value": "payload.originalBody.content",
                    "valueType": "msg"
                }
            ]
        },
        "templateId": "main_0_0",
        "templateIdToDelete": "",
        "templatesJsons": {
            "welcomeMessage": {
                "text": "{{text}}",
                "en": {
                    "text": "*New Traffic Fine Notification from Ekurhuleni\nMetro Police Department*\nPlease take note that a new traffic fine (REF:\nC1/93563/808/187933) has been issued against ID\nending 51.\nFor more information or options to pay the fine\nplease reply to this message and our friendly\nChatbot, Traffic Officer Buddy will gladly assist you.\nAlternatively log onto payCity.co.za for more\ninformation and options to pay.\n1. Pay Fine\n2. More Options\n3. View/Query all my fines from Ekurhuleni"
                }
            },
            "main_1_1": {
                "text": "{{text}}",
                "en": {
                    "text": "Please follow the link below.\nhttps://paynow.paycity.co.za\n1. Back to Payment Options\n2. Main Menu\nYou can also pay at any of the\nfollowing locations: Spar, Shoprite &\nCheckers & Pnp."
                }
            },
            "main_1": {
                "text": "{{text}}",
                "en": {
                    "text": "Please pay your fine using the link below.\nYou can also pay at any of the\nfollowing locations: Spar, Shoprite &\nCheckers & Pnp."
                }
            },
            "main_1_0": {
                "text": "{{text}}",
                "en": {
                    "text": "Goodbye 👋 To enagage again with Traffic Officer Buddy please type 'Hi'"
                }
            },
            "main_0_0": {
                "text": "{{text}}",
                "en": {
                    "text": "{{new}}"
                }
            }
        },
        "templatesList": [
            "fine_not_found",
            "faq_representations",
            "faq_my_vehicle_not_driver",
            "querying_fine_details_waiting",
            "paynow_express_payment",
            "pay_your_fine",
            "main_nextfines",
            "main_image_file",
            "main_payment_info_allowedreason",
            "faq_dispute",
            "main_finedetail_1",
            "get_started",
            "main_image_placeholder",
            "goodbye",
            "enter_digit_number",
            "select_the_option",
            "connect_agent",
            "enter_digit_number_error",
            "main_3_1_1_1_1_3",
            "welocme",
            "main_3_1_1_1_1",
            "main_1_0",
            "main_3_error",
            "main_3_1",
            "main_1",
            "main_3_1_1_0",
            "main_3",
            "fines_pdf_file",
            "welcomeMessage",
            "main_0_0_pdf",
            "main_0_0",
            "main_2_2",
            "main_3_1_1_1_0_0",
            "main_2",
            "main_2_1",
            "querying_for_fines",
            "sendwindowopener_template",
            "fines_info",
            "main_3_1_1_1_1_2",
            "main_1_3",
            "main_pdf_placeholder",
            "main_1_2",
            "main_1_1",
            "main_3_1_1_1_1_1",
            "faq_other_queries",
            "main_1_2_1",
            "main_3_1_1",
            "main_3_1_3",
            "main_3_1_2",
            "main_3_1_1_1_0",
            "main_3_1_1_1",
            "fines_not_found",
            "errorMessage",
            "faq_representations_contacts",
            "faq_my_vehicle_not_driver_contacts",
            "registration_image_file"
        ],
        "userID": "userID",
        "userIDType": "msg",
        "traceID": "traceID",
        "traceIDType": "msg",
        "useTimer": false,
        "timer": "",
        "outputs": 3,
        "jsonToCreate": "{\"text\":\"{{text}}\",\"en\":{\"text\":\"{{text}}\"}}",
        "jsonToCreateType": "json",
        "templateDescriptionButtonsContainerToCreate": [],
        "templateDesciptionDetailsToCreate": "main",
        "templateDesciptionTextToCreate": "",
        "templateIdToCreate": "main_0_0",
        "templateGroupToCreate": "main",
        "currentTemplateDescription": {
            "details": "main"
        },
        "currentTemplateGroup": "main",
        "currentTemplateTimer": "",
        "currentTemplateType": "standard",
        "jsonToEdit": "{\"text\":\"{{text}}\",\"en\":{\"text\":\"{{new}}\"}}",
        "jsonToEditType": "json",
        "templateIdToEdit": "main_0_0",
        "templateDescriptionButtonsContainerToEdit": [],
        "templateDesciptionDetailsToEdit": "main",
        "templateDesciptionTextToEdit": "",
        "x": 1740,
        "y": 960,
        "wires": [
            [
                "ac695c4e2c467a88"
            ],
            [
                "ac695c4e2c467a88"
            ],
            [
                "ac695c4e2c467a88"
            ]
        ]
    },
    {
        "id": "010a64dc8f1eea3e",
        "type": "link out",
        "z": "c006f5a803bed002",
        "name": "welcome message",
        "mode": "link",
        "links": [
            "a54c901244d07145",
            "ffb27b2ae071c95f"
        ],
        "x": 1390,
        "y": 380,
        "wires": [],
        "l": true
    },
    {
        "id": "28ce16234359cc8f",
        "type": "debug",
        "z": "c006f5a803bed002",
        "name": "other event",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1010,
        "y": 1000,
        "wires": []
    },
    {
        "id": "ba4929c4912333a0",
        "type": "debug",
        "z": "c006f5a803bed002",
        "name": "other event",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1470,
        "y": 1200,
        "wires": []
    },
    {
        "id": "09d0c80ace5889bb",
        "type": "debug",
        "z": "c006f5a803bed002",
        "name": "other status",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1410,
        "y": 760,
        "wires": []
    },
    {
        "id": "0d098e29c268cfec",
        "type": "function",
        "z": "c006f5a803bed002",
        "name": "setReplyTypeAndAttachmentURL",
        "func": "\n//Set the ReplyType to see which type of message we have\nmsg.replyType = msg.payload.replyType;\nmsg.imageURL = msg.payload.originalBody.imageUrl;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1340,
        "y": 1100,
        "wires": [
            [
                "ba4929c4912333a0"
            ]
        ]
    },
    {
        "id": "ac695c4e2c467a88",
        "type": "debug",
        "z": "c006f5a803bed002",
        "name": "debug 56",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1900,
        "y": 920,
        "wires": []
    },
    {
        "id": "22fba705f4b4e4b6",
        "type": "switch",
        "z": "c006f5a803bed002",
        "name": "is template message",
        "property": "payload.originalBody.content",
        "propertyType": "msg",
        "rules": [
            {
                "t": "cont",
                "v": "template:<",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1500,
        "y": 1020,
        "wires": [
            [
                "1044a398e364a14f",
                "fc37cccb440ea4b5"
            ],
            [
                "ed91ed04d4994825"
            ]
        ]
    },
    {
        "id": "c7046b8d9b701db3",
        "type": "send-message",
        "z": "c006f5a803bed002",
        "isTimerUsed": false,
        "language": "lang",
        "languageType": "msg",
        "messageOption": "",
        "messageID": "",
        "messageIDType": "str",
        "name": "sendwindowopener",
        "props": {
            "": [],
            "welcomeMessage": [],
            "main_1_1": [],
            "main_1": [],
            "main_1_0": [],
            "main_0_0": [
                {
                    "property": "new",
                    "value": "payload.originalBody.content",
                    "valueType": "msg"
                }
            ],
            "sendwindowopener_template": [
                {
                    "property": "templateName",
                    "value": "templateName",
                    "valueType": "msg"
                },
                {
                    "property": "templateValues",
                    "value": "templateValues",
                    "valueType": "msg"
                }
            ]
        },
        "templateId": "sendwindowopener_template",
        "templateIdToDelete": "",
        "templatesJsons": {
            "welcomeMessage": {
                "text": "{{text}}",
                "en": {
                    "text": "*New Traffic Fine Notification from Ekurhuleni\nMetro Police Department*\nPlease take note that a new traffic fine (REF:\nC1/93563/808/187933) has been issued against ID\nending 51.\nFor more information or options to pay the fine\nplease reply to this message and our friendly\nChatbot, Traffic Officer Buddy will gladly assist you.\nAlternatively log onto payCity.co.za for more\ninformation and options to pay.\n1. Pay Fine\n2. More Options\n3. View/Query all my fines from Ekurhuleni"
                }
            },
            "main_1_1": {
                "text": "{{text}}",
                "en": {
                    "text": "Please follow the link below.\nhttps://paynow.paycity.co.za\n1. Back to Payment Options\n2. Main Menu\nYou can also pay at any of the\nfollowing locations: Spar, Shoprite &\nCheckers & Pnp."
                }
            },
            "main_1": {
                "text": "{{text}}",
                "en": {
                    "text": "Please pay your fine using the link below.\nYou can also pay at any of the\nfollowing locations: Spar, Shoprite &\nCheckers & Pnp."
                }
            },
            "main_1_0": {
                "text": "{{text}}",
                "en": {
                    "text": "Goodbye 👋 To enagage again with Traffic Officer Buddy please type 'Hi'"
                }
            },
            "main_0_0": {
                "text": "{{text}}",
                "en": {
                    "text": "{{new}}"
                }
            },
            "sendwindowopener_template": {
                "template": "{{templateName}}",
                "namespace": "bb7b867b_ecfe_4589_9dd9_855ea5071945",
                "values": [
                    "{{templateValues}}"
                ],
                "locale": "en"
            }
        },
        "templatesList": [
            "fine_not_found",
            "main_nextfines",
            "main_image_file",
            "main_finedetail_1",
            "main_payment_info_allowedreason",
            "get_started",
            "goodbye",
            "main_image_placeholder",
            "select_the_option",
            "enter_digit_number",
            "connect_agent",
            "enter_digit_number_error",
            "fines_not_found",
            "main_3_1_1_1_1_3",
            "welocme",
            "main_3_1_1_1_1",
            "main_1_0",
            "main_3_error",
            "main_3_1",
            "main_1",
            "main_3_1_1_0",
            "main_3",
            "fines_pdf_file",
            "welcomeMessage",
            "main_0_0_pdf",
            "main_0_0",
            "main_2_2",
            "main_3_1_1_1_0_0",
            "main_2",
            "main_2_1",
            "querying_for_fines",
            "pay_your_fine",
            "sendwindowopener_template",
            "main_3_1_1_1_1_2",
            "main_1_3",
            "main_pdf_placeholder",
            "fines_info",
            "main_1_2",
            "main_1_1",
            "main_3_1_1_1_1_1",
            "errorMessage",
            "main_1_2_1",
            "main_3_1_1",
            "main_3_1_3",
            "main_3_1_2",
            "main_3_1_1_1_0",
            "main_3_1_1_1",
            "registration_image_file"
        ],
        "userID": "userID",
        "userIDType": "msg",
        "traceID": "traceID",
        "traceIDType": "msg",
        "useTimer": false,
        "timer": "",
        "outputs": 3,
        "jsonToCreate": "{\"template\":\"empd_window_opener\",\"namespace\":\"bb7b867b_ecfe_4589_9dd9_855ea5071945\"}",
        "jsonToCreateType": "json",
        "templateDescriptionButtonsContainerToCreate": [],
        "templateDesciptionDetailsToCreate": "main",
        "templateDesciptionTextToCreate": "",
        "templateIdToCreate": "sendwindowopener_template",
        "templateGroupToCreate": "main",
        "currentTemplateDescription": {
            "details": "main"
        },
        "currentTemplateGroup": "main",
        "currentTemplateTimer": "",
        "currentTemplateType": "standard",
        "jsonToEdit": "{\"template\":\"{{templateName}}\",\"namespace\":\"bb7b867b_ecfe_4589_9dd9_855ea5071945\",\"values\":[\"{{templateValues}}\"],\"locale\":\"en\"}",
        "jsonToEditType": "json",
        "templateIdToEdit": "sendwindowopener_template",
        "templateDescriptionButtonsContainerToEdit": [],
        "templateDesciptionDetailsToEdit": "main",
        "templateDesciptionTextToEdit": "",
        "x": 1890,
        "y": 1100,
        "wires": [
            [
                "35b2abfde1cd3043",
                "3f9a50430bb3d891"
            ],
            [
                "35b2abfde1cd3043"
            ],
            [
                "35b2abfde1cd3043"
            ]
        ]
    },
    {
        "id": "35b2abfde1cd3043",
        "type": "debug",
        "z": "c006f5a803bed002",
        "name": "debug 58",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 2140,
        "y": 1120,
        "wires": []
    },
    {
        "id": "3f9a50430bb3d891",
        "type": "function",
        "z": "c006f5a803bed002",
        "name": "set startDialogFlag",
        "func": "msg.service = \"CustomerAPI\"\n\nmsg.method = \"POST\"\nmsg.url = `${msg.customerApi}/settings`;\nmsg.headers = {\n    \"authorization\": msg.customerApiKey,\n    \"x-trace-id\": msg.traceID,\n    \"x-user-id\": msg.userID\n}\n\nmsg.payload = {\n    \"dialogIsActive\": true\n}\n\nreturn msg;\n\n// msg.method = \"GET\";\n// msg.url = `${msg.chatwootApiUrl}/accounts/${msg.accountId}/contacts/search?q=${msg.chatId}`;\n\n// msg.payload = {};\n// msg.headers = {};\n// msg.headers['Content-Type'] = 'application/json';\n// msg.headers['api_access_token'] = msg.chatwootApiKey;\n// return msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2110,
        "y": 1040,
        "wires": [
            [
                "11a35fa80132db94"
            ]
        ]
    },
    {
        "id": "11a35fa80132db94",
        "type": "subflow:8e9dd0b44d3c40ea",
        "z": "c006f5a803bed002",
        "name": "",
        "x": 2280,
        "y": 1020,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "1044a398e364a14f",
        "type": "function",
        "z": "c006f5a803bed002",
        "name": "get template name",
        "func": "\n//Set the ReplyType to see which type of message we have\nlet text = msg.payload.originalBody.content;\n\nmsg.templateName = text.substring(text.indexOf('<') + 1, text.indexOf('>'));\nmsg.templateValues = text.substring(text.indexOf('>:') + 2, text.length);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1690,
        "y": 1160,
        "wires": [
            [
                "c7046b8d9b701db3"
            ]
        ]
    },
    {
        "id": "fc37cccb440ea4b5",
        "type": "debug",
        "z": "c006f5a803bed002",
        "name": "debug 59",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1760,
        "y": 1040,
        "wires": []
    },
    {
        "id": "34b1a7b0d64b6648",
        "type": "debug",
        "z": "c006f5a803bed002",
        "name": "debug 60",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 900,
        "y": 140,
        "wires": []
    },
    {
        "id": "20dd8ba65530253a",
        "type": "http in",
        "z": "c006f5a803bed002",
        "name": "/webhook/nouserdata/hessequa-template-window",
        "url": "/webhook/nouserdata/hessequa-template-window",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 254,
        "y": 1371.5999755859375,
        "wires": [
            [
                "a4d22429367c6807",
                "c4f8cf0d5e05b726",
                "695a610dd7682e04"
            ]
        ]
    },
    {
        "id": "a4d22429367c6807",
        "type": "debug",
        "z": "c006f5a803bed002",
        "name": "/webhook",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 500,
        "y": 1300,
        "wires": []
    },
    {
        "id": "c4f8cf0d5e05b726",
        "type": "change",
        "z": "c006f5a803bed002",
        "name": "ok",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "ok",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 470,
        "y": 1440,
        "wires": [
            [
                "a4fe5ac4f41cc8fd"
            ]
        ]
    },
    {
        "id": "a4fe5ac4f41cc8fd",
        "type": "http response",
        "z": "c006f5a803bed002",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 610,
        "y": 1440,
        "wires": []
    },
    {
        "id": "0f7dfafcf592c759",
        "type": "http in",
        "z": "c006f5a803bed002",
        "name": "/webhook/nouserdata/hessequa-templates",
        "url": "/webhook/nouserdata/hessequa-templates",
        "method": "post",
        "upload": false,
        "swaggerDoc": "",
        "x": 179,
        "y": 1726.199951171875,
        "wires": [
            [
                "fb759d8d7930963b",
                "02e3e2fac0ce211f",
                "6421f0405650a537"
            ]
        ]
    },
    {
        "id": "fb759d8d7930963b",
        "type": "debug",
        "z": "c006f5a803bed002",
        "name": "/webhook",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 380,
        "y": 1680,
        "wires": []
    },
    {
        "id": "02e3e2fac0ce211f",
        "type": "change",
        "z": "c006f5a803bed002",
        "name": "ok",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "ok",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 370,
        "y": 1800,
        "wires": [
            [
                "dda2e19861ad9933"
            ]
        ]
    },
    {
        "id": "dda2e19861ad9933",
        "type": "http response",
        "z": "c006f5a803bed002",
        "name": "",
        "statusCode": "",
        "headers": {},
        "x": 510,
        "y": 1800,
        "wires": []
    },
    {
        "id": "1ec41339b9fc26d9",
        "type": "link out",
        "z": "c006f5a803bed002",
        "name": "Chatwoot Action",
        "mode": "link",
        "links": [
            "9e7634d3f84920f0"
        ],
        "x": 740,
        "y": 1380,
        "wires": [],
        "l": true
    },
    {
        "id": "471d31bd88f0b931",
        "type": "link out",
        "z": "c006f5a803bed002",
        "name": "Chatwoot Action",
        "mode": "link",
        "links": [
            "9e7634d3f84920f0"
        ],
        "x": 660,
        "y": 1740,
        "wires": [],
        "l": true
    },
    {
        "id": "6421f0405650a537",
        "type": "change",
        "z": "c006f5a803bed002",
        "name": "Set action",
        "rules": [
            {
                "t": "set",
                "p": "temp_action",
                "pt": "msg",
                "to": "templates",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 460,
        "y": 1740,
        "wires": [
            [
                "471d31bd88f0b931"
            ]
        ]
    },
    {
        "id": "695a610dd7682e04",
        "type": "change",
        "z": "c006f5a803bed002",
        "name": "Set action",
        "rules": [
            {
                "t": "set",
                "p": "temp_action",
                "pt": "msg",
                "to": "window",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 560,
        "y": 1380,
        "wires": [
            [
                "1ec41339b9fc26d9"
            ]
        ]
    },
    {
        "id": "ffb27b2ae071c95f",
        "type": "link in",
        "z": "29d62c5bded88903",
        "name": "welcome in",
        "links": [
            "133282153eb9aaf1",
            "41c2e45c54dc13df",
            "be0e02b209e9698c",
            "d623ec91b8991802",
            "c3babc7ec9e31ae5",
            "ff1545301eda8043",
            "4781d42fc13f5b18",
            "fabf321ff9c5e89d",
            "5a21192ef97b2798",
            "688b14f3a70f64ca",
            "bbc950c7fa17fc0c",
            "9eba50843be8571c",
            "d58dd5ad22903bb4",
            "87323f3d17c25129",
            "010a64dc8f1eea3e",
            "582653c15abc1720",
            "7fd4f66a4337dbba",
            "5b88802bef98da59",
            "19fd5912f10529b3",
            "d839be4e2f04664a",
            "098267a4295e969e"
        ],
        "x": 235,
        "y": 180,
        "wires": [
            [
                "59cefaef9c82668a"
            ]
        ]
    },
    {
        "id": "59cefaef9c82668a",
        "type": "send-message",
        "z": "29d62c5bded88903",
        "isTimerUsed": false,
        "language": "lang",
        "languageType": "msg",
        "messageOption": "",
        "messageID": "",
        "messageIDType": "str",
        "name": "get_started",
        "props": {
            "": [],
            "welcomeMessage": [],
            "main_1_1": [],
            "main_1": [],
            "main_2": [],
            "main_3": [],
            "get_started": []
        },
        "templateId": "get_started",
        "templateIdToDelete": "",
        "templatesJsons": {
            "welcomeMessage": {
                "text": "{{text}}",
                "en": {
                    "text": "*New Traffic Fine Notification from Ekurhuleni\nMetro Police Department*\nPlease take note that a new traffic fine (REF:\nC1/93563/808/187933) has been issued against ID\nending 51.\nFor more information or options to pay the fine\nplease reply to this message and our friendly\nChatbot, Traffic Officer Buddy will gladly assist you.\nAlternatively log onto payCity.co.za for more\ninformation and options to pay.\n1. Pay Fine\n2. More Options\n3. View/Query all my fines from Ekurhuleni"
                }
            },
            "main_1_1": {
                "text": "{{text}}",
                "en": {
                    "text": "Please follow the link below.\nhttps://paynow.paycity.co.za\n1. Back to Payment Options\n2. Main Menu\nYou can also pay at any of the\nfollowing locations: Spar, Shoprite &\nCheckers & Pnp."
                }
            },
            "main_1": {
                "text": "{{text}}",
                "en": {
                    "text": "Please follow the link below.\nhttps://paynow.paycity.co.za\n1. Back to Payment Options\n2. Main Menu\nYou can also pay at any of the\nfollowing locations: Spar, Shoprite &\nCheckers & Pnp."
                }
            },
            "main_2": {
                "text": "{{text}}",
                "en": {
                    "text": "Please find a list of *commonly asked questions*.\nPlease select the option that relates to your query.\n1. How do I pay my fine?\n2. General Enquiry/Query a Fine.\n3. I want to chat to an Agent."
                }
            },
            "main_3": {
                "text": "{{text}}",
                "data": {
                    "interactive": {
                        "type": "button",
                        "buttons": [
                            {
                                "title": "{{button1}}"
                            },
                            {
                                "title": "{{button2}}"
                            },
                            {
                                "title": "{{button3}}"
                            }
                        ]
                    }
                },
                "en": {
                    "button1": "View all fines",
                    "button2": "FAQ",
                    "button3": "Chat to Agent",
                    "text": "Hi, I’m Traffic Officer, Buddy! 👋\n\nI can help you to VIEW, PAY or QUERY traffic FINES..\n\nLet’s get started!"
                }
            },
            "get_started": {
                "text": "{{text}}",
                "data": {
                    "interactive": {
                        "type": "button",
                        "buttons": [
                            {
                                "title": "{{button1}}"
                            },
                            {
                                "title": "{{button2}}"
                            },
                            {
                                "title": "{{button3}}"
                            }
                        ]
                    }
                },
                "en": {
                    "button1": "View all Notices",
                    "button2": "FAQ",
                    "button3": "Chat to Agent",
                    "text": "Hi! 👋 \n\nWelcome to the EMPD Chatbot. I’m your Traffic Officer Buddy! \n\nI can help you to VIEW, PAY, or QUERY traffic NOTICES.\n\nLet’s get started!\n\nUse the buttons below to find the information you need, or to chat with an agent. ⬇️"
                }
            }
        },
        "templatesList": [
            "fine_not_found",
            "faq_my_vehicle_not_driver",
            "querying_fine_details_waiting",
            "pay_your_fine",
            "paynow_express_payment",
            "main_nextfines",
            "main_image_file",
            "main_payment_info_allowedreason",
            "faq_dispute",
            "main_finedetail_1",
            "connect_agent",
            "main_image_placeholder",
            "goodbye",
            "enter_digit_number",
            "get_started",
            "select_the_option",
            "enter_digit_number_error",
            "main_3_1_1_1_1_3",
            "welocme",
            "main_3_1_1_1_1",
            "main_1_0",
            "main_3_error",
            "main_3_1",
            "main_1",
            "main_3_1_1_0",
            "main_3",
            "fines_pdf_file",
            "welcomeMessage",
            "main_0_0_pdf",
            "main_0_0",
            "main_2_2",
            "main_3_1_1_1_0_0",
            "main_2",
            "main_2_1",
            "querying_for_fines",
            "sendwindowopener_template",
            "fines_info",
            "main_3_1_1_1_1_2",
            "main_1_3",
            "main_pdf_placeholder",
            "main_1_2",
            "main_1_1",
            "main_3_1_1_1_1_1",
            "faq_other_queries",
            "main_1_2_1",
            "main_3_1_1",
            "main_3_1_3",
            "main_3_1_2",
            "main_3_1_1_1_0",
            "main_3_1_1_1",
            "fines_not_found",
            "faq_representations",
            "errorMessage",
            "faq_representations_contacts",
            "faq_my_vehicle_not_driver_contacts",
            "registration_image_file"
        ],
        "userID": "userID",
        "userIDType": "msg",
        "traceID": "traceID",
        "traceIDType": "msg",
        "useTimer": false,
        "timer": "",
        "outputs": 3,
        "jsonToCreate": "{\"text\":\"{{text}}\",\"data\":{\"interactive\":{\"type\":\"button\",\"buttons\":[{\"title\":\"{{button1}}\"},{\"title\":\"{{button2}}\"},{\"title\":\"{{button3}}\"}]}},\"en\":{\"button1\":\"View all fines\",\"button2\":\"FAQ\",\"button3\":\"Chat to Agent\",\"text\":\"Hi, I’m Traffic Officer, Buddy! 👋\\n\\nI can help you to VIEW, PAY or QUERY traffic FINES..\\n\\nLet’s get started!\"}}",
        "jsonToCreateType": "json",
        "templateDescriptionButtonsContainerToCreate": [],
        "templateDesciptionDetailsToCreate": "main",
        "templateDesciptionTextToCreate": "",
        "templateIdToCreate": "get_started",
        "templateGroupToCreate": "main",
        "currentTemplateDescription": {
            "details": "main"
        },
        "currentTemplateGroup": "main",
        "currentTemplateTimer": "",
        "currentTemplateType": "standard",
        "jsonToEdit": "{\"text\":\"{{text}}\",\"data\":{\"interactive\":{\"type\":\"button\",\"buttons\":[{\"title\":\"{{button1}}\"},{\"title\":\"{{button2}}\"},{\"title\":\"{{button3}}\"}]}},\"en\":{\"button1\":\"View all Notices\",\"button2\":\"FAQ\",\"button3\":\"Chat to Agent\",\"text\":\"Hi! 👋 \\n\\nWelcome to the EMPD Chatbot. I’m your Traffic Officer Buddy! \\n\\nI can help you to VIEW, PAY, or QUERY traffic NOTICES.\\n\\nLet’s get started!\\n\\nUse the buttons below to find the information you need, or to chat with an agent. ⬇️\"}}",
        "jsonToEditType": "json",
        "templateIdToEdit": "get_started",
        "templateDescriptionButtonsContainerToEdit": [],
        "templateDesciptionDetailsToEdit": "main",
        "templateDesciptionTextToEdit": "",
        "x": 370,
        "y": 180,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "1502b9f6f89f3b27",
        "type": "link in",
        "z": "c65734bb7dc811a1",
        "name": "",
        "links": [
            "d1b324e58189f769"
        ],
        "x": 155,
        "y": 240,
        "wires": [
            [
                "a9ca10e2c2e4677a",
                "f42f5d684377c069"
            ]
        ]
    },
    {
        "id": "6c9f5167c4287b14",
        "type": "switch",
        "z": "c65734bb7dc811a1",
        "name": "state",
        "property": "state",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "pay_your_fine",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "select_the_option",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "connect_agent",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "get_started",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "enter_digit_number",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "enter_digit_number_error",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 7,
        "x": 490,
        "y": 500,
        "wires": [
            [
                "4c725e4eefdd8003"
            ],
            [
                "f4cf73bc3b923879"
            ],
            [
                "652005cc86416f5e"
            ],
            [
                "6df1e4856e83fb54"
            ],
            [
                "19590267e956264f"
            ],
            [
                "19590267e956264f"
            ],
            [
                "487c090e5e9911b4",
                "4a448fd4c1ec06b7"
            ]
        ]
    },
    {
        "id": "f4cf73bc3b923879",
        "type": "switch",
        "z": "c65734bb7dc811a1",
        "name": "text",
        "property": "text",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "How to pay my Notice",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Chat to Agent",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Representations",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "My Vehicle, Not Driver",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Other Queries",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Dispute",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 7,
        "x": 810,
        "y": 420,
        "wires": [
            [
                "f4556d71a2eaf1a8"
            ],
            [
                "80c07eab93ed6b8d"
            ],
            [
                "937e71a11a1da2fb"
            ],
            [
                "937e71a11a1da2fb"
            ],
            [
                "937e71a11a1da2fb"
            ],
            [
                "937e71a11a1da2fb"
            ],
            [
                "fbf4c74c3851098d"
            ]
        ]
    },
    {
        "id": "4a448fd4c1ec06b7",
        "type": "switch",
        "z": "c65734bb7dc811a1",
        "name": "state",
        "property": "state",
        "propertyType": "msg",
        "rules": [
            {
                "t": "regex",
                "v": "^main_finedetail_|^main_nextfines",
                "vt": "str",
                "case": false
            },
            {
                "t": "eq",
                "v": "faq_representations",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "faq_other_queries",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "faq_my_vehicle_not_driver",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "faq_representations_contacts",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "faq_my_vehicle_not_driver_contacts",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "faq_dispute",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 8,
        "x": 790,
        "y": 980,
        "wires": [
            [
                "60b38a4f692a3ad7"
            ],
            [
                "cf76f46968fca631"
            ],
            [
                "cf76f46968fca631"
            ],
            [
                "cf76f46968fca631"
            ],
            [
                "cf76f46968fca631"
            ],
            [
                "cf76f46968fca631"
            ],
            [
                "cf76f46968fca631"
            ],
            [
                "f08146146f0e1d86",
                "50fe7339a8b0d11b"
            ]
        ]
    },
    {
        "id": "f08146146f0e1d86",
        "type": "switch",
        "z": "c65734bb7dc811a1",
        "name": "state",
        "property": "state",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "fines_info",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "fines_pdf_file",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "main_image_file",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "paynow_express_payment",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "main_payment_info_allowedreason",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 6,
        "x": 950,
        "y": 1240,
        "wires": [
            [
                "89424dad713b6823"
            ],
            [
                "89424dad713b6823"
            ],
            [
                "89424dad713b6823"
            ],
            [
                "89424dad713b6823"
            ],
            [
                "89424dad713b6823"
            ],
            [
                "98a4ed15946ab710",
                "30aef5303acf13fa"
            ]
        ]
    },
    {
        "id": "5a21192ef97b2798",
        "type": "link out",
        "z": "c65734bb7dc811a1",
        "name": "",
        "mode": "link",
        "links": [
            "2966e0eb027ec39c",
            "ffb27b2ae071c95f"
        ],
        "x": 1355,
        "y": 1880,
        "wires": []
    },
    {
        "id": "62d093e99856bd3c",
        "type": "send-message",
        "z": "c65734bb7dc811a1",
        "isTimerUsed": false,
        "language": "lang",
        "languageType": "msg",
        "messageOption": "",
        "messageID": "",
        "messageIDType": "str",
        "name": "main_3_1_1_1_1_2",
        "props": {
            "": [],
            "welcomeMessage": [],
            "main_3_1_1_1_1": [],
            "main_3_1_1_1_1_1": [],
            "main_3_1_1_1_1_2": []
        },
        "templateId": "main_3_1_1_1_1_2",
        "templateIdToDelete": "",
        "templatesJsons": {
            "welcomeMessage": {
                "text": "{{text}}",
                "en": {
                    "text": "*New Traffic Fine Notification from Ekurhuleni\nMetro Police Department*\nPlease take note that a new traffic fine (REF:\nC1/93563/808/187933) has been issued against ID\nending 51.\nFor more information or options to pay the fine\nplease reply to this message and our friendly\nChatbot, Traffic Officer Buddy will gladly assist you.\nAlternatively log onto payCity.co.za for more\ninformation and options to pay.\n1. Pay Fine\n2. More Options\n3. View/Query all my fines from Ekurhuleni"
                }
            },
            "main_3_1_1_1_1": {
                "text": "{{text}}",
                "en": {
                    "text": "Amount:\nVehicle Registration\nNotice Number\nOffence Date\n1. Pay Now\n2. More Options\n3. Back to List"
                }
            },
            "main_3_1_1_1": {
                "text": "{{text}}",
                "en": {
                    "text": "Please select Fine (list of all fines):\n1. CA 687666 - R500\n2. CA 000997 - R1100\n3. CY 500000 - R750"
                }
            },
            "main_3_1_1_1_1_1": {
                "text": "{{text}}",
                "en": {
                    "text": "Please follow the link below.\nhttps://paynow.paycity.co.za\n1. Back to Payment Options\n2. Main Menu\nYou can also pay at any of the\nfollowing locations: Spar, Shoprite &\nCheckers & Pnp."
                }
            },
            "main_3_1_1_1_1_2": {
                "text": "{{text}}",
                "data": {
                    "interactive": {
                        "type": "button",
                        "buttons": [
                            {
                                "title": "{{button1}}"
                            },
                            {
                                "title": "{{button2}}"
                            },
                            {
                                "title": "{{button3}}"
                            }
                        ]
                    }
                },
                "en": {
                    "button1": "1",
                    "button2": "2",
                    "button3": "Back to List",
                    "text": "Please find a list of *commonly asked questions*.\nPlease select the option that relates to your query.\n\n1. How do I pay my fine?\n2. Transfer me to an Agent."
                }
            }
        },
        "templatesList": [
            "main_3_1_1_1_1_3",
            "welocme",
            "main_3_error",
            "main_1_0",
            "main_2_1",
            "main_3_1",
            "main_1",
            "main_3",
            "main_3_1_1_0",
            "main_2_2",
            "welcomeMessage",
            "main_1_3",
            "main_1_2",
            "main_2",
            "main_1_1",
            "main_3_1_1_1_1",
            "main_1_2_1",
            "main_3_1_1",
            "errorMessage",
            "main_3_1_3",
            "main_3_1_2",
            "main_3_1_1_1_1_1",
            "main_3_1_1_1_1_2",
            "main_3_1_1_1_0",
            "main_3_1_1_1"
        ],
        "userID": "userID",
        "userIDType": "msg",
        "traceID": "traceID",
        "traceIDType": "msg",
        "useTimer": false,
        "timer": "",
        "outputs": 3,
        "jsonToCreate": "{\"text\":\"{{text}}\",\"en\":{\"text\":\"Please find a list of *commonly asked questions*.\\nPlease select the option that relates to your query.\\n1. How do I pay my fine?\\n2. General Enquiry/Query a Fine.\\n3. I want to chat to an Agent.\"}}",
        "jsonToCreateType": "json",
        "templateDescriptionButtonsContainerToCreate": [],
        "templateDesciptionDetailsToCreate": "main",
        "templateDesciptionTextToCreate": "",
        "templateIdToCreate": "main_3_1_1_1_1_2",
        "templateGroupToCreate": "main",
        "currentTemplateDescription": {
            "details": "main"
        },
        "currentTemplateGroup": "main",
        "currentTemplateTimer": "",
        "currentTemplateType": "standard",
        "jsonToEdit": "{\"text\":\"{{text}}\",\"data\":{\"interactive\":{\"type\":\"button\",\"buttons\":[{\"title\":\"{{button1}}\"},{\"title\":\"{{button2}}\"},{\"title\":\"{{button3}}\"}]}},\"en\":{\"button1\":\"1\",\"button2\":\"2\",\"button3\":\"Back to List\",\"text\":\"Please find a list of *commonly asked questions*.\\nPlease select the option that relates to your query.\\n\\n1. How do I pay my fine?\\n2. Transfer me to an Agent.\"}}",
        "jsonToEditType": "json",
        "templateIdToEdit": "main_3_1_1_1_1_2",
        "templateDescriptionButtonsContainerToEdit": [],
        "templateDesciptionDetailsToEdit": "main",
        "templateDesciptionTextToEdit": "",
        "x": 1750,
        "y": 1160,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "487c090e5e9911b4",
        "type": "debug",
        "z": "c65734bb7dc811a1",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 790,
        "y": 1080,
        "wires": []
    },
    {
        "id": "50fe7339a8b0d11b",
        "type": "debug",
        "z": "c65734bb7dc811a1",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 950,
        "y": 1340,
        "wires": []
    },
    {
        "id": "98a4ed15946ab710",
        "type": "debug",
        "z": "c65734bb7dc811a1",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1210,
        "y": 1880,
        "wires": []
    },
    {
        "id": "a9ca10e2c2e4677a",
        "type": "debug",
        "z": "c65734bb7dc811a1",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 190,
        "y": 80,
        "wires": []
    },
    {
        "id": "89424dad713b6823",
        "type": "switch",
        "z": "c65734bb7dc811a1",
        "name": "text",
        "property": "text",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "Pay Now",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "FAQ",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Back to List",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 4,
        "x": 1200,
        "y": 1160,
        "wires": [
            [
                "af3639d1fae79041"
            ],
            [
                "6c18d7405fc8ccfd"
            ],
            [
                "78fa4c2e0c887ec6"
            ],
            [
                "9e5aeba86c948b7c"
            ]
        ]
    },
    {
        "id": "f42f5d684377c069",
        "type": "switch",
        "z": "c65734bb7dc811a1",
        "name": "text",
        "property": "text",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "Pay Now",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "FAQ",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "View Notices",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Chat to Agent",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Main Menu",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "More Options",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "View all Notices",
                "vt": "str"
            },
            {
                "t": "regex",
                "v": "not me|not my fine|its not me|it\\'s not me",
                "vt": "str",
                "case": true
            },
            {
                "t": "eq",
                "v": "View all Notices",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 10,
        "x": 310,
        "y": 240,
        "wires": [
            [
                "330467a9192df44b"
            ],
            [
                "466d48b96641fabb"
            ],
            [
                "098267a4295e969e"
            ],
            [
                "4474fcb737091fec"
            ],
            [
                "098267a4295e969e"
            ],
            [
                "098267a4295e969e"
            ],
            [
                "f399fa2267e76ce4"
            ],
            [
                "4474fcb737091fec"
            ],
            [
                "f399fa2267e76ce4"
            ],
            [
                "6c9f5167c4287b14"
            ]
        ]
    },
    {
        "id": "80c07eab93ed6b8d",
        "type": "link out",
        "z": "c65734bb7dc811a1",
        "name": "consultation",
        "mode": "link",
        "links": [
            "2feac52c66178c48"
        ],
        "x": 1030,
        "y": 420,
        "wires": [],
        "l": true
    },
    {
        "id": "19590267e956264f",
        "type": "link out",
        "z": "c65734bb7dc811a1",
        "name": "check number out",
        "mode": "link",
        "links": [
            "b81905fbb96ef784",
            "a270a77bfa55e0cd"
        ],
        "x": 755,
        "y": 800,
        "wires": []
    },
    {
        "id": "6df1e4856e83fb54",
        "type": "switch",
        "z": "c65734bb7dc811a1",
        "name": "text",
        "property": "text",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "View all Notices",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "FAQ",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Chat to Agent",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 4,
        "x": 790,
        "y": 660,
        "wires": [
            [
                "68516ee79e3c18c3"
            ],
            [
                "b7be88335720244e"
            ],
            [
                "10f54d76a0a6d7c1"
            ],
            [
                "41f94ba03122eee2"
            ]
        ]
    },
    {
        "id": "10f54d76a0a6d7c1",
        "type": "link out",
        "z": "c65734bb7dc811a1",
        "name": "consultation out",
        "mode": "link",
        "links": [
            "2feac52c66178c48",
            "da89575deb09d456"
        ],
        "x": 935,
        "y": 719,
        "wires": []
    },
    {
        "id": "30aef5303acf13fa",
        "type": "switch",
        "z": "c65734bb7dc811a1",
        "name": "state",
        "property": "state",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "fines_not_found",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 1210,
        "y": 1820,
        "wires": [
            [
                "df48506771d11815"
            ],
            [
                "5a21192ef97b2798"
            ]
        ]
    },
    {
        "id": "b95cd7ee9b4caeb4",
        "type": "link in",
        "z": "c65734bb7dc811a1",
        "name": "main_3_1_1_1 in",
        "links": [
            "e0197850fc1ad0b4",
            "4a2b51105a158754",
            "cfefda8be5571b88",
            "8e4787301e767c1c"
        ],
        "x": 815,
        "y": 600,
        "wires": [
            [
                "68516ee79e3c18c3"
            ]
        ]
    },
    {
        "id": "652005cc86416f5e",
        "type": "link out",
        "z": "c65734bb7dc811a1",
        "name": "goodbye",
        "mode": "link",
        "links": [
            "806330a6233f1910"
        ],
        "x": 780,
        "y": 500,
        "wires": [],
        "l": true
    },
    {
        "id": "66bce41cea4e19fb",
        "type": "link out",
        "z": "c65734bb7dc811a1",
        "name": "noticeNumber out",
        "mode": "link",
        "links": [
            "cd4ecd6273a07a87"
        ],
        "x": 1055,
        "y": 940,
        "wires": []
    },
    {
        "id": "df48506771d11815",
        "type": "switch",
        "z": "c65734bb7dc811a1",
        "name": "text",
        "property": "text",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "Back",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Main Menu",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 3,
        "x": 1390,
        "y": 1780,
        "wires": [
            [
                "8e4787301e767c1c"
            ],
            [
                "87323f3d17c25129"
            ],
            [
                "4fafc4eab5469761"
            ]
        ]
    },
    {
        "id": "8e4787301e767c1c",
        "type": "link out",
        "z": "c65734bb7dc811a1",
        "name": "main_3_1_1_1 out",
        "mode": "link",
        "links": [
            "b95cd7ee9b4caeb4"
        ],
        "x": 1525,
        "y": 1760,
        "wires": []
    },
    {
        "id": "87323f3d17c25129",
        "type": "link out",
        "z": "c65734bb7dc811a1",
        "name": "welcome message",
        "mode": "link",
        "links": [
            "a54c901244d07145",
            "ffb27b2ae071c95f"
        ],
        "x": 1590,
        "y": 1800,
        "wires": [],
        "l": true
    },
    {
        "id": "4c725e4eefdd8003",
        "type": "switch",
        "z": "c65734bb7dc811a1",
        "name": "text",
        "property": "text",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "Back to FAQ",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Main Menu",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Chat to Agent",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 4,
        "x": 790,
        "y": 240,
        "wires": [
            [
                "fdabf024187b4cb2"
            ],
            [
                "d839be4e2f04664a"
            ],
            [
                "eb8ac7583c8a922d"
            ],
            [
                "e0a990b922ee86ea"
            ]
        ]
    },
    {
        "id": "eb8ac7583c8a922d",
        "type": "link out",
        "z": "c65734bb7dc811a1",
        "name": "consultation",
        "mode": "link",
        "links": [
            "2feac52c66178c48"
        ],
        "x": 1010,
        "y": 300,
        "wires": [],
        "l": true
    },
    {
        "id": "60b38a4f692a3ad7",
        "type": "switch",
        "z": "c65734bb7dc811a1",
        "name": "Next",
        "property": "text",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "Next",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Previous",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 3,
        "x": 950,
        "y": 900,
        "wires": [
            [
                "2f77d72aca2c6988"
            ],
            [
                "2f77d72aca2c6988"
            ],
            [
                "66bce41cea4e19fb"
            ]
        ]
    },
    {
        "id": "2f77d72aca2c6988",
        "type": "link out",
        "z": "c65734bb7dc811a1",
        "name": "link out 2",
        "mode": "link",
        "links": [
            "74dad587240b02f3"
        ],
        "x": 1055,
        "y": 860,
        "wires": []
    },
    {
        "id": "78fa4c2e0c887ec6",
        "type": "link out",
        "z": "c65734bb7dc811a1",
        "name": "link out 3",
        "mode": "link",
        "links": [
            "74dad587240b02f3"
        ],
        "x": 1365,
        "y": 1220,
        "wires": []
    },
    {
        "id": "4474fcb737091fec",
        "type": "link out",
        "z": "c65734bb7dc811a1",
        "name": "consultation out",
        "mode": "link",
        "links": [
            "2feac52c66178c48",
            "da89575deb09d456"
        ],
        "x": 495,
        "y": 300,
        "wires": []
    },
    {
        "id": "59c0cb2ebc83804a",
        "type": "send-message",
        "z": "c65734bb7dc811a1",
        "isTimerUsed": false,
        "language": "lang",
        "languageType": "msg",
        "messageOption": "",
        "messageID": "",
        "messageIDType": "str",
        "name": "pay_your_fine",
        "props": {
            "": [],
            "welcomeMessage": [],
            "main_1_1": [],
            "main_1": [],
            "pay_your_fine": []
        },
        "templateId": "pay_your_fine",
        "templateIdToDelete": "",
        "templatesJsons": {
            "welcomeMessage": {
                "text": "{{text}}",
                "en": {
                    "text": "*New Traffic Fine Notification from Ekurhuleni\nMetro Police Department*\nPlease take note that a new traffic fine (REF:\nC1/93563/808/187933) has been issued against ID\nending 51.\nFor more information or options to pay the fine\nplease reply to this message and our friendly\nChatbot, Traffic Officer Buddy will gladly assist you.\nAlternatively log onto payCity.co.za for more\ninformation and options to pay.\n1. Pay Fine\n2. More Options\n3. View/Query all my fines from Ekurhuleni"
                }
            },
            "main_1_1": {
                "text": "{{text}}",
                "en": {
                    "text": "Please follow the link below.\nhttps://paynow.paycity.co.za\n1. Back to Payment Options\n2. Main Menu\nYou can also pay at any of the\nfollowing locations: Spar, Shoprite &\nCheckers & Pnp."
                }
            },
            "main_1": {
                "text": "{{text}}",
                "data": {
                    "interactive": {
                        "type": "button",
                        "buttons": [
                            {
                                "title": "{{button1}}"
                            },
                            {
                                "title": "{{button2}}"
                            },
                            {
                                "title": "{{button3}}"
                            }
                        ]
                    }
                },
                "en": {
                    "button1": "Back",
                    "button2": "Main Menu",
                    "button3": "Chat to Agent",
                    "text": "Please pay your fine using the link below:\n\nhttps://payCity.co.za\n\nYou can also pay at any of the\nfollowing locations: Spar, Shoprite &\nCheckers & Pnp."
                }
            },
            "pay_your_fine": {
                "text": "{{text}}",
                "data": {
                    "interactive": {
                        "type": "button",
                        "buttons": [
                            {
                                "title": "{{button1}}"
                            },
                            {
                                "title": "{{button2}}"
                            },
                            {
                                "title": "{{button3}}"
                            }
                        ]
                    }
                },
                "en": {
                    "button1": "Back to FAQ",
                    "button2": "Main Menu",
                    "button3": "Chat to Agent",
                    "text": "You can pay your fine with any of the following options:\n\n1. Paycity website (www.paycity.co.za) - EFT, credit card, or cheque card\n2. Online banking - FNB and Absa\n3. Directly at the Issuing Authority, (Metro Police Department)\n"
                }
            }
        },
        "templatesList": [
            "fine_not_found",
            "faq_my_vehicle_not_driver",
            "querying_fine_details_waiting",
            "paynow_express_payment",
            "pay_your_fine",
            "main_nextfines",
            "main_image_file",
            "main_payment_info_allowedreason",
            "faq_dispute",
            "main_finedetail_1",
            "main_image_placeholder",
            "goodbye",
            "enter_digit_number",
            "connect_agent",
            "get_started",
            "select_the_option",
            "enter_digit_number_error",
            "main_3_1_1_1_1_3",
            "welocme",
            "main_3_1_1_1_1",
            "main_1_0",
            "main_3_error",
            "main_3_1",
            "main_1",
            "main_3_1_1_0",
            "main_3",
            "fines_pdf_file",
            "welcomeMessage",
            "main_0_0_pdf",
            "main_0_0",
            "main_2_2",
            "main_3_1_1_1_0_0",
            "main_2",
            "main_2_1",
            "querying_for_fines",
            "sendwindowopener_template",
            "fines_info",
            "main_3_1_1_1_1_2",
            "main_1_3",
            "main_pdf_placeholder",
            "main_1_2",
            "main_1_1",
            "main_3_1_1_1_1_1",
            "faq_other_queries",
            "main_1_2_1",
            "main_3_1_1",
            "main_3_1_3",
            "main_3_1_2",
            "main_3_1_1_1_0",
            "main_3_1_1_1",
            "fines_not_found",
            "faq_representations",
            "errorMessage",
            "faq_representations_contacts",
            "faq_my_vehicle_not_driver_contacts",
            "registration_image_file"
        ],
        "userID": "userID",
        "userIDType": "msg",
        "traceID": "traceID",
        "traceIDType": "msg",
        "useTimer": false,
        "timer": "",
        "outputs": 3,
        "jsonToCreate": "{\"text\":\"{{text}}\",\"data\":{\"interactive\":{\"type\":\"button\",\"buttons\":[{\"title\":\"{{button1}}\"},{\"title\":\"{{button2}}\"},{\"title\":\"{{button3}}\"}]}},\"en\":{\"button1\":\"Back\",\"button2\":\"Main Menu\",\"button3\":\"Chat to Agent\",\"text\":\"Please pay your fine using the link below:\\n\\nhttps://payCity.co.za\\n\\nYou can also pay at any of the\\nfollowing locations: Spar, Shoprite &\\nCheckers & Pnp.\"}}",
        "jsonToCreateType": "json",
        "templateDescriptionButtonsContainerToCreate": [],
        "templateDesciptionDetailsToCreate": "main",
        "templateDesciptionTextToCreate": "",
        "templateIdToCreate": "pay_your_fine",
        "templateGroupToCreate": "main",
        "currentTemplateDescription": {
            "details": "main"
        },
        "currentTemplateGroup": "main",
        "currentTemplateTimer": "",
        "currentTemplateType": "standard",
        "jsonToEdit": "{\"text\":\"{{text}}\",\"data\":{\"interactive\":{\"type\":\"button\",\"buttons\":[{\"title\":\"{{button1}}\"},{\"title\":\"{{button2}}\"},{\"title\":\"{{button3}}\"}]}},\"en\":{\"button1\":\"Back to FAQ\",\"button2\":\"Main Menu\",\"button3\":\"Chat to Agent\",\"text\":\"You can pay your fine with any of the following options:\\n\\n1. Paycity website (www.paycity.co.za) - EFT, credit card, or cheque card\\n2. Online banking - FNB and Absa\\n3. Directly at the Issuing Authority, (Metro Police Department)\\n\"}}",
        "jsonToEditType": "json",
        "templateIdToEdit": "pay_your_fine",
        "templateDescriptionButtonsContainerToEdit": [],
        "templateDesciptionDetailsToEdit": "main",
        "templateDesciptionTextToEdit": "",
        "x": 520,
        "y": 132,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "466d48b96641fabb",
        "type": "send-message",
        "z": "c65734bb7dc811a1",
        "isTimerUsed": false,
        "language": "lang",
        "languageType": "msg",
        "messageOption": "",
        "messageID": "",
        "messageIDType": "str",
        "name": "select_the_option",
        "props": {
            "": [],
            "welcomeMessage": [],
            "main_1_1": [],
            "main_1": [],
            "main_2": [],
            "select_the_option": [
                {
                    "property": "faqs",
                    "value": "faqs",
                    "valueType": "msg"
                }
            ]
        },
        "templateId": "select_the_option",
        "templateIdToDelete": "",
        "templatesJsons": {
            "welcomeMessage": {
                "text": "{{text}}",
                "en": {
                    "text": "*New Traffic Fine Notification from Ekurhuleni\nMetro Police Department*\nPlease take note that a new traffic fine (REF:\nC1/93563/808/187933) has been issued against ID\nending 51.\nFor more information or options to pay the fine\nplease reply to this message and our friendly\nChatbot, Traffic Officer Buddy will gladly assist you.\nAlternatively log onto payCity.co.za for more\ninformation and options to pay.\n1. Pay Fine\n2. More Options\n3. View/Query all my fines from Ekurhuleni"
                }
            },
            "main_1_1": {
                "text": "{{text}}",
                "en": {
                    "text": "Please follow the link below.\nhttps://paynow.paycity.co.za\n1. Back to Payment Options\n2. Main Menu\nYou can also pay at any of the\nfollowing locations: Spar, Shoprite &\nCheckers & Pnp."
                }
            },
            "main_1": {
                "text": "{{text}}",
                "en": {
                    "text": "Please follow the link below.\nhttps://paynow.paycity.co.za\n1. Back to Payment Options\n2. Main Menu\nYou can also pay at any of the\nfollowing locations: Spar, Shoprite &\nCheckers & Pnp."
                }
            },
            "main_2": {
                "text": "{{text}}",
                "data": {
                    "interactive": {
                        "type": "button",
                        "buttons": [
                            {
                                "title": "{{button1}}"
                            },
                            {
                                "title": "{{button2}}"
                            }
                        ]
                    }
                },
                "en": {
                    "button1": "1",
                    "button2": "2",
                    "text": "Please select the option that relates to your query.\n\n1. How do I pay my fine?\n2. Transfer me to an Agent."
                }
            },
            "select_the_option": {
                "text": "{{text}}",
                "data": {
                    "interactive": {
                        "type": "list",
                        "buttonText": "FAQs options",
                        "header": "FAQ",
                        "sections": [
                            {
                                "title": "Select from the list",
                                "rows": "{{faqs}}"
                            }
                        ]
                    }
                },
                "en": {
                    "text": "*Let's see if I can help!* \n\nHere's a list of *FAQs* that might help you with your query 👍\n\nSelect the option you need more information on. ⬇️"
                }
            }
        },
        "templatesList": [
            "fine_not_found",
            "faq_my_vehicle_not_driver",
            "querying_fine_details_waiting",
            "paynow_express_payment",
            "pay_your_fine",
            "main_nextfines",
            "main_image_file",
            "main_payment_info_allowedreason",
            "faq_dispute",
            "main_finedetail_1",
            "get_started",
            "connect_agent",
            "main_image_placeholder",
            "goodbye",
            "enter_digit_number",
            "select_the_option",
            "enter_digit_number_error",
            "main_3_1_1_1_1_3",
            "welocme",
            "main_3_1_1_1_1",
            "main_1_0",
            "main_3_error",
            "main_3_1",
            "main_1",
            "main_3_1_1_0",
            "main_3",
            "fines_pdf_file",
            "welcomeMessage",
            "main_0_0_pdf",
            "main_0_0",
            "main_2_2",
            "main_3_1_1_1_0_0",
            "main_2",
            "main_2_1",
            "querying_for_fines",
            "sendwindowopener_template",
            "fines_info",
            "main_3_1_1_1_1_2",
            "main_1_3",
            "main_pdf_placeholder",
            "main_1_2",
            "main_1_1",
            "main_3_1_1_1_1_1",
            "faq_other_queries",
            "main_1_2_1",
            "main_3_1_1",
            "main_3_1_3",
            "main_3_1_2",
            "main_3_1_1_1_0",
            "main_3_1_1_1",
            "fines_not_found",
            "faq_representations",
            "errorMessage",
            "faq_representations_contacts",
            "faq_my_vehicle_not_driver_contacts",
            "registration_image_file"
        ],
        "userID": "userID",
        "userIDType": "msg",
        "traceID": "traceID",
        "traceIDType": "msg",
        "useTimer": false,
        "timer": "",
        "outputs": 3,
        "jsonToCreate": "{\"text\":\"{{text}}\",\"data\":{\"interactive\":{\"type\":\"button\",\"buttons\":[{\"title\":\"{{button1}}\"},{\"title\":\"{{button2}}\"}]}},\"en\":{\"button1\":\"How do I pay my fine\",\"button2\":\"Transfer to an Agent\",\"text\":\"Please select the option that relates to your query.\"}}",
        "jsonToCreateType": "json",
        "templateDescriptionButtonsContainerToCreate": [],
        "templateDesciptionDetailsToCreate": "main",
        "templateDesciptionTextToCreate": "",
        "templateIdToCreate": "select_the_option",
        "templateGroupToCreate": "main",
        "currentTemplateDescription": {
            "details": "main"
        },
        "currentTemplateGroup": "main",
        "currentTemplateTimer": "",
        "currentTemplateType": "standard",
        "jsonToEdit": "{\"text\":\"{{text}}\",\"data\":{\"interactive\":{\"type\":\"list\",\"buttonText\":\"FAQs options\",\"header\":\"FAQ\",\"sections\":[{\"title\":\"Select from the list\",\"rows\":\"{{faqs}}\"}]}},\"en\":{\"text\":\"*Let's see if I can help!* \\n\\nHere's a list of *FAQs* that might help you with your query 👍\\n\\nSelect the option you need more information on. ⬇️\"}}",
        "jsonToEditType": "json",
        "templateIdToEdit": "select_the_option",
        "templateDescriptionButtonsContainerToEdit": [],
        "templateDesciptionDetailsToEdit": "main",
        "templateDesciptionTextToEdit": "",
        "x": 530,
        "y": 186,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "fdabf024187b4cb2",
        "type": "send-message",
        "z": "c65734bb7dc811a1",
        "isTimerUsed": false,
        "language": "lang",
        "languageType": "msg",
        "messageOption": "",
        "messageID": "",
        "messageIDType": "str",
        "name": "select_the_option",
        "props": {
            "": [],
            "welcomeMessage": [],
            "main_1_1": [],
            "main_1": [],
            "main_2": [],
            "select_the_option": [
                {
                    "property": "faqs",
                    "value": "faqs",
                    "valueType": "msg"
                }
            ]
        },
        "templateId": "select_the_option",
        "templateIdToDelete": "",
        "templatesJsons": {
            "welcomeMessage": {
                "text": "{{text}}",
                "en": {
                    "text": "*New Traffic Fine Notification from Ekurhuleni\nMetro Police Department*\nPlease take note that a new traffic fine (REF:\nC1/93563/808/187933) has been issued against ID\nending 51.\nFor more information or options to pay the fine\nplease reply to this message and our friendly\nChatbot, Traffic Officer Buddy will gladly assist you.\nAlternatively log onto payCity.co.za for more\ninformation and options to pay.\n1. Pay Fine\n2. More Options\n3. View/Query all my fines from Ekurhuleni"
                }
            },
            "main_1_1": {
                "text": "{{text}}",
                "en": {
                    "text": "Please follow the link below.\nhttps://paynow.paycity.co.za\n1. Back to Payment Options\n2. Main Menu\nYou can also pay at any of the\nfollowing locations: Spar, Shoprite &\nCheckers & Pnp."
                }
            },
            "main_1": {
                "text": "{{text}}",
                "en": {
                    "text": "Please follow the link below.\nhttps://paynow.paycity.co.za\n1. Back to Payment Options\n2. Main Menu\nYou can also pay at any of the\nfollowing locations: Spar, Shoprite &\nCheckers & Pnp."
                }
            },
            "main_2": {
                "text": "{{text}}",
                "data": {
                    "interactive": {
                        "type": "button",
                        "buttons": [
                            {
                                "title": "{{button1}}"
                            },
                            {
                                "title": "{{button2}}"
                            }
                        ]
                    }
                },
                "en": {
                    "button1": "1",
                    "button2": "2",
                    "text": "Please select the option that relates to your query.\n\n1. How do I pay my fine?\n2. Transfer me to an Agent."
                }
            },
            "select_the_option": {
                "text": "{{text}}",
                "data": {
                    "interactive": {
                        "type": "list",
                        "buttonText": "FAQs options",
                        "header": "FAQ",
                        "sections": [
                            {
                                "title": "Select from the list",
                                "rows": "{{faqs}}"
                            }
                        ]
                    }
                },
                "en": {
                    "text": "*Let's see if I can help!* \n\nHere's a list of *FAQs* that might help you with your query 👍\n\nSelect the option you need more information on. ⬇️"
                }
            }
        },
        "templatesList": [
            "fine_not_found",
            "faq_representations",
            "faq_my_vehicle_not_driver",
            "pay_your_fine",
            "main_nextfines",
            "main_image_file",
            "main_finedetail_1",
            "main_payment_info_allowedreason",
            "get_started",
            "goodbye",
            "main_image_placeholder",
            "enter_digit_number",
            "connect_agent",
            "select_the_option",
            "enter_digit_number_error",
            "fines_not_found",
            "main_3_1_1_1_1_3",
            "welocme",
            "main_3_1_1_1_1",
            "main_1_0",
            "main_3_error",
            "main_3_1",
            "main_1",
            "main_3_1_1_0",
            "main_3",
            "fines_pdf_file",
            "welcomeMessage",
            "main_0_0_pdf",
            "main_0_0",
            "main_2_2",
            "main_3_1_1_1_0_0",
            "main_2",
            "main_2_1",
            "querying_for_fines",
            "sendwindowopener_template",
            "fines_info",
            "main_3_1_1_1_1_2",
            "main_1_3",
            "main_pdf_placeholder",
            "main_1_2",
            "main_1_1",
            "main_3_1_1_1_1_1",
            "errorMessage",
            "main_1_2_1",
            "main_3_1_1",
            "main_3_1_3",
            "main_3_1_2",
            "faq_other_queries",
            "main_3_1_1_1_0",
            "main_3_1_1_1",
            "faq_representations_contacts",
            "faq_my_vehicle_not_driver_contacts",
            "registration_image_file"
        ],
        "userID": "userID",
        "userIDType": "msg",
        "traceID": "traceID",
        "traceIDType": "msg",
        "useTimer": false,
        "timer": "",
        "outputs": 3,
        "jsonToCreate": "{\"text\":\"{{text}}\",\"data\":{\"interactive\":{\"type\":\"button\",\"buttons\":[{\"title\":\"{{button1}}\"},{\"title\":\"{{button2}}\"}]}},\"en\":{\"button1\":\"How do I pay my fine\",\"button2\":\"Transfer to an Agent\",\"text\":\"Please select the option that relates to your query.\"}}",
        "jsonToCreateType": "json",
        "templateDescriptionButtonsContainerToCreate": [],
        "templateDesciptionDetailsToCreate": "main",
        "templateDesciptionTextToCreate": "",
        "templateIdToCreate": "select_the_option",
        "templateGroupToCreate": "main",
        "currentTemplateDescription": {
            "details": "main"
        },
        "currentTemplateGroup": "main",
        "currentTemplateTimer": "",
        "currentTemplateType": "standard",
        "jsonToEdit": "{\"text\":\"{{text}}\",\"data\":{\"interactive\":{\"type\":\"list\",\"buttonText\":\"FAQs options\",\"header\":\"FAQ\",\"sections\":[{\"title\":\"Select from the list\",\"rows\":\"{{faqs}}\"}]}},\"en\":{\"text\":\"*Let's see if I can help!* \\n\\nHere's a list of *FAQs* that might help you with your query 👍\\n\\nSelect the option you need more information on. ⬇️\"}}",
        "jsonToEditType": "json",
        "templateIdToEdit": "select_the_option",
        "templateDescriptionButtonsContainerToEdit": [],
        "templateDesciptionDetailsToEdit": "main",
        "templateDesciptionTextToEdit": "",
        "x": 1030,
        "y": 180,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "b7be88335720244e",
        "type": "send-message",
        "z": "c65734bb7dc811a1",
        "isTimerUsed": false,
        "language": "lang",
        "languageType": "msg",
        "messageOption": "",
        "messageID": "",
        "messageIDType": "str",
        "name": "select_the_option",
        "props": {
            "": [],
            "welcomeMessage": [],
            "main_1_1": [],
            "main_1": [],
            "main_2": [],
            "select_the_option": [
                {
                    "property": "faqs",
                    "value": "faqs",
                    "valueType": "msg"
                }
            ]
        },
        "templateId": "select_the_option",
        "templateIdToDelete": "",
        "templatesJsons": {
            "welcomeMessage": {
                "text": "{{text}}",
                "en": {
                    "text": "*New Traffic Fine Notification from Ekurhuleni\nMetro Police Department*\nPlease take note that a new traffic fine (REF:\nC1/93563/808/187933) has been issued against ID\nending 51.\nFor more information or options to pay the fine\nplease reply to this message and our friendly\nChatbot, Traffic Officer Buddy will gladly assist you.\nAlternatively log onto payCity.co.za for more\ninformation and options to pay.\n1. Pay Fine\n2. More Options\n3. View/Query all my fines from Ekurhuleni"
                }
            },
            "main_1_1": {
                "text": "{{text}}",
                "en": {
                    "text": "Please follow the link below.\nhttps://paynow.paycity.co.za\n1. Back to Payment Options\n2. Main Menu\nYou can also pay at any of the\nfollowing locations: Spar, Shoprite &\nCheckers & Pnp."
                }
            },
            "main_1": {
                "text": "{{text}}",
                "en": {
                    "text": "Please follow the link below.\nhttps://paynow.paycity.co.za\n1. Back to Payment Options\n2. Main Menu\nYou can also pay at any of the\nfollowing locations: Spar, Shoprite &\nCheckers & Pnp."
                }
            },
            "main_2": {
                "text": "{{text}}",
                "data": {
                    "interactive": {
                        "type": "button",
                        "buttons": [
                            {
                                "title": "{{button1}}"
                            },
                            {
                                "title": "{{button2}}"
                            }
                        ]
                    }
                },
                "en": {
                    "button1": "1",
                    "button2": "2",
                    "text": "Please select the option that relates to your query.\n\n1. How do I pay my fine?\n2. Transfer me to an Agent."
                }
            },
            "select_the_option": {
                "text": "{{text}}",
                "data": {
                    "interactive": {
                        "type": "list",
                        "buttonText": "FAQs options",
                        "header": "FAQ",
                        "sections": [
                            {
                                "title": "Select from the list",
                                "rows": "{{faqs}}"
                            }
                        ]
                    }
                },
                "en": {
                    "text": "*Let's see if I can help!* \n\nHere's a list of *FAQs* that might help you with your query 👍\n\nSelect the option you need more information on. ⬇️"
                }
            }
        },
        "templatesList": [
            "fine_not_found",
            "faq_representations",
            "faq_my_vehicle_not_driver",
            "pay_your_fine",
            "main_nextfines",
            "main_image_file",
            "main_finedetail_1",
            "main_payment_info_allowedreason",
            "get_started",
            "goodbye",
            "main_image_placeholder",
            "enter_digit_number",
            "connect_agent",
            "select_the_option",
            "enter_digit_number_error",
            "fines_not_found",
            "main_3_1_1_1_1_3",
            "welocme",
            "main_3_1_1_1_1",
            "main_1_0",
            "main_3_error",
            "main_3_1",
            "main_1",
            "main_3_1_1_0",
            "main_3",
            "fines_pdf_file",
            "welcomeMessage",
            "main_0_0_pdf",
            "main_0_0",
            "main_2_2",
            "main_3_1_1_1_0_0",
            "main_2",
            "main_2_1",
            "querying_for_fines",
            "sendwindowopener_template",
            "fines_info",
            "main_3_1_1_1_1_2",
            "main_1_3",
            "main_pdf_placeholder",
            "main_1_2",
            "main_1_1",
            "main_3_1_1_1_1_1",
            "errorMessage",
            "main_1_2_1",
            "main_3_1_1",
            "main_3_1_3",
            "main_3_1_2",
            "faq_other_queries",
            "main_3_1_1_1_0",
            "main_3_1_1_1",
            "faq_representations_contacts",
            "faq_my_vehicle_not_driver_contacts",
            "registration_image_file"
        ],
        "userID": "userID",
        "userIDType": "msg",
        "traceID": "traceID",
        "traceIDType": "msg",
        "useTimer": false,
        "timer": "",
        "outputs": 3,
        "jsonToCreate": "{\"text\":\"{{text}}\",\"data\":{\"interactive\":{\"type\":\"button\",\"buttons\":[{\"title\":\"{{button1}}\"},{\"title\":\"{{button2}}\"}]}},\"en\":{\"button1\":\"How do I pay my fine\",\"button2\":\"Transfer to an Agent\",\"text\":\"Please select the option that relates to your query.\"}}",
        "jsonToCreateType": "json",
        "templateDescriptionButtonsContainerToCreate": [],
        "templateDesciptionDetailsToCreate": "main",
        "templateDesciptionTextToCreate": "",
        "templateIdToCreate": "select_the_option",
        "templateGroupToCreate": "main",
        "currentTemplateDescription": {
            "details": "main"
        },
        "currentTemplateGroup": "main",
        "currentTemplateTimer": "",
        "currentTemplateType": "standard",
        "jsonToEdit": "{\"text\":\"{{text}}\",\"data\":{\"interactive\":{\"type\":\"list\",\"buttonText\":\"FAQs options\",\"header\":\"FAQ\",\"sections\":[{\"title\":\"Select from the list\",\"rows\":\"{{faqs}}\"}]}},\"en\":{\"text\":\"*Let's see if I can help!* \\n\\nHere's a list of *FAQs* that might help you with your query 👍\\n\\nSelect the option you need more information on. ⬇️\"}}",
        "jsonToEditType": "json",
        "templateIdToEdit": "select_the_option",
        "templateDescriptionButtonsContainerToEdit": [],
        "templateDesciptionDetailsToEdit": "main",
        "templateDesciptionTextToEdit": "",
        "x": 1010,
        "y": 660,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "68516ee79e3c18c3",
        "type": "send-message",
        "z": "c65734bb7dc811a1",
        "isTimerUsed": false,
        "language": "lang",
        "languageType": "msg",
        "messageOption": "",
        "messageID": "",
        "messageIDType": "str",
        "name": "enter_digit_number",
        "props": {
            "": [],
            "welcomeMessage": [],
            "main_1_1": [],
            "main_1_2": [],
            "main_1_3": [],
            "main_3_1": [],
            "enter_digit_number": []
        },
        "templateId": "enter_digit_number",
        "templateIdToDelete": "",
        "templatesJsons": {
            "welcomeMessage": {
                "text": "{{text}}",
                "en": {
                    "text": "*New Traffic Fine Notification from Ekurhuleni\nMetro Police Department*\nPlease take note that a new traffic fine (REF:\nC1/93563/808/187933) has been issued against ID\nending 51.\nFor more information or options to pay the fine\nplease reply to this message and our friendly\nChatbot, Traffic Officer Buddy will gladly assist you.\nAlternatively log onto payCity.co.za for more\ninformation and options to pay.\n1. Pay Fine\n2. More Options\n3. View/Query all my fines from Ekurhuleni"
                }
            },
            "main_1_1": {
                "text": "{{text}}",
                "en": {
                    "text": "Please follow the link below.\nhttps://paynow.paycity.co.za\n1. Back to Payment Options\n2. Main Menu\nYou can also pay at any of the\nfollowing locations: Spar, Shoprite &\nCheckers & Pnp."
                }
            },
            "main_1_2": {
                "text": "{{text}}",
                "en": {
                    "text": "Respond to this message with your query.\nAlternatively, please submit an email to\nqueries@paycity.co.za."
                }
            },
            "main_1_3": {
                "text": "{{text}}",
                "en": {
                    "text": "Please hold while we connect you to an agent in live chat"
                }
            },
            "main_3_1": {
                "text": "{{text}}",
                "en": {
                    "text": "Please Enter your 13 Digit ID number"
                }
            },
            "enter_digit_number": {
                "text": "{{text}}",
                "en": {
                    "text": "Type in your 13 digit ID Number below ⬇️"
                }
            }
        },
        "templatesList": [
            "fine_not_found",
            "faq_representations",
            "faq_my_vehicle_not_driver",
            "pay_your_fine",
            "querying_fine_details_waiting",
            "paynow_express_payment",
            "main_nextfines",
            "main_image_file",
            "main_finedetail_1",
            "main_payment_info_allowedreason",
            "get_started",
            "goodbye",
            "main_image_placeholder",
            "enter_digit_number",
            "connect_agent",
            "select_the_option",
            "enter_digit_number_error",
            "fines_not_found",
            "main_3_1_1_1_1_3",
            "welocme",
            "main_3_1_1_1_1",
            "main_1_0",
            "main_3_error",
            "main_3_1",
            "main_1",
            "main_3_1_1_0",
            "main_3",
            "fines_pdf_file",
            "welcomeMessage",
            "main_0_0_pdf",
            "main_0_0",
            "main_2_2",
            "main_3_1_1_1_0_0",
            "main_2",
            "main_2_1",
            "querying_for_fines",
            "sendwindowopener_template",
            "fines_info",
            "main_3_1_1_1_1_2",
            "main_1_3",
            "main_pdf_placeholder",
            "main_1_2",
            "main_1_1",
            "main_3_1_1_1_1_1",
            "main_1_2_1",
            "main_3_1_1",
            "main_3_1_3",
            "main_3_1_2",
            "faq_other_queries",
            "main_3_1_1_1_0",
            "main_3_1_1_1",
            "errorMessage",
            "faq_representations_contacts",
            "faq_my_vehicle_not_driver_contacts",
            "registration_image_file"
        ],
        "userID": "userID",
        "userIDType": "msg",
        "traceID": "traceID",
        "traceIDType": "msg",
        "useTimer": false,
        "timer": "",
        "outputs": 3,
        "jsonToCreate": "{\"text\":\"{{text}}\",\"en\":{\"text\":\"Please Enter your 13 Digit ID number\"}}",
        "jsonToCreateType": "json",
        "templateDescriptionButtonsContainerToCreate": [],
        "templateDesciptionDetailsToCreate": "main",
        "templateDesciptionTextToCreate": "",
        "templateIdToCreate": "enter_digit_number",
        "templateGroupToCreate": "main",
        "currentTemplateDescription": {
            "details": "main"
        },
        "currentTemplateGroup": "main",
        "currentTemplateTimer": "",
        "currentTemplateType": "standard",
        "jsonToEdit": "{\"text\":\"{{text}}\",\"en\":{\"text\":\"Type in your 13 digit ID Number below ⬇️\"}}",
        "jsonToEditType": "json",
        "templateIdToEdit": "enter_digit_number",
        "templateDescriptionButtonsContainerToEdit": [],
        "templateDesciptionDetailsToEdit": "main",
        "templateDesciptionTextToEdit": "",
        "x": 1010,
        "y": 600,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "af3639d1fae79041",
        "type": "send-message",
        "z": "c65734bb7dc811a1",
        "isTimerUsed": false,
        "language": "lang",
        "languageType": "msg",
        "messageOption": "",
        "messageID": "",
        "messageIDType": "str",
        "name": "pay_your_fine",
        "props": {
            "": [],
            "welcomeMessage": [],
            "main_1_1": [],
            "main_1": [],
            "pay_your_fine": []
        },
        "templateId": "pay_your_fine",
        "templateIdToDelete": "",
        "templatesJsons": {
            "welcomeMessage": {
                "text": "{{text}}",
                "en": {
                    "text": "*New Traffic Fine Notification from Ekurhuleni\nMetro Police Department*\nPlease take note that a new traffic fine (REF:\nC1/93563/808/187933) has been issued against ID\nending 51.\nFor more information or options to pay the fine\nplease reply to this message and our friendly\nChatbot, Traffic Officer Buddy will gladly assist you.\nAlternatively log onto payCity.co.za for more\ninformation and options to pay.\n1. Pay Fine\n2. More Options\n3. View/Query all my fines from Ekurhuleni"
                }
            },
            "main_1_1": {
                "text": "{{text}}",
                "en": {
                    "text": "Please follow the link below.\nhttps://paynow.paycity.co.za\n1. Back to Payment Options\n2. Main Menu\nYou can also pay at any of the\nfollowing locations: Spar, Shoprite &\nCheckers & Pnp."
                }
            },
            "main_1": {
                "text": "{{text}}",
                "data": {
                    "interactive": {
                        "type": "button",
                        "buttons": [
                            {
                                "title": "{{button1}}"
                            },
                            {
                                "title": "{{button2}}"
                            },
                            {
                                "title": "{{button3}}"
                            }
                        ]
                    }
                },
                "en": {
                    "button1": "Back",
                    "button2": "Main Menu",
                    "button3": "Chat to Agent",
                    "text": "Please pay your fine using the link below:\n\nhttps://payCity.co.za\n\nYou can also pay at any of the\nfollowing locations: Spar, Shoprite &\nCheckers & Pnp."
                }
            },
            "pay_your_fine": {
                "text": "{{text}}",
                "data": {
                    "interactive": {
                        "type": "button",
                        "buttons": [
                            {
                                "title": "{{button1}}"
                            },
                            {
                                "title": "{{button2}}"
                            },
                            {
                                "title": "{{button3}}"
                            }
                        ]
                    }
                },
                "en": {
                    "button1": "Back to FAQ",
                    "button2": "Main Menu",
                    "button3": "Chat to Agent",
                    "text": "You can pay your fine with any of the following options:\n\n1. Paycity website (www.paycity.co.za) - EFT, credit card, or cheque card\n2. Online banking - FNB and Absa\n3. Directly at the Issuing Authority, (Metro Police Department)\n"
                }
            }
        },
        "templatesList": [
            "fine_not_found",
            "faq_my_vehicle_not_driver",
            "querying_fine_details_waiting",
            "pay_your_fine",
            "paynow_express_payment",
            "main_nextfines",
            "main_image_file",
            "main_payment_info_allowedreason",
            "faq_dispute",
            "main_finedetail_1",
            "main_image_placeholder",
            "goodbye",
            "enter_digit_number",
            "connect_agent",
            "get_started",
            "select_the_option",
            "enter_digit_number_error",
            "main_3_1_1_1_1_3",
            "welocme",
            "main_3_1_1_1_1",
            "main_1_0",
            "main_3_error",
            "main_3_1",
            "main_1",
            "main_3_1_1_0",
            "main_3",
            "fines_pdf_file",
            "welcomeMessage",
            "main_0_0_pdf",
            "main_0_0",
            "main_2_2",
            "main_3_1_1_1_0_0",
            "main_2",
            "main_2_1",
            "querying_for_fines",
            "sendwindowopener_template",
            "fines_info",
            "main_3_1_1_1_1_2",
            "main_1_3",
            "main_pdf_placeholder",
            "main_1_2",
            "main_1_1",
            "main_3_1_1_1_1_1",
            "faq_other_queries",
            "main_1_2_1",
            "main_3_1_1",
            "main_3_1_3",
            "main_3_1_2",
            "main_3_1_1_1_0",
            "main_3_1_1_1",
            "fines_not_found",
            "faq_representations",
            "errorMessage",
            "faq_representations_contacts",
            "faq_my_vehicle_not_driver_contacts",
            "registration_image_file"
        ],
        "userID": "userID",
        "userIDType": "msg",
        "traceID": "traceID",
        "traceIDType": "msg",
        "useTimer": false,
        "timer": "",
        "outputs": 3,
        "jsonToCreate": "{\"text\":\"{{text}}\",\"data\":{\"interactive\":{\"type\":\"button\",\"buttons\":[{\"title\":\"{{button1}}\"},{\"title\":\"{{button2}}\"},{\"title\":\"{{button3}}\"}]}},\"en\":{\"button1\":\"Back\",\"button2\":\"Main Menu\",\"button3\":\"Chat to Agent\",\"text\":\"Please pay your fine using the link below:\\n\\nhttps://payCity.co.za\\n\\nYou can also pay at any of the\\nfollowing locations: Spar, Shoprite &\\nCheckers & Pnp.\"}}",
        "jsonToCreateType": "json",
        "templateDescriptionButtonsContainerToCreate": [],
        "templateDesciptionDetailsToCreate": "main",
        "templateDesciptionTextToCreate": "",
        "templateIdToCreate": "pay_your_fine",
        "templateGroupToCreate": "main",
        "currentTemplateDescription": {
            "details": "main"
        },
        "currentTemplateGroup": "main",
        "currentTemplateTimer": "",
        "currentTemplateType": "standard",
        "jsonToEdit": "{\"text\":\"{{text}}\",\"data\":{\"interactive\":{\"type\":\"button\",\"buttons\":[{\"title\":\"{{button1}}\"},{\"title\":\"{{button2}}\"},{\"title\":\"{{button3}}\"}]}},\"en\":{\"button1\":\"Back to FAQ\",\"button2\":\"Main Menu\",\"button3\":\"Chat to Agent\",\"text\":\"You can pay your fine with any of the following options:\\n\\n1. Paycity website (www.paycity.co.za) - EFT, credit card, or cheque card\\n2. Online banking - FNB and Absa\\n3. Directly at the Issuing Authority, (Metro Police Department)\\n\"}}",
        "jsonToEditType": "json",
        "templateIdToEdit": "pay_your_fine",
        "templateDescriptionButtonsContainerToEdit": [],
        "templateDesciptionDetailsToEdit": "main",
        "templateDesciptionTextToEdit": "",
        "x": 1400,
        "y": 1100,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "6c18d7405fc8ccfd",
        "type": "send-message",
        "z": "c65734bb7dc811a1",
        "isTimerUsed": false,
        "language": "lang",
        "languageType": "msg",
        "messageOption": "",
        "messageID": "",
        "messageIDType": "str",
        "name": "select_the_option",
        "props": {
            "": [],
            "welcomeMessage": [],
            "main_1_1": [],
            "main_1": [],
            "main_2": [],
            "select_the_option": [
                {
                    "property": "faqs",
                    "value": "faqs",
                    "valueType": "msg"
                }
            ]
        },
        "templateId": "select_the_option",
        "templateIdToDelete": "",
        "templatesJsons": {
            "welcomeMessage": {
                "text": "{{text}}",
                "en": {
                    "text": "*New Traffic Fine Notification from Ekurhuleni\nMetro Police Department*\nPlease take note that a new traffic fine (REF:\nC1/93563/808/187933) has been issued against ID\nending 51.\nFor more information or options to pay the fine\nplease reply to this message and our friendly\nChatbot, Traffic Officer Buddy will gladly assist you.\nAlternatively log onto payCity.co.za for more\ninformation and options to pay.\n1. Pay Fine\n2. More Options\n3. View/Query all my fines from Ekurhuleni"
                }
            },
            "main_1_1": {
                "text": "{{text}}",
                "en": {
                    "text": "Please follow the link below.\nhttps://paynow.paycity.co.za\n1. Back to Payment Options\n2. Main Menu\nYou can also pay at any of the\nfollowing locations: Spar, Shoprite &\nCheckers & Pnp."
                }
            },
            "main_1": {
                "text": "{{text}}",
                "en": {
                    "text": "Please follow the link below.\nhttps://paynow.paycity.co.za\n1. Back to Payment Options\n2. Main Menu\nYou can also pay at any of the\nfollowing locations: Spar, Shoprite &\nCheckers & Pnp."
                }
            },
            "main_2": {
                "text": "{{text}}",
                "data": {
                    "interactive": {
                        "type": "button",
                        "buttons": [
                            {
                                "title": "{{button1}}"
                            },
                            {
                                "title": "{{button2}}"
                            }
                        ]
                    }
                },
                "en": {
                    "button1": "1",
                    "button2": "2",
                    "text": "Please select the option that relates to your query.\n\n1. How do I pay my fine?\n2. Transfer me to an Agent."
                }
            },
            "select_the_option": {
                "text": "{{text}}",
                "data": {
                    "interactive": {
                        "type": "list",
                        "buttonText": "FAQs options",
                        "header": "FAQ",
                        "sections": [
                            {
                                "title": "Select from the list",
                                "rows": "{{faqs}}"
                            }
                        ]
                    }
                },
                "en": {
                    "text": "*Let's see if I can help!* \n\nHere's a list of *FAQs* that might help you with your query 👍\n\nSelect the option you need more information on. ⬇️"
                }
            }
        },
        "templatesList": [
            "fine_not_found",
            "faq_representations",
            "faq_my_vehicle_not_driver",
            "pay_your_fine",
            "main_nextfines",
            "main_image_file",
            "main_finedetail_1",
            "main_payment_info_allowedreason",
            "get_started",
            "goodbye",
            "main_image_placeholder",
            "enter_digit_number",
            "connect_agent",
            "select_the_option",
            "enter_digit_number_error",
            "fines_not_found",
            "main_3_1_1_1_1_3",
            "welocme",
            "main_3_1_1_1_1",
            "main_1_0",
            "main_3_error",
            "main_3_1",
            "main_1",
            "main_3_1_1_0",
            "main_3",
            "fines_pdf_file",
            "welcomeMessage",
            "main_0_0_pdf",
            "main_0_0",
            "main_2_2",
            "main_3_1_1_1_0_0",
            "main_2",
            "main_2_1",
            "querying_for_fines",
            "sendwindowopener_template",
            "fines_info",
            "main_3_1_1_1_1_2",
            "main_1_3",
            "main_pdf_placeholder",
            "main_1_2",
            "main_1_1",
            "main_3_1_1_1_1_1",
            "errorMessage",
            "main_1_2_1",
            "main_3_1_1",
            "main_3_1_3",
            "main_3_1_2",
            "faq_other_queries",
            "main_3_1_1_1_0",
            "main_3_1_1_1",
            "faq_representations_contacts",
            "faq_my_vehicle_not_driver_contacts",
            "registration_image_file"
        ],
        "userID": "userID",
        "userIDType": "msg",
        "traceID": "traceID",
        "traceIDType": "msg",
        "useTimer": false,
        "timer": "",
        "outputs": 3,
        "jsonToCreate": "{\"text\":\"{{text}}\",\"data\":{\"interactive\":{\"type\":\"button\",\"buttons\":[{\"title\":\"{{button1}}\"},{\"title\":\"{{button2}}\"}]}},\"en\":{\"button1\":\"How do I pay my fine\",\"button2\":\"Transfer to an Agent\",\"text\":\"Please select the option that relates to your query.\"}}",
        "jsonToCreateType": "json",
        "templateDescriptionButtonsContainerToCreate": [],
        "templateDesciptionDetailsToCreate": "main",
        "templateDesciptionTextToCreate": "",
        "templateIdToCreate": "select_the_option",
        "templateGroupToCreate": "main",
        "currentTemplateDescription": {
            "details": "main"
        },
        "currentTemplateGroup": "main",
        "currentTemplateTimer": "",
        "currentTemplateType": "standard",
        "jsonToEdit": "{\"text\":\"{{text}}\",\"data\":{\"interactive\":{\"type\":\"list\",\"buttonText\":\"FAQs options\",\"header\":\"FAQ\",\"sections\":[{\"title\":\"Select from the list\",\"rows\":\"{{faqs}}\"}]}},\"en\":{\"text\":\"*Let's see if I can help!* \\n\\nHere's a list of *FAQs* that might help you with your query 👍\\n\\nSelect the option you need more information on. ⬇️\"}}",
        "jsonToEditType": "json",
        "templateIdToEdit": "select_the_option",
        "templateDescriptionButtonsContainerToEdit": [],
        "templateDesciptionDetailsToEdit": "main",
        "templateDesciptionTextToEdit": "",
        "x": 1410,
        "y": 1160,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "f4556d71a2eaf1a8",
        "type": "send-message",
        "z": "c65734bb7dc811a1",
        "isTimerUsed": false,
        "language": "lang",
        "languageType": "msg",
        "messageOption": "",
        "messageID": "",
        "messageIDType": "str",
        "name": "pay_your_fine",
        "props": {
            "": [],
            "welcomeMessage": [],
            "main_1_1": [],
            "main_1": [],
            "pay_your_fine": []
        },
        "templateId": "pay_your_fine",
        "templateIdToDelete": "",
        "templatesJsons": {
            "welcomeMessage": {
                "text": "{{text}}",
                "en": {
                    "text": "*New Traffic Fine Notification from Ekurhuleni\nMetro Police Department*\nPlease take note that a new traffic fine (REF:\nC1/93563/808/187933) has been issued against ID\nending 51.\nFor more information or options to pay the fine\nplease reply to this message and our friendly\nChatbot, Traffic Officer Buddy will gladly assist you.\nAlternatively log onto payCity.co.za for more\ninformation and options to pay.\n1. Pay Fine\n2. More Options\n3. View/Query all my fines from Ekurhuleni"
                }
            },
            "main_1_1": {
                "text": "{{text}}",
                "en": {
                    "text": "Please follow the link below.\nhttps://paynow.paycity.co.za\n1. Back to Payment Options\n2. Main Menu\nYou can also pay at any of the\nfollowing locations: Spar, Shoprite &\nCheckers & Pnp."
                }
            },
            "main_1": {
                "text": "{{text}}",
                "data": {
                    "interactive": {
                        "type": "button",
                        "buttons": [
                            {
                                "title": "{{button1}}"
                            },
                            {
                                "title": "{{button2}}"
                            },
                            {
                                "title": "{{button3}}"
                            }
                        ]
                    }
                },
                "en": {
                    "button1": "Back",
                    "button2": "Main Menu",
                    "button3": "Chat to Agent",
                    "text": "Please pay your fine using the link below:\n\nhttps://payCity.co.za\n\nYou can also pay at any of the\nfollowing locations: Spar, Shoprite &\nCheckers & Pnp."
                }
            },
            "pay_your_fine": {
                "text": "{{text}}",
                "data": {
                    "interactive": {
                        "type": "button",
                        "buttons": [
                            {
                                "title": "{{button1}}"
                            },
                            {
                                "title": "{{button2}}"
                            },
                            {
                                "title": "{{button3}}"
                            }
                        ]
                    }
                },
                "en": {
                    "button1": "Back to FAQ",
                    "button2": "Main Menu",
                    "button3": "Chat to Agent",
                    "text": "You can pay your fine with any of the following options:\n\n1. Paycity website (www.paycity.co.za) - EFT, credit card, or cheque card\n2. Online banking - FNB and Absa\n3. Directly at the Issuing Authority, (Metro Police Department)\n"
                }
            }
        },
        "templatesList": [
            "fine_not_found",
            "faq_my_vehicle_not_driver",
            "pay_your_fine",
            "querying_fine_details_waiting",
            "paynow_express_payment",
            "main_nextfines",
            "main_image_file",
            "main_payment_info_allowedreason",
            "faq_dispute",
            "main_finedetail_1",
            "main_image_placeholder",
            "goodbye",
            "enter_digit_number",
            "connect_agent",
            "get_started",
            "select_the_option",
            "enter_digit_number_error",
            "main_3_1_1_1_1_3",
            "welocme",
            "main_3_1_1_1_1",
            "main_1_0",
            "main_3_error",
            "main_3_1",
            "main_1",
            "main_3_1_1_0",
            "main_3",
            "fines_pdf_file",
            "welcomeMessage",
            "main_0_0_pdf",
            "main_0_0",
            "main_2_2",
            "main_3_1_1_1_0_0",
            "main_2",
            "main_2_1",
            "querying_for_fines",
            "sendwindowopener_template",
            "fines_info",
            "main_3_1_1_1_1_2",
            "main_1_3",
            "main_pdf_placeholder",
            "main_1_2",
            "main_1_1",
            "main_3_1_1_1_1_1",
            "faq_other_queries",
            "main_1_2_1",
            "main_3_1_1",
            "main_3_1_3",
            "main_3_1_2",
            "main_3_1_1_1_0",
            "main_3_1_1_1",
            "fines_not_found",
            "faq_representations",
            "errorMessage",
            "faq_representations_contacts",
            "faq_my_vehicle_not_driver_contacts",
            "registration_image_file"
        ],
        "userID": "userID",
        "userIDType": "msg",
        "traceID": "traceID",
        "traceIDType": "msg",
        "useTimer": false,
        "timer": "",
        "outputs": 3,
        "jsonToCreate": "{\"text\":\"{{text}}\",\"data\":{\"interactive\":{\"type\":\"button\",\"buttons\":[{\"title\":\"{{button1}}\"},{\"title\":\"{{button2}}\"},{\"title\":\"{{button3}}\"}]}},\"en\":{\"button1\":\"Back\",\"button2\":\"Main Menu\",\"button3\":\"Chat to Agent\",\"text\":\"Please pay your fine using the link below:\\n\\nhttps://payCity.co.za\\n\\nYou can also pay at any of the\\nfollowing locations: Spar, Shoprite &\\nCheckers & Pnp.\"}}",
        "jsonToCreateType": "json",
        "templateDescriptionButtonsContainerToCreate": [],
        "templateDesciptionDetailsToCreate": "main",
        "templateDesciptionTextToCreate": "",
        "templateIdToCreate": "pay_your_fine",
        "templateGroupToCreate": "main",
        "currentTemplateDescription": {
            "details": "main"
        },
        "currentTemplateGroup": "main",
        "currentTemplateTimer": "",
        "currentTemplateType": "standard",
        "jsonToEdit": "{\"text\":\"{{text}}\",\"data\":{\"interactive\":{\"type\":\"button\",\"buttons\":[{\"title\":\"{{button1}}\"},{\"title\":\"{{button2}}\"},{\"title\":\"{{button3}}\"}]}},\"en\":{\"button1\":\"Back to FAQ\",\"button2\":\"Main Menu\",\"button3\":\"Chat to Agent\",\"text\":\"You can pay your fine with any of the following options:\\n\\n1. Paycity website (www.paycity.co.za) - EFT, credit card, or cheque card\\n2. Online banking - FNB and Absa\\n3. Directly at the Issuing Authority, (Metro Police Department)\\n\"}}",
        "jsonToEditType": "json",
        "templateIdToEdit": "pay_your_fine",
        "templateDescriptionButtonsContainerToEdit": [],
        "templateDesciptionDetailsToEdit": "main",
        "templateDesciptionTextToEdit": "",
        "x": 1020,
        "y": 360,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "cf76f46968fca631",
        "type": "link out",
        "z": "c65734bb7dc811a1",
        "name": "FAQ out",
        "mode": "link",
        "links": [
            "ee325a90e5366c57"
        ],
        "x": 1005,
        "y": 1060,
        "wires": []
    },
    {
        "id": "937e71a11a1da2fb",
        "type": "link out",
        "z": "c65734bb7dc811a1",
        "name": "FAQ out",
        "mode": "link",
        "links": [
            "ee325a90e5366c57"
        ],
        "x": 985,
        "y": 480,
        "wires": []
    },
    {
        "id": "330467a9192df44b",
        "type": "switch",
        "z": "c65734bb7dc811a1",
        "name": "state",
        "property": "state",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "fines_info",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "fines_pdf_file",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "main_image_file",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "main_payment_info_allowedreason",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 5,
        "x": 390,
        "y": 60,
        "wires": [
            [
                "fabb3d878fe1e282"
            ],
            [
                "fabb3d878fe1e282"
            ],
            [
                "fabb3d878fe1e282"
            ],
            [
                "fabb3d878fe1e282"
            ],
            [
                "59c0cb2ebc83804a"
            ]
        ]
    },
    {
        "id": "fabb3d878fe1e282",
        "type": "link out",
        "z": "c65734bb7dc811a1",
        "name": "noticeNumber out",
        "mode": "link",
        "links": [
            "cd4ecd6273a07a87"
        ],
        "x": 535,
        "y": 40,
        "wires": []
    },
    {
        "id": "e0a990b922ee86ea",
        "type": "link out",
        "z": "c65734bb7dc811a1",
        "name": "erroe out",
        "mode": "link",
        "links": [
            "a0a45e24a84f7526"
        ],
        "x": 865,
        "y": 320,
        "wires": []
    },
    {
        "id": "9e5aeba86c948b7c",
        "type": "link out",
        "z": "c65734bb7dc811a1",
        "name": "erroe out",
        "mode": "link",
        "links": [
            "a0a45e24a84f7526"
        ],
        "x": 1365,
        "y": 1280,
        "wires": []
    },
    {
        "id": "41f94ba03122eee2",
        "type": "link out",
        "z": "c65734bb7dc811a1",
        "name": "erroe out",
        "mode": "link",
        "links": [
            "a0a45e24a84f7526"
        ],
        "x": 935,
        "y": 760,
        "wires": []
    },
    {
        "id": "fbf4c74c3851098d",
        "type": "link out",
        "z": "c65734bb7dc811a1",
        "name": "erroe out",
        "mode": "link",
        "links": [
            "a0a45e24a84f7526"
        ],
        "x": 985,
        "y": 520,
        "wires": []
    },
    {
        "id": "4fafc4eab5469761",
        "type": "link out",
        "z": "c65734bb7dc811a1",
        "name": "erroe out",
        "mode": "link",
        "links": [
            "a0a45e24a84f7526"
        ],
        "x": 1515,
        "y": 1840,
        "wires": []
    },
    {
        "id": "f399fa2267e76ce4",
        "type": "send-message",
        "z": "c65734bb7dc811a1",
        "isTimerUsed": false,
        "language": "lang",
        "languageType": "msg",
        "messageOption": "",
        "messageID": "",
        "messageIDType": "str",
        "name": "enter_digit_number",
        "props": {
            "": [],
            "welcomeMessage": [],
            "main_1_1": [],
            "main_1_2": [],
            "main_1_3": [],
            "main_3_1": [],
            "enter_digit_number": []
        },
        "templateId": "enter_digit_number",
        "templateIdToDelete": "",
        "templatesJsons": {
            "welcomeMessage": {
                "text": "{{text}}",
                "en": {
                    "text": "*New Traffic Fine Notification from Ekurhuleni\nMetro Police Department*\nPlease take note that a new traffic fine (REF:\nC1/93563/808/187933) has been issued against ID\nending 51.\nFor more information or options to pay the fine\nplease reply to this message and our friendly\nChatbot, Traffic Officer Buddy will gladly assist you.\nAlternatively log onto payCity.co.za for more\ninformation and options to pay.\n1. Pay Fine\n2. More Options\n3. View/Query all my fines from Ekurhuleni"
                }
            },
            "main_1_1": {
                "text": "{{text}}",
                "en": {
                    "text": "Please follow the link below.\nhttps://paynow.paycity.co.za\n1. Back to Payment Options\n2. Main Menu\nYou can also pay at any of the\nfollowing locations: Spar, Shoprite &\nCheckers & Pnp."
                }
            },
            "main_1_2": {
                "text": "{{text}}",
                "en": {
                    "text": "Respond to this message with your query.\nAlternatively, please submit an email to\nqueries@paycity.co.za."
                }
            },
            "main_1_3": {
                "text": "{{text}}",
                "en": {
                    "text": "Please hold while we connect you to an agent in live chat"
                }
            },
            "main_3_1": {
                "text": "{{text}}",
                "en": {
                    "text": "Please Enter your 13 Digit ID number"
                }
            },
            "enter_digit_number": {
                "text": "{{text}}",
                "en": {
                    "text": "Type in your 13 digit ID Number below ⬇️"
                }
            }
        },
        "templatesList": [
            "fine_not_found",
            "faq_my_vehicle_not_driver",
            "querying_fine_details_waiting",
            "paynow_express_payment",
            "pay_your_fine",
            "main_nextfines",
            "main_image_file",
            "main_payment_info_allowedreason",
            "faq_dispute",
            "main_finedetail_1",
            "get_started",
            "connect_agent",
            "main_image_placeholder",
            "goodbye",
            "enter_digit_number",
            "select_the_option",
            "enter_digit_number_error",
            "main_3_1_1_1_1_3",
            "welocme",
            "main_3_1_1_1_1",
            "main_1_0",
            "main_3_error",
            "main_3_1",
            "main_1",
            "main_3_1_1_0",
            "main_3",
            "fines_pdf_file",
            "welcomeMessage",
            "main_0_0_pdf",
            "main_0_0",
            "main_2_2",
            "main_3_1_1_1_0_0",
            "main_2",
            "main_2_1",
            "querying_for_fines",
            "sendwindowopener_template",
            "fines_info",
            "main_3_1_1_1_1_2",
            "main_1_3",
            "main_pdf_placeholder",
            "main_1_2",
            "main_1_1",
            "main_3_1_1_1_1_1",
            "faq_other_queries",
            "main_1_2_1",
            "main_3_1_1",
            "main_3_1_3",
            "main_3_1_2",
            "main_3_1_1_1_0",
            "main_3_1_1_1",
            "fines_not_found",
            "faq_representations",
            "errorMessage",
            "faq_representations_contacts",
            "faq_my_vehicle_not_driver_contacts",
            "registration_image_file"
        ],
        "userID": "userID",
        "userIDType": "msg",
        "traceID": "traceID",
        "traceIDType": "msg",
        "useTimer": false,
        "timer": "",
        "outputs": 3,
        "jsonToCreate": "{\"text\":\"{{text}}\",\"en\":{\"text\":\"Please Enter your 13 Digit ID number\"}}",
        "jsonToCreateType": "json",
        "templateDescriptionButtonsContainerToCreate": [],
        "templateDesciptionDetailsToCreate": "main",
        "templateDesciptionTextToCreate": "",
        "templateIdToCreate": "enter_digit_number",
        "templateGroupToCreate": "main",
        "currentTemplateDescription": {
            "details": "main"
        },
        "currentTemplateGroup": "main",
        "currentTemplateTimer": "",
        "currentTemplateType": "standard",
        "jsonToEdit": "{\"text\":\"{{text}}\",\"en\":{\"text\":\"Type in your 13 digit ID Number below ⬇️\"}}",
        "jsonToEditType": "json",
        "templateIdToEdit": "enter_digit_number",
        "templateDescriptionButtonsContainerToEdit": [],
        "templateDesciptionDetailsToEdit": "main",
        "templateDesciptionTextToEdit": "",
        "x": 530,
        "y": 340,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "d839be4e2f04664a",
        "type": "link out",
        "z": "c65734bb7dc811a1",
        "name": "welcome message",
        "mode": "link",
        "links": [
            "a54c901244d07145",
            "ffb27b2ae071c95f"
        ],
        "x": 870,
        "y": 100,
        "wires": [],
        "l": true
    },
    {
        "id": "098267a4295e969e",
        "type": "link out",
        "z": "c65734bb7dc811a1",
        "name": "welcome message",
        "mode": "link",
        "links": [
            "ffb27b2ae071c95f"
        ],
        "x": 570,
        "y": 260,
        "wires": [],
        "l": true
    },
    {
        "id": "8d3fcc1aece06c1c",
        "type": "function",
        "z": "e90b3c4f5c50962c",
        "name": "get TrafficFines",
        "func": "msg.method = \"POST\";\nmsg.url = `${msg.externalApiUrl}/TrafficFines.svc`;\n\nmsg.payload = `<soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:tem=\"http://tempuri.org/\" xmlns:traf=\"http://schemas.datacontract.org/2004/07/TrafficFineService.Model.Request\"><soapenv:Header/><soapenv:Body><tem:FindTrafficFines><!--Optional:--><tem:enquiry><!--Optional:--><traf:MessageDate>2022-11-28</traf:MessageDate><!--Optional:--><traf:MessageId>A88A947E-6861-47EA-8173-B771FFE2022B</traf:MessageId><!--Optional:--><traf:Partner><!--Optional:--><traf:Code>CSH</traf:Code><!--Optional:--><traf:Key>c41#@hCP</traf:Key></traf:Partner><!--Optional:--><traf:IdentifierType>RSAIDNumber</traf:IdentifierType><!--Optional:--><traf:IdentifierValue>${msg.text}</traf:IdentifierValue></tem:enquiry></tem:FindTrafficFines></soapenv:Body></soapenv:Envelope>`;\nmsg.headers = {};\nmsg.headers['Content-Type'] = 'text/xml';\nmsg.headers['SOAPAction'] = 'http://tempuri.org/ITrafficFinesService/FindTrafficFines';\n// msg.headers['Ocp-Apim-Subscription-Key'] = '3dec01f1e4524c58bb67f876fe8ee2b8';\n// msg.headers['Authorization'] = `Basic ${msg.externalApiKey}`;\nmsg.requestType = \"xml\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1260,
        "y": 200,
        "wires": [
            [
                "83e5daae9ab3246a"
            ]
        ]
    },
    {
        "id": "4b0cfeb51f582b4e",
        "type": "debug",
        "z": "e90b3c4f5c50962c",
        "name": "msg",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 650,
        "y": 100,
        "wires": []
    },
    {
        "id": "b81905fbb96ef784",
        "type": "link in",
        "z": "e90b3c4f5c50962c",
        "name": "check number in",
        "links": [
            "5f82416fcc875db7",
            "19590267e956264f",
            "32d3c51b662984a9"
        ],
        "x": 325,
        "y": 280,
        "wires": [
            [
                "8cee248a8bb884a7"
            ]
        ]
    },
    {
        "id": "cb298f393849d794",
        "type": "switch",
        "z": "e90b3c4f5c50962c",
        "name": "b:NoticeNumber",
        "property": "msg.payload[\"s:Envelope\"][\"s:Body\"][0].FindTrafficFinesResponse[0].FindTrafficFinesResult[0][\"a:FineDetails\"][0][\"b:TrafficFineDetail\"][0][\"b:NoticeNumber\"][0]",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nnull"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1700,
        "y": 200,
        "wires": [
            [
                "dd608f06291c81dc",
                "1d525d4b2f18f2b8"
            ],
            [
                "cab683f31abeec41",
                "49457eee76076081"
            ]
        ]
    },
    {
        "id": "c7cdc18e12becf50",
        "type": "link out",
        "z": "e90b3c4f5c50962c",
        "name": "erroe out",
        "mode": "link",
        "links": [
            "a0a45e24a84f7526"
        ],
        "x": 1635,
        "y": 260,
        "wires": []
    },
    {
        "id": "dd608f06291c81dc",
        "type": "debug",
        "z": "e90b3c4f5c50962c",
        "name": "debug 19",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1958,
        "y": 153,
        "wires": []
    },
    {
        "id": "cab683f31abeec41",
        "type": "debug",
        "z": "e90b3c4f5c50962c",
        "name": "debug 20",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1960,
        "y": 360,
        "wires": []
    },
    {
        "id": "4253e3e374a0bff7",
        "type": "function",
        "z": "e90b3c4f5c50962c",
        "name": "set idNumber",
        "func": "msg.service = \"CustomerAPI\"\n\nmsg.method = \"POST\"\nmsg.url = `${msg.customerApi}/settings`;\nmsg.headers = {\n    \"authorization\": msg.customerApiKey,\n    \"x-trace-id\": msg.traceID,\n    \"x-user-id\": msg.userID\n}\n\nmsg.payload = {\n    \"idNumber\": msg.text,\n    \"updatedAt\": Date.now()\n}\n\nreturn msg;\n\n// msg.method = \"GET\";\n// msg.url = `${msg.chatwootApiUrl}/accounts/${msg.accountId}/contacts/search?q=${msg.chatId}`;\n\n// msg.payload = {};\n// msg.headers = {};\n// msg.headers['Content-Type'] = 'application/json';\n// msg.headers['api_access_token'] = msg.chatwootApiKey;\n// return msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 900,
        "y": 200,
        "wires": [
            [
                "5b49fe5e0df85690"
            ]
        ]
    },
    {
        "id": "5b49fe5e0df85690",
        "type": "subflow:8e9dd0b44d3c40ea",
        "z": "e90b3c4f5c50962c",
        "name": "",
        "x": 1080,
        "y": 200,
        "wires": [
            [
                "8d3fcc1aece06c1c"
            ],
            [
                "28a3c4ca290c7571"
            ]
        ]
    },
    {
        "id": "28a3c4ca290c7571",
        "type": "link out",
        "z": "e90b3c4f5c50962c",
        "name": "erroe out",
        "mode": "link",
        "links": [
            "a0a45e24a84f7526"
        ],
        "x": 1195,
        "y": 240,
        "wires": []
    },
    {
        "id": "8cee248a8bb884a7",
        "type": "switch",
        "z": "e90b3c4f5c50962c",
        "name": "check number",
        "property": "text.length",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "13",
                "vt": "num"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 460,
        "y": 280,
        "wires": [
            [
                "4b0cfeb51f582b4e",
                "f31f049dc83d6ffe"
            ],
            [
                "17a0837872317633",
                "cf32fa6ae3403cb4"
            ]
        ]
    },
    {
        "id": "17a0837872317633",
        "type": "debug",
        "z": "e90b3c4f5c50962c",
        "name": "msg",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 670,
        "y": 380,
        "wires": []
    },
    {
        "id": "762643c2c1d1a5d2",
        "type": "function",
        "z": "e90b3c4f5c50962c",
        "name": "set rows",
        "func": "\nmsg.rows = [];\n\nmsg.items = msg.payload[\"s:Envelope\"][\"s:Body\"][0].FindTrafficFinesResponse[0].FindTrafficFinesResult[0][\"a:FineDetails\"][0][\"b:TrafficFineDetail\"][0][\"b:VehicleRegistrationNumber\"][0] + \" - R\" + msg.payload[\"s:Envelope\"][\"s:Body\"][0].FindTrafficFinesResponse[0].FindTrafficFinesResult[0][\"a:FineDetails\"][0][\"b:TrafficFineDetail\"]\nfor (let i = 0; i < msg.TrafficFineDetail.length; i++) {\n        msg.rows.push({\n            \"title\": i + 1 + \". \" + msg.TrafficFineDetail[i][\"b:VehicleRegistrationNumber\"][0] + \" - R\" + msg.TrafficFineDetail[i][\"b:AmountDueRand\"][0]\n        });\n}\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2580,
        "y": 360,
        "wires": [
            [
                "925ef767d47eb4f5"
            ]
        ]
    },
    {
        "id": "1d525d4b2f18f2b8",
        "type": "function",
        "z": "e90b3c4f5c50962c",
        "name": "pagination",
        "func": "msg.textBtn = msg.text;\nmsg.allItems = msg.payload[\"s:Envelope\"][\"s:Body\"][0].FindTrafficFinesResponse[0].FindTrafficFinesResult[0][\"a:FineDetails\"][0][\"b:TrafficFineDetail\"]\n\n\nconst paginate = (array, page_size, page_number) => {\n    return array.slice((page_number - 1) * page_size, page_number * page_size);\n}\n\nlet itemsOnThePage = 10;\n\nmsg.page = Number(msg.state.split(\"_\")[2]) ? Number(msg.state.split(\"_\")[2]) : 1\n\nif (msg.textBtn == \"Previous\") {\n    msg.page = Number(msg.state.split(\"_\")[2]) - 1\n    msg.items = paginate(msg.allItems, itemsOnThePage, msg.page)\n} else if (msg.textBtn == \"Next\") {\n    msg.page = Number(msg.state.split(\"_\")[2]) + 1\n    msg.items = paginate(msg.allItems, itemsOnThePage, msg.page)\n} else {\n    msg.items = paginate(msg.allItems, itemsOnThePage, msg.page)\n}\nmsg.maxPage = Math.ceil(msg.allItems.length / itemsOnThePage);\n\nmsg.TrafficFineDetail = msg.items;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1968,
        "y": 193,
        "wires": [
            [
                "0fc3c5d39ff9b868",
                "cbc2a12d1289cd5c"
            ]
        ]
    },
    {
        "id": "0fc3c5d39ff9b868",
        "type": "switch",
        "z": "e90b3c4f5c50962c",
        "name": "TrafficFineDetail",
        "property": "TrafficFineDetail.length",
        "propertyType": "msg",
        "rules": [
            {
                "t": "gt",
                "v": "0",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 2178,
        "y": 193,
        "wires": [
            [
                "ced726125b123b6e",
                "dd9b3564839c5ee2"
            ],
            [
                "7b1462cbfe2495c1",
                "4bf402df656b6a8f"
            ]
        ]
    },
    {
        "id": "ced726125b123b6e",
        "type": "switch",
        "z": "e90b3c4f5c50962c",
        "name": "maxPage > 1",
        "property": "maxPage",
        "propertyType": "msg",
        "rules": [
            {
                "t": "gt",
                "v": "1",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 2390,
        "y": 280,
        "wires": [
            [
                "83a792e7b9b5277e"
            ],
            [
                "762643c2c1d1a5d2"
            ]
        ]
    },
    {
        "id": "83a792e7b9b5277e",
        "type": "switch",
        "z": "e90b3c4f5c50962c",
        "name": "maxPage == page",
        "property": "maxPage",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "page",
                "vt": "msg"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 2610,
        "y": 200,
        "wires": [
            [
                "47df41d0631d8e28"
            ],
            [
                "bdc54a331d360b6c"
            ]
        ]
    },
    {
        "id": "35e8b37bb95f0e87",
        "type": "function",
        "z": "e90b3c4f5c50962c",
        "name": "set rows",
        "func": "\nmsg.rows = [];\n\nmsg.items = msg.payload[\"s:Envelope\"][\"s:Body\"][0].FindTrafficFinesResponse[0].FindTrafficFinesResult[0][\"a:FineDetails\"][0][\"b:TrafficFineDetail\"][0][\"b:VehicleRegistrationNumber\"][0] + \" - R\" + msg.payload[\"s:Envelope\"][\"s:Body\"][0].FindTrafficFinesResponse[0].FindTrafficFinesResult[0][\"a:FineDetails\"][0][\"b:TrafficFineDetail\"]\nfor (let i = 0; i < msg.TrafficFineDetail.length; i++) {\n    if (i < 8) {\n        msg.rows.push({\n            \"title\": i + 1 + \". \" + msg.TrafficFineDetail[i][\"b:VehicleRegistrationNumber\"][0] + \" - R\" + msg.TrafficFineDetail[i][\"b:AmountDueRand\"][0]\n        });\n    }\n}\n\nmsg.rows.push({\n    \"title\": \"Previous\"\n});\nmsg.rows.push({\n    \"title\": \"Next\"\n});\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2940,
        "y": 300,
        "wires": [
            [
                "16523f97e097f6fe"
            ]
        ]
    },
    {
        "id": "925ef767d47eb4f5",
        "type": "send-message",
        "z": "e90b3c4f5c50962c",
        "isTimerUsed": false,
        "language": "lang",
        "languageType": "msg",
        "messageOption": "",
        "messageID": "",
        "messageIDType": "str",
        "name": "main_finedetail_1",
        "props": {
            "": [],
            "welcomeMessage": [],
            "main_1_1": [],
            "main_1_2": [],
            "main_1_3": [],
            "main_1_2_1": [],
            "main_3_1_1": [],
            "main_3_1_2": [],
            "main_3_1_3": [],
            "main_3_1_1_1": [
                {
                    "property": "rows",
                    "value": "rows",
                    "valueType": "msg"
                }
            ],
            "main_finedetail_1": [
                {
                    "property": "rows",
                    "value": "rows",
                    "valueType": "msg"
                }
            ]
        },
        "templateId": "main_finedetail_1",
        "templateIdToDelete": "",
        "templatesJsons": {
            "welcomeMessage": {
                "text": "{{text}}",
                "en": {
                    "text": "*New Traffic Fine Notification from Ekurhuleni\nMetro Police Department*\nPlease take note that a new traffic fine (REF:\nC1/93563/808/187933) has been issued against ID\nending 51.\nFor more information or options to pay the fine\nplease reply to this message and our friendly\nChatbot, Traffic Officer Buddy will gladly assist you.\nAlternatively log onto payCity.co.za for more\ninformation and options to pay.\n1. Pay Fine\n2. More Options\n3. View/Query all my fines from Ekurhuleni"
                }
            },
            "main_1_1": {
                "text": "{{text}}",
                "en": {
                    "text": "Please follow the link below.\nhttps://paynow.paycity.co.za\n1. Back to Payment Options\n2. Main Menu\nYou can also pay at any of the\nfollowing locations: Spar, Shoprite &\nCheckers & Pnp."
                }
            },
            "main_1_2": {
                "text": "{{text}}",
                "en": {
                    "text": "Respond to this message with your query.\nAlternatively, please submit an email to\nqueries@paycity.co.za."
                }
            },
            "main_1_3": {
                "text": "{{text}}",
                "en": {
                    "text": "Please hold while we connect you to an agent in live chat"
                }
            },
            "main_1_2_1": {
                "text": "{{text}}",
                "en": {
                    "text": "Thank you for your request. We will be in\ncontact shortly.\n1. Main Menu"
                }
            },
            "main_3_1_1": {
                "text": "{{text}}",
                "en": {
                    "text": "Querying for fines ..\nPlease be patient, this could take up\nto two minutes."
                }
            },
            "main_3_1_2": {
                "text": "{{text}}",
                "en": {
                    "text": "Please find a list of *commonly asked\nquestions*. Please select the option that\nrelates to your query.\n1. How do I pay my fine?\n2. General Enquiry/Query a Fine.\n3. I want to chat to an Agent."
                }
            },
            "main_3_1_3": {
                "text": "{{text}}",
                "en": {
                    "text": "Please hold while we connect you to\nan agent in live chat"
                }
            },
            "main_3_1_1_1": {
                "text": "{{text}}",
                "data": {
                    "interactive": {
                        "type": "list",
                        "buttonText": "Product list",
                        "sections": [
                            {
                                "title": "Select one",
                                "rows": "{{rows}}"
                            }
                        ]
                    }
                },
                "en": {
                    "text": "Please select Fine:"
                }
            },
            "main_finedetail_1": {
                "text": "{{text}}",
                "data": {
                    "interactive": {
                        "type": "list",
                        "buttonText": "Traffic notice list",
                        "sections": [
                            {
                                "title": "Select a Traffic Notice",
                                "rows": "{{rows}}"
                            }
                        ]
                    }
                },
                "en": {
                    "text": "Please click the button to select the notice:"
                }
            }
        },
        "templatesList": [
            "fine_not_found",
            "faq_representations",
            "faq_my_vehicle_not_driver",
            "querying_fine_details_waiting",
            "paynow_express_payment",
            "pay_your_fine",
            "main_nextfines",
            "main_image_file",
            "main_finedetail_1",
            "main_payment_info_allowedreason",
            "faq_dispute",
            "get_started",
            "main_image_placeholder",
            "goodbye",
            "enter_digit_number",
            "select_the_option",
            "connect_agent",
            "enter_digit_number_error",
            "main_3_1_1_1_1_3",
            "welocme",
            "main_3_1_1_1_1",
            "main_1_0",
            "main_3_error",
            "main_3_1",
            "main_1",
            "main_3_1_1_0",
            "main_3",
            "fines_pdf_file",
            "welcomeMessage",
            "main_0_0_pdf",
            "main_0_0",
            "main_2_2",
            "main_3_1_1_1_0_0",
            "main_2",
            "main_2_1",
            "querying_for_fines",
            "sendwindowopener_template",
            "fines_info",
            "main_3_1_1_1_1_2",
            "main_1_3",
            "main_pdf_placeholder",
            "main_1_2",
            "main_1_1",
            "main_3_1_1_1_1_1",
            "faq_other_queries",
            "main_1_2_1",
            "main_3_1_1",
            "main_3_1_3",
            "main_3_1_2",
            "main_3_1_1_1_0",
            "main_3_1_1_1",
            "fines_not_found",
            "errorMessage",
            "faq_representations_contacts",
            "faq_my_vehicle_not_driver_contacts",
            "registration_image_file"
        ],
        "userID": "userID",
        "userIDType": "msg",
        "traceID": "traceID",
        "traceIDType": "msg",
        "useTimer": false,
        "timer": "",
        "outputs": 3,
        "jsonToCreate": "{\"text\":\"{{text}}\",\"data\":{\"interactive\":{\"type\":\"list\",\"buttonText\":\"Product list\",\"sections\":[{\"title\":\"Select one\",\"rows\":\"{{rows}}\"}]}},\"en\":{\"text\":\"Please select Fine:\"}}",
        "jsonToCreateType": "json",
        "templateDescriptionButtonsContainerToCreate": [],
        "templateDesciptionDetailsToCreate": "main",
        "templateDesciptionTextToCreate": "",
        "templateIdToCreate": "main_finedetail_1",
        "templateGroupToCreate": "main",
        "currentTemplateDescription": {
            "details": "main"
        },
        "currentTemplateGroup": "main",
        "currentTemplateTimer": "",
        "currentTemplateType": "standard",
        "jsonToEdit": "{\"text\":\"{{text}}\",\"data\":{\"interactive\":{\"type\":\"list\",\"buttonText\":\"Traffic notice list\",\"sections\":[{\"title\":\"Select a Traffic Notice\",\"rows\":\"{{rows}}\"}]}},\"en\":{\"text\":\"Please click the button to select the notice:\"}}",
        "jsonToEditType": "json",
        "templateIdToEdit": "main_finedetail_1",
        "templateDescriptionButtonsContainerToEdit": [],
        "templateDesciptionDetailsToEdit": "main",
        "templateDesciptionTextToEdit": "",
        "x": 2770,
        "y": 360,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "4316331e2f0a9fce",
        "type": "subflow:8e9dd0b44d3c40ea",
        "z": "e90b3c4f5c50962c",
        "name": "",
        "x": 3820,
        "y": 227,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "b42d86f56c45bd8b",
        "type": "function",
        "z": "e90b3c4f5c50962c",
        "name": "set state with page",
        "func": "msg.service = \"CustomerAPI\";\n\nmsg.method = \"PUT\"\nmsg.url = msg.customerApi + \"/customers\";\nmsg.headers = {\n    authorization: msg.customerApiKey,\n    'x-trace-id': msg.traceID,\n    'x-user-id': msg.userID\n}\n\nmsg.payload = {\n    \"state\": \"main_finedetail_\" + msg.page\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3590,
        "y": 227,
        "wires": [
            [
                "4316331e2f0a9fce"
            ]
        ]
    },
    {
        "id": "999ab23b449b00b2",
        "type": "function",
        "z": "e90b3c4f5c50962c",
        "name": "get TrafficFines",
        "func": "msg.method = \"POST\";\nmsg.url = `${msg.externalApiUrl}/TrafficFines.svc`;\n\nmsg.payload = `<soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:tem=\"http://tempuri.org/\" xmlns:traf=\"http://schemas.datacontract.org/2004/07/TrafficFineService.Model.Request\"><soapenv:Header/><soapenv:Body><tem:FindTrafficFines><!--Optional:--><tem:enquiry><!--Optional:--><traf:MessageDate>2022-11-28</traf:MessageDate><!--Optional:--><traf:MessageId>A88A947E-6861-47EA-8173-B771FFE2022B</traf:MessageId><!--Optional:--><traf:Partner><!--Optional:--><traf:Code>CSH</traf:Code><!--Optional:--><traf:Key>c41#@hCP</traf:Key></traf:Partner><!--Optional:--><traf:IdentifierType>RSAIDNumber</traf:IdentifierType><!--Optional:--><traf:IdentifierValue>${msg.customerSettings.idNumber}</traf:IdentifierValue></tem:enquiry></tem:FindTrafficFines></soapenv:Body></soapenv:Envelope>`;\nmsg.headers = {};\nmsg.headers['Content-Type'] = 'text/xml';\nmsg.headers['SOAPAction'] = 'http://tempuri.org/ITrafficFinesService/FindTrafficFines';\n// msg.headers['Ocp-Apim-Subscription-Key'] = '3dec01f1e4524c58bb67f876fe8ee2b8';\n// msg.headers['Authorization'] = `Basic ${msg.externalApiKey}`;\nmsg.requestType = \"xml\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1580,
        "y": 100,
        "wires": [
            [
                "83e5daae9ab3246a"
            ]
        ]
    },
    {
        "id": "74dad587240b02f3",
        "type": "link in",
        "z": "e90b3c4f5c50962c",
        "name": "link in 2",
        "links": [
            "2f77d72aca2c6988",
            "78fa4c2e0c887ec6"
        ],
        "x": 1035,
        "y": 100,
        "wires": [
            [
                "0e8e89d7da027031"
            ]
        ]
    },
    {
        "id": "7b1462cbfe2495c1",
        "type": "debug",
        "z": "e90b3c4f5c50962c",
        "name": "debug 47",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2400,
        "y": 440,
        "wires": []
    },
    {
        "id": "d82cf2102e92472b",
        "type": "function",
        "z": "e90b3c4f5c50962c",
        "name": "set TrafficFineDetailForSettings",
        "func": "msg.service = \"CustomerAPI\"\n\nmsg.method = \"POST\"\nmsg.url = `${msg.customerApi}/settings`;\nmsg.headers = {\n    \"authorization\": msg.customerApiKey,\n    \"x-trace-id\": msg.traceID,\n    \"x-user-id\": msg.userID\n}\n\nmsg.payload = {\n    \"TrafficFineDetail\": msg.TrafficFineDetailForSettings,\n    \"FineDetails\": \"\"\n}\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2750,
        "y": 120,
        "wires": [
            [
                "247d1048bf308185"
            ]
        ]
    },
    {
        "id": "247d1048bf308185",
        "type": "subflow:8e9dd0b44d3c40ea",
        "z": "e90b3c4f5c50962c",
        "name": "",
        "x": 2960,
        "y": 100,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "dd9b3564839c5ee2",
        "type": "function",
        "z": "e90b3c4f5c50962c",
        "name": "set TrafficFineDetailForSettings",
        "func": "\nmsg.TrafficFineDetailForSettings = [];\nmsg.items = msg.payload[\"s:Envelope\"][\"s:Body\"][0].FindTrafficFinesResponse[0].FindTrafficFinesResult[0][\"a:FineDetails\"][0][\"b:TrafficFineDetail\"][0][\"b:VehicleRegistrationNumber\"][0] + \" - R\" + msg.payload[\"s:Envelope\"][\"s:Body\"][0].FindTrafficFinesResponse[0].FindTrafficFinesResult[0][\"a:FineDetails\"][0][\"b:TrafficFineDetail\"]\nfor (let i = 0; i < msg.TrafficFineDetail.length; i++) {\n    msg.TrafficFineDetailForSettings.push({\n        \"VehicleRegistrationNumber\": msg.TrafficFineDetail[i][\"b:VehicleRegistrationNumber\"][0],\n        \"NoticeNumber\": msg.TrafficFineDetail[i][\"b:NoticeNumber\"][0]\n    })\n}\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2470,
        "y": 100,
        "wires": [
            [
                "d82cf2102e92472b"
            ]
        ]
    },
    {
        "id": "83e5daae9ab3246a",
        "type": "subflow:8e9dd0b44d3c40ea",
        "z": "e90b3c4f5c50962c",
        "name": "",
        "x": 1460,
        "y": 200,
        "wires": [
            [
                "cb298f393849d794"
            ],
            [
                "c7cdc18e12becf50"
            ]
        ]
    },
    {
        "id": "cf32fa6ae3403cb4",
        "type": "send-message",
        "z": "e90b3c4f5c50962c",
        "isTimerUsed": false,
        "language": "lang",
        "languageType": "msg",
        "messageOption": "",
        "messageID": "",
        "messageIDType": "str",
        "name": "enter_digit_number_error",
        "props": {
            "": [],
            "welcomeMessage": [],
            "main_1_1": [],
            "main_1": [],
            "main_2": [],
            "main_3": [],
            "main_3_error": [],
            "enter_digit_number_error": []
        },
        "templateId": "enter_digit_number_error",
        "templateIdToDelete": "",
        "templatesJsons": {
            "welcomeMessage": {
                "text": "{{text}}",
                "en": {
                    "text": "*New Traffic Fine Notification from Ekurhuleni\nMetro Police Department*\nPlease take note that a new traffic fine (REF:\nC1/93563/808/187933) has been issued against ID\nending 51.\nFor more information or options to pay the fine\nplease reply to this message and our friendly\nChatbot, Traffic Officer Buddy will gladly assist you.\nAlternatively log onto payCity.co.za for more\ninformation and options to pay.\n1. Pay Fine\n2. More Options\n3. View/Query all my fines from Ekurhuleni"
                }
            },
            "main_1_1": {
                "text": "{{text}}",
                "en": {
                    "text": "Please follow the link below.\nhttps://paynow.paycity.co.za\n1. Back to Payment Options\n2. Main Menu\nYou can also pay at any of the\nfollowing locations: Spar, Shoprite &\nCheckers & Pnp."
                }
            },
            "main_1": {
                "text": "{{text}}",
                "en": {
                    "text": "Please follow the link below.\nhttps://paynow.paycity.co.za\n1. Back to Payment Options\n2. Main Menu\nYou can also pay at any of the\nfollowing locations: Spar, Shoprite &\nCheckers & Pnp."
                }
            },
            "main_2": {
                "text": "{{text}}",
                "en": {
                    "text": "Please find a list of *commonly asked questions*.\nPlease select the option that relates to your query.\n1. How do I pay my fine?\n2. General Enquiry/Query a Fine.\n3. I want to chat to an Agent."
                }
            },
            "main_3": {
                "text": "{{text}}",
                "en": {
                    "text": "Welcome to our our friendly Chatbot, Traffic Officer Buddy To get started, please enter your ID number"
                }
            },
            "main_3_error": {
                "text": "{{text}}",
                "en": {
                    "text": "Please enter a valid 13 digit South African ID number"
                }
            },
            "enter_digit_number_error": {
                "text": "{{text}}",
                "en": {
                    "text": "Please enter a valid 13 digit South African ID number"
                }
            }
        },
        "templatesList": [
            "fine_not_found",
            "faq_representations",
            "faq_my_vehicle_not_driver",
            "querying_fine_details_waiting",
            "paynow_express_payment",
            "pay_your_fine",
            "main_nextfines",
            "main_image_file",
            "main_finedetail_1",
            "main_payment_info_allowedreason",
            "faq_dispute",
            "get_started",
            "main_image_placeholder",
            "goodbye",
            "enter_digit_number",
            "select_the_option",
            "connect_agent",
            "enter_digit_number_error",
            "fines_not_found",
            "main_3_1_1_1_1_3",
            "welocme",
            "main_3_1_1_1_1",
            "main_1_0",
            "main_3_error",
            "main_3_1",
            "main_1",
            "main_3_1_1_0",
            "main_3",
            "fines_pdf_file",
            "welcomeMessage",
            "main_0_0_pdf",
            "main_0_0",
            "main_2_2",
            "main_3_1_1_1_0_0",
            "main_2",
            "main_2_1",
            "querying_for_fines",
            "sendwindowopener_template",
            "fines_info",
            "main_3_1_1_1_1_2",
            "main_1_3",
            "main_pdf_placeholder",
            "main_1_2",
            "main_1_1",
            "main_3_1_1_1_1_1",
            "faq_other_queries",
            "main_1_2_1",
            "main_3_1_1",
            "main_3_1_3",
            "main_3_1_2",
            "main_3_1_1_1_0",
            "main_3_1_1_1",
            "errorMessage",
            "faq_representations_contacts",
            "faq_my_vehicle_not_driver_contacts",
            "registration_image_file"
        ],
        "userID": "userID",
        "userIDType": "msg",
        "traceID": "traceID",
        "traceIDType": "msg",
        "useTimer": false,
        "timer": "",
        "outputs": 3,
        "jsonToCreate": "{\"text\":\"{{text}}\",\"en\":{\"text\":\"Please enter a valid 13 digit South African ID number\"}}",
        "jsonToCreateType": "json",
        "templateDescriptionButtonsContainerToCreate": [],
        "templateDesciptionDetailsToCreate": "main",
        "templateDesciptionTextToCreate": "",
        "templateIdToCreate": "enter_digit_number_error",
        "templateGroupToCreate": "main",
        "currentTemplateDescription": {
            "details": "main"
        },
        "currentTemplateGroup": "main",
        "currentTemplateTimer": null,
        "currentTemplateType": "standard",
        "jsonToEdit": "{\"text\":\"{{text}}\",\"en\":{\"text\":\"Please enter a valid 13 digit South African ID number\"}}",
        "jsonToEditType": "json",
        "templateIdToEdit": "main_3_error",
        "templateDescriptionButtonsContainerToEdit": [],
        "templateDesciptionDetailsToEdit": "main",
        "templateDesciptionTextToEdit": "",
        "x": 730,
        "y": 340,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "49457eee76076081",
        "type": "send-message",
        "z": "e90b3c4f5c50962c",
        "isTimerUsed": false,
        "language": "lang",
        "languageType": "msg",
        "messageOption": "",
        "messageID": "",
        "messageIDType": "str",
        "name": "fines_not_found",
        "props": {
            "": [],
            "welcomeMessage": [],
            "main_1_1": [],
            "main_1_2": [],
            "main_1_3": [],
            "main_1_2_1": [],
            "main_3_1_1": [],
            "main_3_1_1_0": [],
            "fines_not_found": []
        },
        "templateId": "fines_not_found",
        "templateIdToDelete": "",
        "templatesJsons": {
            "welcomeMessage": {
                "text": "{{text}}",
                "en": {
                    "text": "*New Traffic Fine Notification from Ekurhuleni\nMetro Police Department*\nPlease take note that a new traffic fine (REF:\nC1/93563/808/187933) has been issued against ID\nending 51.\nFor more information or options to pay the fine\nplease reply to this message and our friendly\nChatbot, Traffic Officer Buddy will gladly assist you.\nAlternatively log onto payCity.co.za for more\ninformation and options to pay.\n1. Pay Fine\n2. More Options\n3. View/Query all my fines from Ekurhuleni"
                }
            },
            "main_1_1": {
                "text": "{{text}}",
                "en": {
                    "text": "Please follow the link below.\nhttps://paynow.paycity.co.za\n1. Back to Payment Options\n2. Main Menu\nYou can also pay at any of the\nfollowing locations: Spar, Shoprite &\nCheckers & Pnp."
                }
            },
            "main_1_2": {
                "text": "{{text}}",
                "en": {
                    "text": "Respond to this message with your query.\nAlternatively, please submit an email to\nqueries@paycity.co.za."
                }
            },
            "main_1_3": {
                "text": "{{text}}",
                "en": {
                    "text": "Please hold while we connect you to an agent in live chat"
                }
            },
            "main_1_2_1": {
                "text": "{{text}}",
                "en": {
                    "text": "Thank you for your request. We will be in\ncontact shortly.\n1. Main Menu"
                }
            },
            "main_3_1_1": {
                "text": "{{text}}",
                "data": {
                    "interactive": {
                        "type": "button",
                        "buttons": [
                            {
                                "title": "{{button1}}"
                            },
                            {
                                "title": "{{button2}}"
                            },
                            {
                                "title": "{{button3}}"
                            }
                        ]
                    }
                },
                "en": {
                    "button1": "Pay Fine",
                    "button2": "Questions & Answers",
                    "button3": "View Fines",
                    "text": "You don't have any fines. You're doing great!"
                }
            },
            "main_3_1_1_0": {
                "text": "{{text}}",
                "data": {
                    "interactive": {
                        "type": "button",
                        "buttons": [
                            {
                                "title": "{{button1}}"
                            },
                            {
                                "title": "{{button2}}"
                            },
                            {
                                "title": "{{button3}}"
                            }
                        ]
                    }
                },
                "en": {
                    "button1": "Back",
                    "button2": "Main Menu",
                    "button3": "Chat to Agent",
                    "text": "You don't have any fines. You're doing great!"
                }
            },
            "fines_not_found": {
                "text": "{{text}}",
                "data": {
                    "interactive": {
                        "type": "button",
                        "buttons": [
                            {
                                "title": "{{button1}}"
                            },
                            {
                                "title": "{{button2}}"
                            },
                            {
                                "title": "{{button3}}"
                            }
                        ]
                    }
                },
                "en": {
                    "button1": "Back",
                    "button2": "Main Menu",
                    "button3": "Chat to Agent",
                    "text": "You don't have any notices. You're doing great!"
                }
            }
        },
        "templatesList": [
            "fine_not_found",
            "faq_representations",
            "faq_my_vehicle_not_driver",
            "querying_fine_details_waiting",
            "paynow_express_payment",
            "pay_your_fine",
            "main_nextfines",
            "main_image_file",
            "main_finedetail_1",
            "main_payment_info_allowedreason",
            "faq_dispute",
            "get_started",
            "main_image_placeholder",
            "goodbye",
            "enter_digit_number",
            "select_the_option",
            "connect_agent",
            "enter_digit_number_error",
            "fines_not_found",
            "main_3_1_1_1_1_3",
            "welocme",
            "main_3_1_1_1_1",
            "main_1_0",
            "main_3_error",
            "main_3_1",
            "main_1",
            "main_3_1_1_0",
            "main_3",
            "fines_pdf_file",
            "welcomeMessage",
            "main_0_0_pdf",
            "main_0_0",
            "main_2_2",
            "main_3_1_1_1_0_0",
            "main_2",
            "main_2_1",
            "querying_for_fines",
            "sendwindowopener_template",
            "fines_info",
            "main_3_1_1_1_1_2",
            "main_1_3",
            "main_pdf_placeholder",
            "main_1_2",
            "main_1_1",
            "main_3_1_1_1_1_1",
            "faq_other_queries",
            "main_1_2_1",
            "main_3_1_1",
            "main_3_1_3",
            "main_3_1_2",
            "main_3_1_1_1_0",
            "main_3_1_1_1",
            "errorMessage",
            "faq_representations_contacts",
            "faq_my_vehicle_not_driver_contacts",
            "registration_image_file"
        ],
        "userID": "userID",
        "userIDType": "msg",
        "traceID": "traceID",
        "traceIDType": "msg",
        "useTimer": false,
        "timer": "",
        "outputs": 3,
        "jsonToCreate": "{\"text\":\"{{text}}\",\"data\":{\"interactive\":{\"type\":\"button\",\"buttons\":[{\"title\":\"{{button1}}\"},{\"title\":\"{{button2}}\"},{\"title\":\"{{button3}}\"}]}},\"en\":{\"button1\":\"Back\",\"button2\":\"Main Menu\",\"button3\":\"Chat to Agent\",\"text\":\"You don't have any fines. You're doing great!\"}}",
        "jsonToCreateType": "json",
        "templateDescriptionButtonsContainerToCreate": [],
        "templateDesciptionDetailsToCreate": "main",
        "templateDesciptionTextToCreate": "",
        "templateIdToCreate": "fines_not_found",
        "templateGroupToCreate": "main",
        "currentTemplateDescription": {
            "details": "main"
        },
        "currentTemplateGroup": "main",
        "currentTemplateTimer": "",
        "currentTemplateType": "standard",
        "jsonToEdit": "{\"text\":\"{{text}}\",\"data\":{\"interactive\":{\"type\":\"button\",\"buttons\":[{\"title\":\"{{button1}}\"},{\"title\":\"{{button2}}\"},{\"title\":\"{{button3}}\"}]}},\"en\":{\"button1\":\"Back\",\"button2\":\"Main Menu\",\"button3\":\"Chat to Agent\",\"text\":\"You don't have any notices. You're doing great!\"}}",
        "jsonToEditType": "json",
        "templateIdToEdit": "fines_not_found",
        "templateDescriptionButtonsContainerToEdit": [],
        "templateDesciptionDetailsToEdit": "main",
        "templateDesciptionTextToEdit": "",
        "x": 1980,
        "y": 400,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "4bf402df656b6a8f",
        "type": "send-message",
        "z": "e90b3c4f5c50962c",
        "isTimerUsed": false,
        "language": "lang",
        "languageType": "msg",
        "messageOption": "",
        "messageID": "",
        "messageIDType": "str",
        "name": "fines_not_found",
        "props": {
            "": [],
            "welcomeMessage": [],
            "main_1_1": [],
            "main_1_2": [],
            "main_1_3": [],
            "main_1_2_1": [],
            "main_3_1_1": [],
            "main_3_1_1_0": [],
            "fines_not_found": []
        },
        "templateId": "fines_not_found",
        "templateIdToDelete": "",
        "templatesJsons": {
            "welcomeMessage": {
                "text": "{{text}}",
                "en": {
                    "text": "*New Traffic Fine Notification from Ekurhuleni\nMetro Police Department*\nPlease take note that a new traffic fine (REF:\nC1/93563/808/187933) has been issued against ID\nending 51.\nFor more information or options to pay the fine\nplease reply to this message and our friendly\nChatbot, Traffic Officer Buddy will gladly assist you.\nAlternatively log onto payCity.co.za for more\ninformation and options to pay.\n1. Pay Fine\n2. More Options\n3. View/Query all my fines from Ekurhuleni"
                }
            },
            "main_1_1": {
                "text": "{{text}}",
                "en": {
                    "text": "Please follow the link below.\nhttps://paynow.paycity.co.za\n1. Back to Payment Options\n2. Main Menu\nYou can also pay at any of the\nfollowing locations: Spar, Shoprite &\nCheckers & Pnp."
                }
            },
            "main_1_2": {
                "text": "{{text}}",
                "en": {
                    "text": "Respond to this message with your query.\nAlternatively, please submit an email to\nqueries@paycity.co.za."
                }
            },
            "main_1_3": {
                "text": "{{text}}",
                "en": {
                    "text": "Please hold while we connect you to an agent in live chat"
                }
            },
            "main_1_2_1": {
                "text": "{{text}}",
                "en": {
                    "text": "Thank you for your request. We will be in\ncontact shortly.\n1. Main Menu"
                }
            },
            "main_3_1_1": {
                "text": "{{text}}",
                "data": {
                    "interactive": {
                        "type": "button",
                        "buttons": [
                            {
                                "title": "{{button1}}"
                            },
                            {
                                "title": "{{button2}}"
                            },
                            {
                                "title": "{{button3}}"
                            }
                        ]
                    }
                },
                "en": {
                    "button1": "Pay Fine",
                    "button2": "Questions & Answers",
                    "button3": "View Fines",
                    "text": "You don't have any fines. You're doing great!"
                }
            },
            "main_3_1_1_0": {
                "text": "{{text}}",
                "data": {
                    "interactive": {
                        "type": "button",
                        "buttons": [
                            {
                                "title": "{{button1}}"
                            },
                            {
                                "title": "{{button2}}"
                            },
                            {
                                "title": "{{button3}}"
                            }
                        ]
                    }
                },
                "en": {
                    "button1": "Back",
                    "button2": "Main Menu",
                    "button3": "Chat to Agent",
                    "text": "You don't have any fines. You're doing great!"
                }
            },
            "fines_not_found": {
                "text": "{{text}}",
                "data": {
                    "interactive": {
                        "type": "button",
                        "buttons": [
                            {
                                "title": "{{button1}}"
                            },
                            {
                                "title": "{{button2}}"
                            },
                            {
                                "title": "{{button3}}"
                            }
                        ]
                    }
                },
                "en": {
                    "button1": "Back",
                    "button2": "Main Menu",
                    "button3": "Chat to Agent",
                    "text": "You don't have any notices. You're doing great!"
                }
            }
        },
        "templatesList": [
            "fine_not_found",
            "faq_representations",
            "faq_my_vehicle_not_driver",
            "querying_fine_details_waiting",
            "paynow_express_payment",
            "pay_your_fine",
            "main_nextfines",
            "main_image_file",
            "main_finedetail_1",
            "main_payment_info_allowedreason",
            "faq_dispute",
            "get_started",
            "main_image_placeholder",
            "goodbye",
            "enter_digit_number",
            "select_the_option",
            "connect_agent",
            "enter_digit_number_error",
            "main_3_1_1_1_1_3",
            "welocme",
            "main_3_1_1_1_1",
            "main_1_0",
            "main_3_error",
            "main_3_1",
            "main_1",
            "main_3_1_1_0",
            "main_3",
            "fines_pdf_file",
            "welcomeMessage",
            "main_0_0_pdf",
            "main_0_0",
            "main_2_2",
            "main_3_1_1_1_0_0",
            "main_2",
            "main_2_1",
            "querying_for_fines",
            "sendwindowopener_template",
            "fines_info",
            "main_3_1_1_1_1_2",
            "main_1_3",
            "main_pdf_placeholder",
            "main_1_2",
            "main_1_1",
            "main_3_1_1_1_1_1",
            "faq_other_queries",
            "main_1_2_1",
            "main_3_1_1",
            "main_3_1_3",
            "main_3_1_2",
            "fines_not_found",
            "main_3_1_1_1_0",
            "main_3_1_1_1",
            "errorMessage",
            "faq_representations_contacts",
            "faq_my_vehicle_not_driver_contacts",
            "registration_image_file"
        ],
        "userID": "userID",
        "userIDType": "msg",
        "traceID": "traceID",
        "traceIDType": "msg",
        "useTimer": false,
        "timer": "",
        "outputs": 3,
        "jsonToCreate": "{\"text\":\"{{text}}\",\"data\":{\"interactive\":{\"type\":\"button\",\"buttons\":[{\"title\":\"{{button1}}\"},{\"title\":\"{{button2}}\"},{\"title\":\"{{button3}}\"}]}},\"en\":{\"button1\":\"Back\",\"button2\":\"Main Menu\",\"button3\":\"Chat to Agent\",\"text\":\"You don't have any fines. You're doing great!\"}}",
        "jsonToCreateType": "json",
        "templateDescriptionButtonsContainerToCreate": [],
        "templateDesciptionDetailsToCreate": "main",
        "templateDesciptionTextToCreate": "",
        "templateIdToCreate": "fines_not_found",
        "templateGroupToCreate": "main",
        "currentTemplateDescription": {
            "details": "main"
        },
        "currentTemplateGroup": "main",
        "currentTemplateTimer": "",
        "currentTemplateType": "standard",
        "jsonToEdit": "{\"text\":\"{{text}}\",\"data\":{\"interactive\":{\"type\":\"button\",\"buttons\":[{\"title\":\"{{button1}}\"},{\"title\":\"{{button2}}\"},{\"title\":\"{{button3}}\"}]}},\"en\":{\"button1\":\"Back\",\"button2\":\"Main Menu\",\"button3\":\"Chat to Agent\",\"text\":\"You don't have any notices. You're doing great!\"}}",
        "jsonToEditType": "json",
        "templateIdToEdit": "fines_not_found",
        "templateDescriptionButtonsContainerToEdit": [],
        "templateDesciptionDetailsToEdit": "main",
        "templateDesciptionTextToEdit": "",
        "x": 2420,
        "y": 480,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "f31f049dc83d6ffe",
        "type": "send-message",
        "z": "e90b3c4f5c50962c",
        "isTimerUsed": false,
        "language": "lang",
        "languageType": "msg",
        "messageOption": "",
        "messageID": "",
        "messageIDType": "str",
        "name": "querying_for_fines",
        "props": {
            "": [],
            "welcomeMessage": [],
            "main_1_1": [],
            "main_1_2": [],
            "main_1_3": [],
            "main_1_2_1": [],
            "main_3_1_1": [],
            "querying_for_fines": []
        },
        "templateId": "querying_for_fines",
        "templateIdToDelete": "",
        "templatesJsons": {
            "welcomeMessage": {
                "text": "{{text}}",
                "en": {
                    "text": "*New Traffic Fine Notification from Ekurhuleni\nMetro Police Department*\nPlease take note that a new traffic fine (REF:\nC1/93563/808/187933) has been issued against ID\nending 51.\nFor more information or options to pay the fine\nplease reply to this message and our friendly\nChatbot, Traffic Officer Buddy will gladly assist you.\nAlternatively log onto payCity.co.za for more\ninformation and options to pay.\n1. Pay Fine\n2. More Options\n3. View/Query all my fines from Ekurhuleni"
                }
            },
            "main_1_1": {
                "text": "{{text}}",
                "en": {
                    "text": "Please follow the link below.\nhttps://paynow.paycity.co.za\n1. Back to Payment Options\n2. Main Menu\nYou can also pay at any of the\nfollowing locations: Spar, Shoprite &\nCheckers & Pnp."
                }
            },
            "main_1_2": {
                "text": "{{text}}",
                "en": {
                    "text": "Respond to this message with your query.\nAlternatively, please submit an email to\nqueries@paycity.co.za."
                }
            },
            "main_1_3": {
                "text": "{{text}}",
                "en": {
                    "text": "Please hold while we connect you to an agent in live chat"
                }
            },
            "main_1_2_1": {
                "text": "{{text}}",
                "en": {
                    "text": "Thank you for your request. We will be in\ncontact shortly.\n1. Main Menu"
                }
            },
            "main_3_1_1": {
                "text": "{{text}}",
                "en": {
                    "text": "Querying for fines...\nPlease be patient, this could take up to two minutes."
                }
            },
            "querying_for_fines": {
                "text": "{{text}}",
                "en": {
                    "text": "Give me a moment. I'm busy finding your notices. ⏱️\n\nPlease be patient, this could take up to 2 minutes."
                }
            }
        },
        "templatesList": [
            "fine_not_found",
            "faq_representations",
            "faq_my_vehicle_not_driver",
            "querying_fine_details_waiting",
            "paynow_express_payment",
            "pay_your_fine",
            "main_nextfines",
            "main_image_file",
            "main_finedetail_1",
            "main_payment_info_allowedreason",
            "faq_dispute",
            "get_started",
            "main_image_placeholder",
            "goodbye",
            "enter_digit_number",
            "select_the_option",
            "connect_agent",
            "enter_digit_number_error",
            "fines_not_found",
            "main_3_1_1_1_1_3",
            "welocme",
            "main_3_1_1_1_1",
            "main_1_0",
            "main_3_error",
            "main_3_1",
            "main_1",
            "main_3_1_1_0",
            "main_3",
            "fines_pdf_file",
            "welcomeMessage",
            "main_0_0_pdf",
            "main_0_0",
            "main_2_2",
            "main_3_1_1_1_0_0",
            "main_2",
            "main_2_1",
            "querying_for_fines",
            "sendwindowopener_template",
            "fines_info",
            "main_3_1_1_1_1_2",
            "main_1_3",
            "main_pdf_placeholder",
            "main_1_2",
            "main_1_1",
            "main_3_1_1_1_1_1",
            "faq_other_queries",
            "main_1_2_1",
            "main_3_1_1",
            "main_3_1_3",
            "main_3_1_2",
            "main_3_1_1_1_0",
            "main_3_1_1_1",
            "errorMessage",
            "faq_representations_contacts",
            "faq_my_vehicle_not_driver_contacts",
            "registration_image_file"
        ],
        "userID": "userID",
        "userIDType": "msg",
        "traceID": "traceID",
        "traceIDType": "msg",
        "useTimer": false,
        "timer": "",
        "outputs": 3,
        "jsonToCreate": "{\"text\":\"{{text}}\",\"en\":{\"text\":\"Querying for fines...\\nPlease be patient, this could take up to two minutes.\"}}",
        "jsonToCreateType": "json",
        "templateDescriptionButtonsContainerToCreate": [],
        "templateDesciptionDetailsToCreate": "main",
        "templateDesciptionTextToCreate": "",
        "templateIdToCreate": "querying_for_fines",
        "templateGroupToCreate": "main",
        "currentTemplateDescription": {
            "details": "main"
        },
        "currentTemplateGroup": "main",
        "currentTemplateTimer": "",
        "currentTemplateType": "standard",
        "jsonToEdit": "{\"text\":\"{{text}}\",\"en\":{\"text\":\"Give me a moment. I'm busy finding your notices. ⏱️\\n\\nPlease be patient, this could take up to 2 minutes.\"}}",
        "jsonToEditType": "json",
        "templateIdToEdit": "querying_for_fines",
        "templateDescriptionButtonsContainerToEdit": [],
        "templateDesciptionDetailsToEdit": "main",
        "templateDesciptionTextToEdit": "",
        "x": 690,
        "y": 140,
        "wires": [
            [
                "305e9b4f704eb38a"
            ],
            [],
            []
        ]
    },
    {
        "id": "0e8e89d7da027031",
        "type": "send-message",
        "z": "e90b3c4f5c50962c",
        "isTimerUsed": false,
        "language": "lang",
        "languageType": "msg",
        "messageOption": "",
        "messageID": "",
        "messageIDType": "str",
        "name": "querying_for_fines",
        "props": {
            "": [],
            "welcomeMessage": [],
            "main_1_1": [],
            "main_1_2": [],
            "main_1_3": [],
            "main_1_2_1": [],
            "main_3_1_1": [],
            "querying_for_fines": []
        },
        "templateId": "querying_for_fines",
        "templateIdToDelete": "",
        "templatesJsons": {
            "welcomeMessage": {
                "text": "{{text}}",
                "en": {
                    "text": "*New Traffic Fine Notification from Ekurhuleni\nMetro Police Department*\nPlease take note that a new traffic fine (REF:\nC1/93563/808/187933) has been issued against ID\nending 51.\nFor more information or options to pay the fine\nplease reply to this message and our friendly\nChatbot, Traffic Officer Buddy will gladly assist you.\nAlternatively log onto payCity.co.za for more\ninformation and options to pay.\n1. Pay Fine\n2. More Options\n3. View/Query all my fines from Ekurhuleni"
                }
            },
            "main_1_1": {
                "text": "{{text}}",
                "en": {
                    "text": "Please follow the link below.\nhttps://paynow.paycity.co.za\n1. Back to Payment Options\n2. Main Menu\nYou can also pay at any of the\nfollowing locations: Spar, Shoprite &\nCheckers & Pnp."
                }
            },
            "main_1_2": {
                "text": "{{text}}",
                "en": {
                    "text": "Respond to this message with your query.\nAlternatively, please submit an email to\nqueries@paycity.co.za."
                }
            },
            "main_1_3": {
                "text": "{{text}}",
                "en": {
                    "text": "Please hold while we connect you to an agent in live chat"
                }
            },
            "main_1_2_1": {
                "text": "{{text}}",
                "en": {
                    "text": "Thank you for your request. We will be in\ncontact shortly.\n1. Main Menu"
                }
            },
            "main_3_1_1": {
                "text": "{{text}}",
                "en": {
                    "text": "Querying for fines...\nPlease be patient, this could take up to two minutes."
                }
            },
            "querying_for_fines": {
                "text": "{{text}}",
                "en": {
                    "text": "Give me a moment. I'm busy finding your notices. ⏱️\n\nPlease be patient, this could take up to 2 minutes."
                }
            }
        },
        "templatesList": [
            "fine_not_found",
            "faq_representations",
            "faq_my_vehicle_not_driver",
            "querying_fine_details_waiting",
            "paynow_express_payment",
            "pay_your_fine",
            "main_nextfines",
            "main_image_file",
            "main_finedetail_1",
            "main_payment_info_allowedreason",
            "faq_dispute",
            "get_started",
            "main_image_placeholder",
            "goodbye",
            "enter_digit_number",
            "select_the_option",
            "connect_agent",
            "enter_digit_number_error",
            "fines_not_found",
            "main_3_1_1_1_1_3",
            "welocme",
            "main_3_1_1_1_1",
            "main_1_0",
            "main_3_error",
            "main_3_1",
            "main_1",
            "main_3_1_1_0",
            "main_3",
            "fines_pdf_file",
            "welcomeMessage",
            "main_0_0_pdf",
            "main_0_0",
            "main_2_2",
            "main_3_1_1_1_0_0",
            "main_2",
            "main_2_1",
            "querying_for_fines",
            "sendwindowopener_template",
            "fines_info",
            "main_3_1_1_1_1_2",
            "main_1_3",
            "main_pdf_placeholder",
            "main_1_2",
            "main_1_1",
            "main_3_1_1_1_1_1",
            "faq_other_queries",
            "main_1_2_1",
            "main_3_1_1",
            "main_3_1_3",
            "main_3_1_2",
            "main_3_1_1_1_0",
            "main_3_1_1_1",
            "errorMessage",
            "faq_representations_contacts",
            "faq_my_vehicle_not_driver_contacts",
            "registration_image_file"
        ],
        "userID": "userID",
        "userIDType": "msg",
        "traceID": "traceID",
        "traceIDType": "msg",
        "useTimer": false,
        "timer": "",
        "outputs": 3,
        "jsonToCreate": "{\"text\":\"{{text}}\",\"en\":{\"text\":\"Querying for fines...\\nPlease be patient, this could take up to two minutes.\"}}",
        "jsonToCreateType": "json",
        "templateDescriptionButtonsContainerToCreate": [],
        "templateDesciptionDetailsToCreate": "main",
        "templateDesciptionTextToCreate": "",
        "templateIdToCreate": "querying_for_fines",
        "templateGroupToCreate": "main",
        "currentTemplateDescription": {
            "details": "main"
        },
        "currentTemplateGroup": "main",
        "currentTemplateTimer": "",
        "currentTemplateType": "standard",
        "jsonToEdit": "{\"text\":\"{{text}}\",\"en\":{\"text\":\"Give me a moment. I'm busy finding your notices. ⏱️\\n\\nPlease be patient, this could take up to 2 minutes.\"}}",
        "jsonToEditType": "json",
        "templateIdToEdit": "querying_for_fines",
        "templateDescriptionButtonsContainerToEdit": [],
        "templateDesciptionDetailsToEdit": "main",
        "templateDesciptionTextToEdit": "",
        "x": 1210,
        "y": 100,
        "wires": [
            [
                "a2182e41e2f92c43"
            ],
            [],
            []
        ]
    },
    {
        "id": "47df41d0631d8e28",
        "type": "function",
        "z": "e90b3c4f5c50962c",
        "name": "set rows",
        "func": "\nmsg.rows = [];\n\nmsg.items = msg.payload[\"s:Envelope\"][\"s:Body\"][0].FindTrafficFinesResponse[0].FindTrafficFinesResult[0][\"a:FineDetails\"][0][\"b:TrafficFineDetail\"][0][\"b:VehicleRegistrationNumber\"][0] + \" - R\" + msg.payload[\"s:Envelope\"][\"s:Body\"][0].FindTrafficFinesResponse[0].FindTrafficFinesResult[0][\"a:FineDetails\"][0][\"b:TrafficFineDetail\"]\nfor (let i = 0; i < msg.TrafficFineDetail.length; i++) {\n    if (i < 9) {\n        msg.rows.push({\n            \"title\": i + 1 + \". \" + msg.TrafficFineDetail[i][\"b:VehicleRegistrationNumber\"][0] + \" - R\" + msg.TrafficFineDetail[i][\"b:AmountDueRand\"][0]\n        });\n    }\n}\n\nmsg.rows.push({\n    \"title\": \"Previous\"\n});\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2840,
        "y": 160,
        "wires": [
            [
                "16523f97e097f6fe"
            ]
        ]
    },
    {
        "id": "bdc54a331d360b6c",
        "type": "switch",
        "z": "e90b3c4f5c50962c",
        "name": "page == 1",
        "property": "page",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "1",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 2770,
        "y": 266,
        "wires": [
            [
                "e29e48f692bf8599"
            ],
            [
                "35e8b37bb95f0e87"
            ]
        ]
    },
    {
        "id": "e29e48f692bf8599",
        "type": "function",
        "z": "e90b3c4f5c50962c",
        "name": "set rows",
        "func": "\nmsg.rows = [];\n\nmsg.items = msg.payload[\"s:Envelope\"][\"s:Body\"][0].FindTrafficFinesResponse[0].FindTrafficFinesResult[0][\"a:FineDetails\"][0][\"b:TrafficFineDetail\"][0][\"b:VehicleRegistrationNumber\"][0] + \" - R\" + msg.payload[\"s:Envelope\"][\"s:Body\"][0].FindTrafficFinesResponse[0].FindTrafficFinesResult[0][\"a:FineDetails\"][0][\"b:TrafficFineDetail\"]\nfor (let i = 0; i < msg.TrafficFineDetail.length; i++) {\n    if (i < 9) {\n        msg.rows.push({\n            \"title\": i + 1 + \". \" + msg.TrafficFineDetail[i][\"b:VehicleRegistrationNumber\"][0] + \" - R\" + msg.TrafficFineDetail[i][\"b:AmountDueRand\"][0]\n        });\n    }\n}\n\nmsg.rows.push({\n    \"title\": \"Next\"\n});\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2940,
        "y": 240,
        "wires": [
            [
                "16523f97e097f6fe"
            ]
        ]
    },
    {
        "id": "16523f97e097f6fe",
        "type": "send-message",
        "z": "e90b3c4f5c50962c",
        "isTimerUsed": false,
        "language": "lang",
        "languageType": "msg",
        "messageOption": "",
        "messageID": "",
        "messageIDType": "str",
        "name": "main_finedetail_1",
        "props": {
            "": [],
            "welcomeMessage": [],
            "main_1_1": [],
            "main_1_2": [],
            "main_1_3": [],
            "main_1_2_1": [],
            "main_3_1_1": [],
            "main_3_1_2": [],
            "main_3_1_3": [],
            "main_3_1_1_1": [
                {
                    "property": "rows",
                    "value": "rows",
                    "valueType": "msg"
                }
            ],
            "main_finedetail_1": [
                {
                    "property": "rows",
                    "value": "rows",
                    "valueType": "msg"
                }
            ]
        },
        "templateId": "main_finedetail_1",
        "templateIdToDelete": "",
        "templatesJsons": {
            "welcomeMessage": {
                "text": "{{text}}",
                "en": {
                    "text": "*New Traffic Fine Notification from Ekurhuleni\nMetro Police Department*\nPlease take note that a new traffic fine (REF:\nC1/93563/808/187933) has been issued against ID\nending 51.\nFor more information or options to pay the fine\nplease reply to this message and our friendly\nChatbot, Traffic Officer Buddy will gladly assist you.\nAlternatively log onto payCity.co.za for more\ninformation and options to pay.\n1. Pay Fine\n2. More Options\n3. View/Query all my fines from Ekurhuleni"
                }
            },
            "main_1_1": {
                "text": "{{text}}",
                "en": {
                    "text": "Please follow the link below.\nhttps://paynow.paycity.co.za\n1. Back to Payment Options\n2. Main Menu\nYou can also pay at any of the\nfollowing locations: Spar, Shoprite &\nCheckers & Pnp."
                }
            },
            "main_1_2": {
                "text": "{{text}}",
                "en": {
                    "text": "Respond to this message with your query.\nAlternatively, please submit an email to\nqueries@paycity.co.za."
                }
            },
            "main_1_3": {
                "text": "{{text}}",
                "en": {
                    "text": "Please hold while we connect you to an agent in live chat"
                }
            },
            "main_1_2_1": {
                "text": "{{text}}",
                "en": {
                    "text": "Thank you for your request. We will be in\ncontact shortly.\n1. Main Menu"
                }
            },
            "main_3_1_1": {
                "text": "{{text}}",
                "en": {
                    "text": "Querying for fines ..\nPlease be patient, this could take up\nto two minutes."
                }
            },
            "main_3_1_2": {
                "text": "{{text}}",
                "en": {
                    "text": "Please find a list of *commonly asked\nquestions*. Please select the option that\nrelates to your query.\n1. How do I pay my fine?\n2. General Enquiry/Query a Fine.\n3. I want to chat to an Agent."
                }
            },
            "main_3_1_3": {
                "text": "{{text}}",
                "en": {
                    "text": "Please hold while we connect you to\nan agent in live chat"
                }
            },
            "main_3_1_1_1": {
                "text": "{{text}}",
                "data": {
                    "interactive": {
                        "type": "list",
                        "buttonText": "Product list",
                        "sections": [
                            {
                                "title": "Select one",
                                "rows": "{{rows}}"
                            }
                        ]
                    }
                },
                "en": {
                    "text": "Please select Fine:"
                }
            },
            "main_finedetail_1": {
                "text": "{{text}}",
                "data": {
                    "interactive": {
                        "type": "list",
                        "buttonText": "Traffic notice list",
                        "sections": [
                            {
                                "title": "Select a Traffic Notice",
                                "rows": "{{rows}}"
                            }
                        ]
                    }
                },
                "en": {
                    "text": "Please click the button to select the notice:"
                }
            }
        },
        "templatesList": [
            "fine_not_found",
            "faq_representations",
            "faq_my_vehicle_not_driver",
            "querying_fine_details_waiting",
            "paynow_express_payment",
            "pay_your_fine",
            "main_nextfines",
            "main_image_file",
            "main_finedetail_1",
            "main_payment_info_allowedreason",
            "faq_dispute",
            "get_started",
            "main_image_placeholder",
            "goodbye",
            "enter_digit_number",
            "select_the_option",
            "connect_agent",
            "enter_digit_number_error",
            "main_3_1_1_1_1_3",
            "welocme",
            "main_3_1_1_1_1",
            "main_1_0",
            "main_3_error",
            "main_3_1",
            "main_1",
            "main_3_1_1_0",
            "main_3",
            "fines_pdf_file",
            "welcomeMessage",
            "main_0_0_pdf",
            "main_0_0",
            "main_2_2",
            "main_3_1_1_1_0_0",
            "main_2",
            "main_2_1",
            "querying_for_fines",
            "sendwindowopener_template",
            "fines_info",
            "main_3_1_1_1_1_2",
            "main_1_3",
            "main_pdf_placeholder",
            "main_1_2",
            "main_1_1",
            "main_3_1_1_1_1_1",
            "faq_other_queries",
            "main_1_2_1",
            "main_3_1_1",
            "main_3_1_3",
            "main_3_1_2",
            "main_3_1_1_1_0",
            "main_3_1_1_1",
            "fines_not_found",
            "errorMessage",
            "faq_representations_contacts",
            "faq_my_vehicle_not_driver_contacts",
            "registration_image_file"
        ],
        "userID": "userID",
        "userIDType": "msg",
        "traceID": "traceID",
        "traceIDType": "msg",
        "useTimer": false,
        "timer": "",
        "outputs": 3,
        "jsonToCreate": "{\"text\":\"{{text}}\",\"data\":{\"interactive\":{\"type\":\"list\",\"buttonText\":\"Product list\",\"sections\":[{\"title\":\"Select one\",\"rows\":\"{{rows}}\"}]}},\"en\":{\"text\":\"Please select Fine:\"}}",
        "jsonToCreateType": "json",
        "templateDescriptionButtonsContainerToCreate": [],
        "templateDesciptionDetailsToCreate": "main",
        "templateDesciptionTextToCreate": "",
        "templateIdToCreate": "main_finedetail_1",
        "templateGroupToCreate": "main",
        "currentTemplateDescription": {
            "details": "main"
        },
        "currentTemplateGroup": "main",
        "currentTemplateTimer": "",
        "currentTemplateType": "standard",
        "jsonToEdit": "{\"text\":\"{{text}}\",\"data\":{\"interactive\":{\"type\":\"list\",\"buttonText\":\"Traffic notice list\",\"sections\":[{\"title\":\"Select a Traffic Notice\",\"rows\":\"{{rows}}\"}]}},\"en\":{\"text\":\"Please click the button to select the notice:\"}}",
        "jsonToEditType": "json",
        "templateIdToEdit": "main_finedetail_1",
        "templateDescriptionButtonsContainerToEdit": [],
        "templateDesciptionDetailsToEdit": "main",
        "templateDesciptionTextToEdit": "",
        "x": 3150,
        "y": 240,
        "wires": [
            [
                "6c3a89fb8153e385"
            ],
            [],
            []
        ]
    },
    {
        "id": "6c3a89fb8153e385",
        "type": "switch",
        "z": "e90b3c4f5c50962c",
        "name": "page > 1",
        "property": "page",
        "propertyType": "msg",
        "rules": [
            {
                "t": "gt",
                "v": "1",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 3380,
        "y": 227,
        "wires": [
            [
                "b42d86f56c45bd8b"
            ]
        ]
    },
    {
        "id": "cbc2a12d1289cd5c",
        "type": "debug",
        "z": "e90b3c4f5c50962c",
        "name": "debug 51",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2200,
        "y": 120,
        "wires": []
    },
    {
        "id": "a2182e41e2f92c43",
        "type": "delay",
        "z": "e90b3c4f5c50962c",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 1400,
        "y": 100,
        "wires": [
            [
                "999ab23b449b00b2"
            ]
        ]
    },
    {
        "id": "305e9b4f704eb38a",
        "type": "delay",
        "z": "e90b3c4f5c50962c",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 880,
        "y": 140,
        "wires": [
            [
                "4253e3e374a0bff7"
            ]
        ]
    },
    {
        "id": "cdbf959afbadc979",
        "type": "function",
        "z": "8851dd36bcc9afaa",
        "name": "get TrafficFines",
        "func": "msg.method = \"POST\";\nmsg.url = `${msg.externalApiUrl}/TrafficFines.svc`;\n\nmsg.payload = `<soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:tem=\"http://tempuri.org/\" xmlns:traf=\"http://schemas.datacontract.org/2004/07/TrafficFineService.Model.Request\"><soapenv:Header/><soapenv:Body><tem:FindTrafficFines><!--Optional:--><tem:enquiry><!--Optional:--><traf:MessageDate>2022-11-28</traf:MessageDate><!--Optional:--><traf:MessageId>A88A947E-6861-47EA-8173-B771FFE2022B</traf:MessageId><!--Optional:--><traf:Partner><!--Optional:--><traf:Code>CSH</traf:Code><!--Optional:--><traf:Key>c41#@hCP</traf:Key></traf:Partner><!--Optional:--><traf:IdentifierType>RSAIDNumber</traf:IdentifierType><!--Optional:--><traf:IdentifierValue>${msg.customerSettings.idNumber}</traf:IdentifierValue></tem:enquiry></tem:FindTrafficFines></soapenv:Body></soapenv:Envelope>`;\nmsg.headers = {};\nmsg.headers['Content-Type'] = 'text/xml';\nmsg.headers['SOAPAction'] = 'http://tempuri.org/ITrafficFinesService/FindTrafficFines';\n// msg.headers['Ocp-Apim-Subscription-Key'] = '3dec01f1e4524c58bb67f876fe8ee2b8';\n// msg.headers['Authorization'] = `Basic ${msg.externalApiKey}`;\nmsg.requestType = \"xml\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 360,
        "y": 520,
        "wires": [
            [
                "3690475d313489f5",
                "0ed5b83b9c166640"
            ]
        ]
    },
    {
        "id": "3690475d313489f5",
        "type": "debug",
        "z": "8851dd36bcc9afaa",
        "name": "debug 32",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 540,
        "y": 480,
        "wires": []
    },
    {
        "id": "71615fd36e87c75c",
        "type": "link out",
        "z": "8851dd36bcc9afaa",
        "name": "erroe out",
        "mode": "link",
        "links": [
            "a0a45e24a84f7526"
        ],
        "x": 745,
        "y": 600,
        "wires": []
    },
    {
        "id": "726e2ecb47de0fc2",
        "type": "function",
        "z": "8851dd36bcc9afaa",
        "name": "set car information",
        "func": "let trafficFineDetail = msg.payload[\"s:Envelope\"][\"s:Body\"][0].FindTrafficFinesResponse[0].FindTrafficFinesResult[0][\"a:FineDetails\"][0][\"b:TrafficFineDetail\"] ?? [];\nlet fineDetails = msg.customerSettings.FineDetails ?? null;\nif ((fineDetails == null || fineDetails == \"\" || fineDetails == \"Pay Now\")  && msg.previousState == 'querying_for_fines'){\n    fineDetails = msg.text;\n}\nlet TrafficFineDetailId = fineDetails.split(\". \")[0] - 1;\nmsg.VehicleRegistration = fineDetails.split(\". \")[1].split(\" - \")[0];\n\nlet NoticeNumber = msg.customerSettings.TrafficFineDetail[TrafficFineDetailId].NoticeNumber ?? null;\n\nfor (let i = 0; i < trafficFineDetail.length; i++) {\n    if (trafficFineDetail[i][\"b:NoticeNumber\"][0] == NoticeNumber) {\n        msg.Amount = trafficFineDetail[i][\"b:AmountDueRand\"][0] ?? null;\n        msg.NoticeNumber = trafficFineDetail[i][\"b:NoticeNumber\"][0] ?? null;\n        msg.OffenceDate = trafficFineDetail[i][\"b:OffenceDate\"][0] ?? null;\n        if (msg.OffenceDate != null){\n            let date = new Date(msg.OffenceDate).toISOString().slice(0, 10);\n            let time = new Date(msg.OffenceDate).toISOString().slice(11, 16);\n\n            msg.OffenceDate = date+\" \"+time;\n        }\n        msg.IsExpressPaymentAllowed = trafficFineDetail[i][\"b:IsExpressPaymentAllowed\"][0] ?? null;\n        msg.ExpressLink = trafficFineDetail[i][\"b:ExpressLink\"][0] ?? null;\n        msg.PaymentAllowedReason = trafficFineDetail[i][\"b:PaymentAllowedReason\"][0] ?? null;\n        msg.trafficFineDetail = trafficFineDetail[i];\n        break;\n    }\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 850,
        "y": 520,
        "wires": [
            [
                "8929087dfe36135d",
                "e6181acf87ee7f26"
            ]
        ]
    },
    {
        "id": "8929087dfe36135d",
        "type": "debug",
        "z": "8851dd36bcc9afaa",
        "name": "debug 33",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1000,
        "y": 420,
        "wires": []
    },
    {
        "id": "cd4ecd6273a07a87",
        "type": "link in",
        "z": "8851dd36bcc9afaa",
        "name": "noticeNumber in",
        "links": [
            "66bce41cea4e19fb",
            "fabb3d878fe1e282"
        ],
        "x": 185,
        "y": 520,
        "wires": [
            [
                "cdbf959afbadc979"
            ]
        ]
    },
    {
        "id": "e2f5d162cc6280f2",
        "type": "switch",
        "z": "8851dd36bcc9afaa",
        "name": "IsExpressPaymentAllowed",
        "property": "IsExpressPaymentAllowed",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "true",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "false",
                "vt": "str"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 3840,
        "y": 340,
        "wires": [
            [
                "1daa1a2d4dbc0f3c"
            ],
            [
                "7454c87e61fa5480"
            ]
        ]
    },
    {
        "id": "2a91271c9dbf2b61",
        "type": "send-message",
        "z": "8851dd36bcc9afaa",
        "isTimerUsed": false,
        "language": "lang",
        "languageType": "msg",
        "messageOption": "",
        "messageID": "",
        "messageIDType": "str",
        "name": "main_payment_info_allowedreason",
        "props": {
            "": [],
            "welcomeMessage": [],
            "main_3_1_1_1_1": [
                {
                    "property": "Amount",
                    "value": "Amount",
                    "valueType": "msg"
                },
                {
                    "property": "VehicleRegistration",
                    "value": "VehicleRegistration",
                    "valueType": "msg"
                },
                {
                    "property": "NoticeNumber",
                    "value": "NoticeNumber",
                    "valueType": "msg"
                },
                {
                    "property": "OffenceDate",
                    "value": "OffenceDate",
                    "valueType": "msg"
                }
            ],
            "main_payment_info_allowedreason": [
                {
                    "property": "Amount",
                    "value": "Amount",
                    "valueType": "msg"
                },
                {
                    "property": "VehicleRegistration",
                    "value": "VehicleRegistration",
                    "valueType": "msg"
                },
                {
                    "property": "NoticeNumber",
                    "value": "NoticeNumber",
                    "valueType": "msg"
                },
                {
                    "property": "OffenceDate",
                    "value": "OffenceDate",
                    "valueType": "msg"
                },
                {
                    "property": "PaymentAllowedReason",
                    "value": "PaymentAllowedReason",
                    "valueType": "msg"
                }
            ]
        },
        "templateId": "main_payment_info_allowedreason",
        "templateIdToDelete": "",
        "templatesJsons": {
            "welcomeMessage": {
                "text": "{{text}}",
                "en": {
                    "text": "*New Traffic Fine Notification from Ekurhuleni\nMetro Police Department*\nPlease take note that a new traffic fine (REF:\nC1/93563/808/187933) has been issued against ID\nending 51.\nFor more information or options to pay the fine\nplease reply to this message and our friendly\nChatbot, Traffic Officer Buddy will gladly assist you.\nAlternatively log onto payCity.co.za for more\ninformation and options to pay.\n1. Pay Fine\n2. More Options\n3. View/Query all my fines from Ekurhuleni"
                }
            },
            "main_3_1_1_1_1": {
                "text": "{{text}}",
                "data": {
                    "interactive": {
                        "type": "button",
                        "buttons": [
                            {
                                "title": "{{button1}}"
                            },
                            {
                                "title": "{{button2}}"
                            },
                            {
                                "title": "{{button3}}"
                            }
                        ]
                    }
                },
                "en": {
                    "button1": "Pay Now",
                    "button2": "FAQ",
                    "button3": "Back to List",
                    "text": "*Amount:* {{Amount}}\n*Vehicle Registration:* {{VehicleRegistration}}\n*Notice Number:* {{NoticeNumber}}\n*Offence Date:* {{OffenceDate}}"
                }
            },
            "main_3_1_1_1": {
                "text": "{{text}}",
                "en": {
                    "text": "Please select Fine (list of all fines):\n1. CA 687666 - R500\n2. CA 000997 - R1100\n3. CY 500000 - R750"
                }
            },
            "main_payment_info_allowedreason": {
                "text": "{{text}}",
                "data": {
                    "interactive": {
                        "type": "button",
                        "buttons": [
                            {
                                "title": "{{button1}}"
                            },
                            {
                                "title": "{{button2}}"
                            }
                        ]
                    }
                },
                "en": {
                    "button1": "Main Menu",
                    "button2": "Back to List",
                    "text": "*Amount:* {{Amount}}\n*Vehicle Registration:* {{VehicleRegistration}}\n*Notice Number:* {{NoticeNumber}}\n*Offence Date:* {{OffenceDate}}\n*Payment NOT Allowed:* {{PaymentAllowedReason}}"
                }
            }
        },
        "templatesList": [
            "fine_not_found",
            "faq_representations",
            "faq_my_vehicle_not_driver",
            "querying_fine_details_waiting",
            "paynow_express_payment",
            "pay_your_fine",
            "main_nextfines",
            "main_image_file",
            "main_payment_info_allowedreason",
            "faq_dispute",
            "main_finedetail_1",
            "get_started",
            "main_image_placeholder",
            "goodbye",
            "enter_digit_number",
            "select_the_option",
            "connect_agent",
            "enter_digit_number_error",
            "main_3_1_1_1_1_3",
            "welocme",
            "main_3_1_1_1_1",
            "main_1_0",
            "main_3_error",
            "main_3_1",
            "main_1",
            "main_3_1_1_0",
            "main_3",
            "fines_pdf_file",
            "welcomeMessage",
            "main_0_0_pdf",
            "main_0_0",
            "main_2_2",
            "main_3_1_1_1_0_0",
            "main_2",
            "main_2_1",
            "querying_for_fines",
            "sendwindowopener_template",
            "fines_info",
            "main_3_1_1_1_1_2",
            "main_1_3",
            "main_pdf_placeholder",
            "main_1_2",
            "main_1_1",
            "main_3_1_1_1_1_1",
            "faq_other_queries",
            "main_1_2_1",
            "main_3_1_1",
            "main_3_1_3",
            "main_3_1_2",
            "main_3_1_1_1_0",
            "main_3_1_1_1",
            "fines_not_found",
            "errorMessage",
            "faq_representations_contacts",
            "faq_my_vehicle_not_driver_contacts",
            "registration_image_file"
        ],
        "userID": "userID",
        "userIDType": "msg",
        "traceID": "traceID",
        "traceIDType": "msg",
        "useTimer": false,
        "timer": "",
        "outputs": 3,
        "jsonToCreate": "{\"text\":\"{{text}}\",\"data\":{\"interactive\":{\"type\":\"button\",\"buttons\":[{\"title\":\"{{button2}}\"},{\"title\":\"{{button3}}\"}]}},\"en\":{\"button2\":\"FAQ\",\"button3\":\"Back to List\",\"text\":\"*Amount:* {{Amount}}\\n*Vehicle Registration:* {{VehicleRegistration}}\\n*Notice Number:* {{NoticeNumber}}\\n*Offence Date:* {{OffenceDate}}\\n*Payment NOT Allowed:* {{PaymentAllowedReason}}\"}}",
        "jsonToCreateType": "json",
        "templateDescriptionButtonsContainerToCreate": [],
        "templateDesciptionDetailsToCreate": "main",
        "templateDesciptionTextToCreate": "",
        "templateIdToCreate": "main_payment_info_allowedreason",
        "templateGroupToCreate": "main",
        "currentTemplateDescription": {
            "details": "main"
        },
        "currentTemplateGroup": "main",
        "currentTemplateTimer": "",
        "currentTemplateType": "standard",
        "jsonToEdit": "{\"text\":\"{{text}}\",\"data\":{\"interactive\":{\"type\":\"button\",\"buttons\":[{\"title\":\"{{button1}}\"},{\"title\":\"{{button2}}\"}]}},\"en\":{\"button1\":\"Main Menu\",\"button2\":\"Back to List\",\"text\":\"*Amount:* {{Amount}}\\n*Vehicle Registration:* {{VehicleRegistration}}\\n*Notice Number:* {{NoticeNumber}}\\n*Offence Date:* {{OffenceDate}}\\n*Payment NOT Allowed:* {{PaymentAllowedReason}}\"}}",
        "jsonToEditType": "json",
        "templateIdToEdit": "main_payment_info_allowedreason",
        "templateDescriptionButtonsContainerToEdit": [],
        "templateDesciptionDetailsToEdit": "main",
        "templateDesciptionTextToEdit": "",
        "x": 4240,
        "y": 380,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "12f3609c1e243c78",
        "type": "function",
        "z": "8851dd36bcc9afaa",
        "name": "get jpg",
        "func": "msg.url = msg.jpgUrl;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2230,
        "y": 460,
        "wires": [
            [
                "a4942f0cdd375bf2"
            ]
        ]
    },
    {
        "id": "403f5e8e64a53aaa",
        "type": "switch",
        "z": "8851dd36bcc9afaa",
        "name": "jpg url",
        "property": "jpgUrl",
        "propertyType": "msg",
        "rules": [
            {
                "t": "istype",
                "v": "undefined",
                "vt": "undefined"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 2070,
        "y": 420,
        "wires": [
            [
                "c1558642586bb239",
                "9fc1c87f9e21025f"
            ],
            [
                "12f3609c1e243c78"
            ]
        ]
    },
    {
        "id": "c1558642586bb239",
        "type": "debug",
        "z": "8851dd36bcc9afaa",
        "name": "file not found",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2250,
        "y": 300,
        "wires": []
    },
    {
        "id": "14441e725e757498",
        "type": "function",
        "z": "8851dd36bcc9afaa",
        "name": "set mok image",
        "func": "msg.fileUrl = 'https://i.ibb.co/1XPzmg5/Screenshot-2023-02-03-at-11-03-10.png'\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2870,
        "y": 540,
        "wires": [
            [
                "1f258f4b13f9f512"
            ]
        ]
    },
    {
        "id": "1f258f4b13f9f512",
        "type": "send-message",
        "z": "8851dd36bcc9afaa",
        "isTimerUsed": false,
        "language": "lang",
        "languageType": "msg",
        "messageOption": "",
        "messageID": "",
        "messageIDType": "str",
        "name": "main_image_file",
        "props": {
            "": [],
            "welcomeMessage": [],
            "main_3_1_1_1_1": [
                {
                    "property": "Amount",
                    "value": "Amount",
                    "valueType": "msg"
                },
                {
                    "property": "VehicleRegistration",
                    "value": "VehicleRegistration",
                    "valueType": "msg"
                },
                {
                    "property": "NoticeNumber",
                    "value": "NoticeNumber",
                    "valueType": "msg"
                },
                {
                    "property": "OffenceDate",
                    "value": "OffenceDate",
                    "valueType": "msg"
                }
            ],
            "main_3_1_1_1_0_0": [
                {
                    "property": "text",
                    "value": "text",
                    "valueType": "msg"
                }
            ],
            "main_image_file": [
                {
                    "property": "text",
                    "value": "fileUrl",
                    "valueType": "msg"
                }
            ]
        },
        "templateId": "main_image_file",
        "templateIdToDelete": "",
        "templatesJsons": {
            "welcomeMessage": {
                "text": "{{text}}",
                "en": {
                    "text": "*New Traffic Fine Notification from Ekurhuleni\nMetro Police Department*\nPlease take note that a new traffic fine (REF:\nC1/93563/808/187933) has been issued against ID\nending 51.\nFor more information or options to pay the fine\nplease reply to this message and our friendly\nChatbot, Traffic Officer Buddy will gladly assist you.\nAlternatively log onto payCity.co.za for more\ninformation and options to pay.\n1. Pay Fine\n2. More Options\n3. View/Query all my fines from Ekurhuleni"
                }
            },
            "main_3_1_1_1_1": {
                "text": "{{text}}",
                "data": {
                    "interactive": {
                        "type": "button",
                        "buttons": [
                            {
                                "title": "{{button1}}"
                            },
                            {
                                "title": "{{button2}}"
                            },
                            {
                                "title": "{{button3}}"
                            }
                        ]
                    }
                },
                "en": {
                    "button1": "Pay Now",
                    "button2": "FAQ",
                    "button3": "Back to List",
                    "text": "Amount: {{Amount}}\nVehicle Registration: {{VehicleRegistration}}\nNotice Number: {{NoticeNumber}}\nOffence Date: {{OffenceDate}}"
                }
            },
            "main_3_1_1_1": {
                "text": "{{text}}",
                "en": {
                    "text": "Please select Fine (list of all fines):\n1. CA 687666 - R500\n2. CA 000997 - R1100\n3. CY 500000 - R750"
                }
            },
            "main_3_1_1_1_0_0": {
                "pdfUrl": "{{pdfUrl}}",
                "en": {
                    "pdfUrl": "{{text}}"
                }
            },
            "main_image_file": {
                "imageUrl": "{{imageUrl}}",
                "en": {
                    "imageUrl": "{{text}}"
                }
            }
        },
        "templatesList": [
            "fine_not_found",
            "faq_representations",
            "faq_my_vehicle_not_driver",
            "querying_fine_details_waiting",
            "paynow_express_payment",
            "pay_your_fine",
            "main_nextfines",
            "main_image_file",
            "main_payment_info_allowedreason",
            "faq_dispute",
            "main_finedetail_1",
            "get_started",
            "main_image_placeholder",
            "goodbye",
            "enter_digit_number",
            "select_the_option",
            "connect_agent",
            "enter_digit_number_error",
            "main_3_1_1_1_1_3",
            "welocme",
            "main_3_1_1_1_1",
            "main_1_0",
            "main_3_error",
            "main_3_1",
            "main_1",
            "main_3_1_1_0",
            "main_3",
            "fines_pdf_file",
            "welcomeMessage",
            "main_0_0_pdf",
            "main_0_0",
            "main_2_2",
            "main_3_1_1_1_0_0",
            "main_2",
            "main_2_1",
            "querying_for_fines",
            "sendwindowopener_template",
            "fines_info",
            "main_3_1_1_1_1_2",
            "main_1_3",
            "main_pdf_placeholder",
            "main_1_2",
            "main_1_1",
            "main_3_1_1_1_1_1",
            "faq_other_queries",
            "main_1_2_1",
            "main_3_1_1",
            "main_3_1_3",
            "main_3_1_2",
            "main_3_1_1_1_0",
            "main_3_1_1_1",
            "fines_not_found",
            "errorMessage",
            "faq_representations_contacts",
            "faq_my_vehicle_not_driver_contacts",
            "registration_image_file"
        ],
        "userID": "userID",
        "userIDType": "msg",
        "traceID": "traceID",
        "traceIDType": "msg",
        "useTimer": false,
        "timer": "",
        "outputs": 3,
        "jsonToCreate": "{\"imageUrl\":\"{{imageUrl}}\",\"en\":{\"imageUrl\":\"{{text}}\"}}",
        "jsonToCreateType": "json",
        "templateDescriptionButtonsContainerToCreate": [],
        "templateDesciptionDetailsToCreate": "main",
        "templateDesciptionTextToCreate": "",
        "templateIdToCreate": "main_image_file",
        "templateGroupToCreate": "main",
        "currentTemplateDescription": {
            "details": "main"
        },
        "currentTemplateGroup": "main",
        "currentTemplateTimer": null,
        "currentTemplateType": "standard",
        "jsonToEdit": "{\"imageUrl\":\"{{imageUrl}}\",\"en\":{\"imageUrl\":\"{{text}}\"}}",
        "jsonToEditType": "json",
        "templateIdToEdit": "main_image_file",
        "templateDescriptionButtonsContainerToEdit": [],
        "templateDesciptionDetailsToEdit": "main",
        "templateDesciptionTextToEdit": "",
        "x": 3010,
        "y": 454,
        "wires": [
            [
                "fb7df750245e719d"
            ],
            [
                "fb7df750245e719d"
            ],
            [
                "fb7df750245e719d"
            ]
        ]
    },
    {
        "id": "a4942f0cdd375bf2",
        "type": "subflow:4b227c0aa46a1b6c",
        "z": "8851dd36bcc9afaa",
        "name": "",
        "x": 2420,
        "y": 460,
        "wires": [
            [
                "1f258f4b13f9f512"
            ],
            [
                "c17bdb397cb8c393"
            ]
        ]
    },
    {
        "id": "4af35c9181775fe3",
        "type": "function",
        "z": "8851dd36bcc9afaa",
        "name": "get pdf",
        "func": "msg.url = msg.pdfUrl;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3370,
        "y": 460,
        "wires": [
            [
                "5b02805782772e8e"
            ]
        ]
    },
    {
        "id": "5b02805782772e8e",
        "type": "subflow:4b227c0aa46a1b6c",
        "z": "8851dd36bcc9afaa",
        "name": "",
        "x": 3530,
        "y": 460,
        "wires": [
            [
                "b9767f6f358bcccd"
            ],
            [
                "ff1c98bd8073f13c"
            ]
        ]
    },
    {
        "id": "fb7df750245e719d",
        "type": "switch",
        "z": "8851dd36bcc9afaa",
        "name": "pdfUrl",
        "property": "pdfUrl",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nnull"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 3200,
        "y": 460,
        "wires": [
            [
                "4af35c9181775fe3",
                "826acc76b8098230"
            ],
            [
                "e2f5d162cc6280f2",
                "011a860e725989d1"
            ]
        ]
    },
    {
        "id": "5ffd4b84c0af2a53",
        "type": "function",
        "z": "8851dd36bcc9afaa",
        "name": "get noticeFileDetail",
        "func": "msg.method = \"POST\";\nmsg.url = `${msg.externalApiUrl}/TrafficFines.svc`;\n\nmsg.payload = `<soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:tem=\"http://tempuri.org/\" xmlns:traf=\"http://schemas.datacontract.org/2004/07/TrafficFineService.Model.Request\"><soapenv:Header/><soapenv:Body><tem:FindTrafficFiles><!--Optional:--><tem:request><!--Optional:--><traf:MessageDate>2022-11-28</traf:MessageDate><!--Optional:--><traf:MessageId>A88A947E-6861-47EA-8173-B771FFE2022B</traf:MessageId><!--Optional:--><traf:Partner><!--Optional:--><traf:Code>CSH</traf:Code><!--Optional:--><traf:Key>c41#@hCP</traf:Key></traf:Partner><!--Optional:--><traf:IdNumber>${msg.customerSettings.idNumber}</traf:IdNumber><!--Optional:--><traf:NoticeNumber>${msg.NoticeNumber}</traf:NoticeNumber></tem:request></tem:FindTrafficFiles></soapenv:Body></soapenv:Envelope>`;\nmsg.headers = {};\nmsg.headers['Content-Type'] = 'text/xml';\nmsg.headers['SOAPAction'] = 'http://tempuri.org/ITrafficFinesService/FindTrafficFiles';\n// msg.headers['Ocp-Apim-Subscription-Key'] = '3dec01f1e4524c58bb67f876fe8ee2b8';\n// msg.headers['Authorization'] = `Basic ${msg.externalApiKey}`;\nmsg.requestType = \"xml\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1210,
        "y": 500,
        "wires": [
            [
                "0f18c5c43349636c",
                "abb025ce2df2c81e"
            ]
        ]
    },
    {
        "id": "c14cb247764c2bc6",
        "type": "change",
        "z": "8851dd36bcc9afaa",
        "name": "noticeFileDetail",
        "rules": [
            {
                "t": "set",
                "p": "noticeFileDetail",
                "pt": "msg",
                "to": "payload[\"s:Envelope\"][\"s:Body\"][0].FindTrafficFilesResponse[0].FindTrafficFilesResult[0][\"a:FileDetails\"][0][\"b:NoticeFileDetail\"]",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1600,
        "y": 520,
        "wires": [
            [
                "e57e8f496c421634",
                "1d85eda84e0daff7"
            ]
        ]
    },
    {
        "id": "e57e8f496c421634",
        "type": "function",
        "z": "8851dd36bcc9afaa",
        "name": "set car information",
        "func": "\nif (msg.noticeFileDetail) {\n    let NoticeFileDetail = msg.noticeFileDetail;\n    for (let i = 0; i < NoticeFileDetail.length; i++) {\n        if (NoticeFileDetail[i][\"b:Extension\"] && NoticeFileDetail[i][\"b:Extension\"][0] == \"pdf\") {\n            msg.pdfUrl = NoticeFileDetail[i][\"b:Url\"][0];\n            break;\n        }\n    }\n    for (let i = 0; i < NoticeFileDetail.length; i++) {\n        if (NoticeFileDetail[i][\"b:Extension\"] && NoticeFileDetail[i][\"b:Extension\"][0] == \"jpg\") {\n            if (NoticeFileDetail[i][\"b:FileDescription\"][0] == \"Main Scene Image\") {\n                msg.jpgUrl = NoticeFileDetail[i][\"b:Url\"][0];\n                break;\n            }\n        }\n    }\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1830,
        "y": 520,
        "wires": [
            [
                "403f5e8e64a53aaa"
            ]
        ]
    },
    {
        "id": "9b2bcea5e1c14fde",
        "type": "function",
        "z": "8851dd36bcc9afaa",
        "name": "get pdf",
        "func": "msg.url = msg.pdfUrl;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2400,
        "y": 340,
        "wires": [
            [
                "9384979442c8dfd8"
            ]
        ]
    },
    {
        "id": "9384979442c8dfd8",
        "type": "subflow:4b227c0aa46a1b6c",
        "z": "8851dd36bcc9afaa",
        "name": "",
        "x": 2560,
        "y": 340,
        "wires": [
            [
                "3e9622742af18397"
            ],
            [
                "6668e1e86e097f95"
            ]
        ]
    },
    {
        "id": "9fc1c87f9e21025f",
        "type": "switch",
        "z": "8851dd36bcc9afaa",
        "name": "pdfUrl",
        "property": "pdfUrl",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nnull"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 2230,
        "y": 340,
        "wires": [
            [
                "9b2bcea5e1c14fde"
            ]
        ]
    },
    {
        "id": "c17bdb397cb8c393",
        "type": "send-message",
        "z": "8851dd36bcc9afaa",
        "isTimerUsed": false,
        "language": "lang",
        "languageType": "msg",
        "messageOption": "",
        "messageID": "",
        "messageIDType": "str",
        "name": "main_image_placeholder",
        "props": {
            "": [],
            "welcomeMessage": [],
            "main_3_1_1_1_1": [
                {
                    "property": "Amount",
                    "value": "Amount",
                    "valueType": "msg"
                },
                {
                    "property": "VehicleRegistration",
                    "value": "VehicleRegistration",
                    "valueType": "msg"
                },
                {
                    "property": "NoticeNumber",
                    "value": "NoticeNumber",
                    "valueType": "msg"
                },
                {
                    "property": "OffenceDate",
                    "value": "OffenceDate",
                    "valueType": "msg"
                }
            ],
            "main_3_1_1_1_0_0": [
                {
                    "property": "text",
                    "value": "text",
                    "valueType": "msg"
                }
            ],
            "main_image_file": [
                {
                    "property": "text",
                    "value": "fileUrl",
                    "valueType": "msg"
                }
            ],
            "main_image_placeholder": []
        },
        "templateId": "main_image_placeholder",
        "templateIdToDelete": "",
        "templatesJsons": {
            "welcomeMessage": {
                "text": "{{text}}",
                "en": {
                    "text": "*New Traffic Fine Notification from Ekurhuleni\nMetro Police Department*\nPlease take note that a new traffic fine (REF:\nC1/93563/808/187933) has been issued against ID\nending 51.\nFor more information or options to pay the fine\nplease reply to this message and our friendly\nChatbot, Traffic Officer Buddy will gladly assist you.\nAlternatively log onto payCity.co.za for more\ninformation and options to pay.\n1. Pay Fine\n2. More Options\n3. View/Query all my fines from Ekurhuleni"
                }
            },
            "main_3_1_1_1_1": {
                "text": "{{text}}",
                "data": {
                    "interactive": {
                        "type": "button",
                        "buttons": [
                            {
                                "title": "{{button1}}"
                            },
                            {
                                "title": "{{button2}}"
                            },
                            {
                                "title": "{{button3}}"
                            }
                        ]
                    }
                },
                "en": {
                    "button1": "Pay Now",
                    "button2": "FAQ",
                    "button3": "Back to List",
                    "text": "Amount: {{Amount}}\nVehicle Registration: {{VehicleRegistration}}\nNotice Number: {{NoticeNumber}}\nOffence Date: {{OffenceDate}}"
                }
            },
            "main_3_1_1_1": {
                "text": "{{text}}",
                "en": {
                    "text": "Please select Fine (list of all fines):\n1. CA 687666 - R500\n2. CA 000997 - R1100\n3. CY 500000 - R750"
                }
            },
            "main_3_1_1_1_0_0": {
                "pdfUrl": "{{pdfUrl}}",
                "en": {
                    "pdfUrl": "{{text}}"
                }
            },
            "main_image_file": {
                "imageUrl": "{{imageUrl}}",
                "en": {
                    "imageUrl": "{{text}}"
                }
            },
            "main_image_placeholder": {
                "text": "{{text}}",
                "en": {
                    "text": "Placeholder image"
                }
            }
        },
        "templatesList": [
            "fine_not_found",
            "faq_representations",
            "faq_my_vehicle_not_driver",
            "querying_fine_details_waiting",
            "paynow_express_payment",
            "pay_your_fine",
            "main_nextfines",
            "main_image_file",
            "main_payment_info_allowedreason",
            "faq_dispute",
            "main_finedetail_1",
            "get_started",
            "main_image_placeholder",
            "goodbye",
            "enter_digit_number",
            "select_the_option",
            "connect_agent",
            "enter_digit_number_error",
            "main_3_1_1_1_1_3",
            "welocme",
            "main_3_1_1_1_1",
            "main_1_0",
            "main_3_error",
            "main_3_1",
            "main_1",
            "main_3_1_1_0",
            "main_3",
            "fines_pdf_file",
            "welcomeMessage",
            "main_0_0_pdf",
            "main_0_0",
            "main_2_2",
            "main_3_1_1_1_0_0",
            "main_2",
            "main_2_1",
            "querying_for_fines",
            "sendwindowopener_template",
            "fines_info",
            "main_3_1_1_1_1_2",
            "main_1_3",
            "main_pdf_placeholder",
            "main_1_2",
            "main_1_1",
            "main_3_1_1_1_1_1",
            "faq_other_queries",
            "main_1_2_1",
            "main_3_1_1",
            "main_3_1_3",
            "main_3_1_2",
            "main_3_1_1_1_0",
            "main_3_1_1_1",
            "fines_not_found",
            "errorMessage",
            "faq_representations_contacts",
            "faq_my_vehicle_not_driver_contacts",
            "registration_image_file"
        ],
        "userID": "userID",
        "userIDType": "msg",
        "traceID": "traceID",
        "traceIDType": "msg",
        "useTimer": false,
        "timer": "",
        "outputs": 3,
        "jsonToCreate": "{\"text\":\"{{text}}\",\"en\":{\"text\":\"Placeholder image\"}}",
        "jsonToCreateType": "json",
        "templateDescriptionButtonsContainerToCreate": [],
        "templateDesciptionDetailsToCreate": "main",
        "templateDesciptionTextToCreate": "",
        "templateIdToCreate": "main_image_placeholder",
        "templateGroupToCreate": "main",
        "currentTemplateDescription": {
            "details": "main"
        },
        "currentTemplateGroup": "main",
        "currentTemplateTimer": null,
        "currentTemplateType": "standard",
        "jsonToEdit": "{\"text\":\"{{text}}\",\"en\":{\"text\":\"Placeholder image\"}}",
        "jsonToEditType": "json",
        "templateIdToEdit": "main_image_placeholder",
        "templateDescriptionButtonsContainerToEdit": [],
        "templateDesciptionDetailsToEdit": "main",
        "templateDesciptionTextToEdit": "",
        "x": 2640,
        "y": 540,
        "wires": [
            [
                "14441e725e757498"
            ],
            [],
            []
        ]
    },
    {
        "id": "0ed5b83b9c166640",
        "type": "subflow:8e9dd0b44d3c40ea",
        "z": "8851dd36bcc9afaa",
        "name": "",
        "x": 600,
        "y": 520,
        "wires": [
            [
                "10cd3c890bfd6a2e"
            ],
            [
                "71615fd36e87c75c"
            ]
        ]
    },
    {
        "id": "0f18c5c43349636c",
        "type": "subflow:8e9dd0b44d3c40ea",
        "z": "8851dd36bcc9afaa",
        "name": "",
        "x": 1400,
        "y": 480,
        "wires": [
            [
                "c14cb247764c2bc6",
                "abb025ce2df2c81e"
            ],
            [
                "c14cb247764c2bc6",
                "abb025ce2df2c81e"
            ]
        ]
    },
    {
        "id": "3e9622742af18397",
        "type": "send-message",
        "z": "8851dd36bcc9afaa",
        "isTimerUsed": false,
        "language": "lang",
        "languageType": "msg",
        "messageOption": "",
        "messageID": "",
        "messageIDType": "str",
        "name": "fines_pdf_file",
        "props": {
            "": [],
            "welcomeMessage": [],
            "main_3_1_1_1_1": [
                {
                    "property": "Amount",
                    "value": "Amount",
                    "valueType": "msg"
                },
                {
                    "property": "VehicleRegistration",
                    "value": "VehicleRegistration",
                    "valueType": "msg"
                },
                {
                    "property": "NoticeNumber",
                    "value": "NoticeNumber",
                    "valueType": "msg"
                },
                {
                    "property": "OffenceDate",
                    "value": "OffenceDate",
                    "valueType": "msg"
                }
            ],
            "main_3_1_1_1_0_0": [
                {
                    "property": "text",
                    "value": "fileUrl",
                    "valueType": "msg"
                }
            ],
            "fines_pdf_file": [
                {
                    "property": "pdfUrl",
                    "value": "fileUrl",
                    "valueType": "msg"
                }
            ]
        },
        "templateId": "fines_pdf_file",
        "templateIdToDelete": "",
        "templatesJsons": {
            "welcomeMessage": {
                "text": "{{text}}",
                "en": {
                    "text": "*New Traffic Fine Notification from Ekurhuleni\nMetro Police Department*\nPlease take note that a new traffic fine (REF:\nC1/93563/808/187933) has been issued against ID\nending 51.\nFor more information or options to pay the fine\nplease reply to this message and our friendly\nChatbot, Traffic Officer Buddy will gladly assist you.\nAlternatively log onto payCity.co.za for more\ninformation and options to pay.\n1. Pay Fine\n2. More Options\n3. View/Query all my fines from Ekurhuleni"
                }
            },
            "main_3_1_1_1_1": {
                "text": "{{text}}",
                "data": {
                    "interactive": {
                        "type": "button",
                        "buttons": [
                            {
                                "title": "{{button1}}"
                            },
                            {
                                "title": "{{button2}}"
                            },
                            {
                                "title": "{{button3}}"
                            }
                        ]
                    }
                },
                "en": {
                    "button1": "Pay Now",
                    "button2": "FAQ",
                    "button3": "Back to List",
                    "text": "Amount: {{Amount}}\nVehicle Registration: {{VehicleRegistration}}\nNotice Number: {{NoticeNumber}}\nOffence Date: {{OffenceDate}}"
                }
            },
            "main_3_1_1_1": {
                "text": "{{text}}",
                "en": {
                    "text": "Please select Fine (list of all fines):\n1. CA 687666 - R500\n2. CA 000997 - R1100\n3. CY 500000 - R750"
                }
            },
            "main_3_1_1_1_0_0": {
                "pdfUrl": "{{pdfUrl}}",
                "en": {
                    "pdfUrl": "{{text}}"
                }
            },
            "fines_pdf_file": {
                "pdfUrl": "{{pdfUrl}}"
            }
        },
        "templatesList": [
            "fine_not_found",
            "faq_representations",
            "faq_my_vehicle_not_driver",
            "querying_fine_details_waiting",
            "paynow_express_payment",
            "pay_your_fine",
            "main_nextfines",
            "main_image_file",
            "main_payment_info_allowedreason",
            "faq_dispute",
            "main_finedetail_1",
            "get_started",
            "main_image_placeholder",
            "goodbye",
            "enter_digit_number",
            "select_the_option",
            "connect_agent",
            "enter_digit_number_error",
            "main_3_1_1_1_1_3",
            "welocme",
            "main_3_1_1_1_1",
            "main_1_0",
            "main_3_error",
            "main_3_1",
            "main_1",
            "main_3_1_1_0",
            "main_3",
            "fines_pdf_file",
            "welcomeMessage",
            "main_0_0_pdf",
            "main_0_0",
            "main_2_2",
            "main_3_1_1_1_0_0",
            "main_2",
            "main_2_1",
            "querying_for_fines",
            "sendwindowopener_template",
            "fines_info",
            "main_3_1_1_1_1_2",
            "main_1_3",
            "main_pdf_placeholder",
            "main_1_2",
            "main_1_1",
            "main_3_1_1_1_1_1",
            "faq_other_queries",
            "main_1_2_1",
            "main_3_1_1",
            "main_3_1_3",
            "main_3_1_2",
            "main_3_1_1_1_0",
            "main_3_1_1_1",
            "fines_not_found",
            "errorMessage",
            "faq_representations_contacts",
            "faq_my_vehicle_not_driver_contacts",
            "registration_image_file"
        ],
        "userID": "userID",
        "userIDType": "msg",
        "traceID": "traceID",
        "traceIDType": "msg",
        "useTimer": false,
        "timer": "",
        "outputs": 3,
        "jsonToCreate": "{\"pdfUrl\":\"{{pdfUrl}}\",\"en\":{\"pdfUrl\":\"{{text}}\"}}",
        "jsonToCreateType": "json",
        "templateDescriptionButtonsContainerToCreate": [],
        "templateDesciptionDetailsToCreate": "main",
        "templateDesciptionTextToCreate": "",
        "templateIdToCreate": "fines_pdf_file",
        "templateGroupToCreate": "main",
        "currentTemplateDescription": {
            "details": "main"
        },
        "currentTemplateGroup": "main",
        "currentTemplateTimer": null,
        "currentTemplateType": "standard",
        "jsonToEdit": "{\"pdfUrl\":\"{{pdfUrl}}\"}",
        "jsonToEditType": "json",
        "templateIdToEdit": "fines_pdf_file",
        "templateDescriptionButtonsContainerToEdit": [],
        "templateDesciptionDetailsToEdit": "main",
        "templateDesciptionTextToEdit": "",
        "x": 3070,
        "y": 260,
        "wires": [
            [
                "e2f5d162cc6280f2"
            ],
            [
                "e2f5d162cc6280f2"
            ],
            [
                "e2f5d162cc6280f2"
            ]
        ]
    },
    {
        "id": "198a408a9796d1bd",
        "type": "send-message",
        "z": "8851dd36bcc9afaa",
        "isTimerUsed": false,
        "language": "lang",
        "languageType": "msg",
        "messageOption": "",
        "messageID": "",
        "messageIDType": "str",
        "name": "fines_info",
        "props": {
            "": [],
            "welcomeMessage": [],
            "main_3_1_1_1_1": [
                {
                    "property": "Amount",
                    "value": "Amount",
                    "valueType": "msg"
                },
                {
                    "property": "VehicleRegistration",
                    "value": "VehicleRegistration",
                    "valueType": "msg"
                },
                {
                    "property": "NoticeNumber",
                    "value": "NoticeNumber",
                    "valueType": "msg"
                },
                {
                    "property": "OffenceDate",
                    "value": "OffenceDate",
                    "valueType": "msg"
                }
            ],
            "fines_info": [
                {
                    "property": "Amount",
                    "value": "Amount",
                    "valueType": "msg"
                },
                {
                    "property": "VehicleRegistration",
                    "value": "VehicleRegistration",
                    "valueType": "msg"
                },
                {
                    "property": "NoticeNumber",
                    "value": "NoticeNumber",
                    "valueType": "msg"
                },
                {
                    "property": "OffenceDate",
                    "value": "OffenceDate",
                    "valueType": "msg"
                }
            ]
        },
        "templateId": "fines_info",
        "templateIdToDelete": "",
        "templatesJsons": {
            "welcomeMessage": {
                "text": "{{text}}",
                "en": {
                    "text": "*New Traffic Fine Notification from Ekurhuleni\nMetro Police Department*\nPlease take note that a new traffic fine (REF:\nC1/93563/808/187933) has been issued against ID\nending 51.\nFor more information or options to pay the fine\nplease reply to this message and our friendly\nChatbot, Traffic Officer Buddy will gladly assist you.\nAlternatively log onto payCity.co.za for more\ninformation and options to pay.\n1. Pay Fine\n2. More Options\n3. View/Query all my fines from Ekurhuleni"
                }
            },
            "main_3_1_1_1_1": {
                "text": "{{text}}",
                "data": {
                    "interactive": {
                        "type": "button",
                        "buttons": [
                            {
                                "title": "{{button1}}"
                            },
                            {
                                "title": "{{button2}}"
                            },
                            {
                                "title": "{{button3}}"
                            }
                        ]
                    }
                },
                "en": {
                    "button1": "Pay Now",
                    "button2": "FAQ",
                    "button3": "Back to List",
                    "text": "*Amount:* {{Amount}}\n*Vehicle Registration:* {{VehicleRegistration}}\n*Notice Number:* {{NoticeNumber}}\n*Offence Date:* {{OffenceDate}}"
                }
            },
            "main_3_1_1_1": {
                "text": "{{text}}",
                "en": {
                    "text": "Please select Fine (list of all fines):\n1. CA 687666 - R500\n2. CA 000997 - R1100\n3. CY 500000 - R750"
                }
            },
            "fines_info": {
                "text": "{{text}}",
                "data": {
                    "interactive": {
                        "type": "button",
                        "buttons": [
                            {
                                "title": "{{button1}}"
                            },
                            {
                                "title": "{{button2}}"
                            },
                            {
                                "title": "{{button3}}"
                            }
                        ]
                    }
                },
                "en": {
                    "button1": "Pay Now",
                    "button2": "Main Menu",
                    "button3": "Back to List",
                    "text": "*Amount:* {{Amount}}\n*Vehicle Registration:* {{VehicleRegistration}}\n*Notice Number:* {{NoticeNumber}}\n*Offence Date:* {{OffenceDate}}"
                }
            }
        },
        "templatesList": [
            "fine_not_found",
            "faq_my_vehicle_not_driver",
            "querying_fine_details_waiting",
            "pay_your_fine",
            "paynow_express_payment",
            "main_nextfines",
            "main_image_file",
            "main_payment_info_allowedreason",
            "faq_dispute",
            "main_finedetail_1",
            "main_image_placeholder",
            "goodbye",
            "enter_digit_number",
            "connect_agent",
            "get_started",
            "select_the_option",
            "enter_digit_number_error",
            "main_3_1_1_1_1_3",
            "welocme",
            "main_3_1_1_1_1",
            "main_1_0",
            "main_3_error",
            "main_3_1",
            "main_1",
            "main_3_1_1_0",
            "main_3",
            "fines_pdf_file",
            "welcomeMessage",
            "main_0_0_pdf",
            "main_0_0",
            "main_2_2",
            "main_3_1_1_1_0_0",
            "main_2",
            "main_2_1",
            "querying_for_fines",
            "sendwindowopener_template",
            "fines_info",
            "main_3_1_1_1_1_2",
            "main_1_3",
            "main_pdf_placeholder",
            "main_1_2",
            "main_1_1",
            "main_3_1_1_1_1_1",
            "faq_other_queries",
            "main_1_2_1",
            "main_3_1_1",
            "main_3_1_3",
            "main_3_1_2",
            "main_3_1_1_1_0",
            "main_3_1_1_1",
            "fines_not_found",
            "faq_representations",
            "errorMessage",
            "faq_representations_contacts",
            "faq_my_vehicle_not_driver_contacts",
            "registration_image_file"
        ],
        "userID": "userID",
        "userIDType": "msg",
        "traceID": "traceID",
        "traceIDType": "msg",
        "useTimer": false,
        "timer": "",
        "outputs": 3,
        "jsonToCreate": "{\"text\":\"{{text}}\",\"data\":{\"interactive\":{\"type\":\"button\",\"buttons\":[{\"title\":\"{{button1}}\"},{\"title\":\"{{button2}}\"},{\"title\":\"{{button3}}\"}]}},\"en\":{\"button1\":\"Pay Now\",\"button2\":\"FAQ\",\"button3\":\"Back to List\",\"text\":\"*Amount:* {{Amount}}\\n*Vehicle Registration:* {{VehicleRegistration}}\\n*Notice Number:* {{NoticeNumber}}\\n*Offence Date:* {{OffenceDate}}\"}}",
        "jsonToCreateType": "json",
        "templateDescriptionButtonsContainerToCreate": [],
        "templateDesciptionDetailsToCreate": "main",
        "templateDesciptionTextToCreate": "",
        "templateIdToCreate": "fines_info",
        "templateGroupToCreate": "main",
        "currentTemplateDescription": {
            "details": "main"
        },
        "currentTemplateGroup": "main",
        "currentTemplateTimer": "",
        "currentTemplateType": "standard",
        "jsonToEdit": "{\"text\":\"{{text}}\",\"data\":{\"interactive\":{\"type\":\"button\",\"buttons\":[{\"title\":\"{{button1}}\"},{\"title\":\"{{button2}}\"},{\"title\":\"{{button3}}\"}]}},\"en\":{\"button1\":\"Pay Now\",\"button2\":\"Main Menu\",\"button3\":\"Back to List\",\"text\":\"*Amount:* {{Amount}}\\n*Vehicle Registration:* {{VehicleRegistration}}\\n*Notice Number:* {{NoticeNumber}}\\n*Offence Date:* {{OffenceDate}}\"}}",
        "jsonToEditType": "json",
        "templateIdToEdit": "fines_info",
        "templateDescriptionButtonsContainerToEdit": [],
        "templateDesciptionDetailsToEdit": "main",
        "templateDesciptionTextToEdit": "",
        "x": 4180,
        "y": 280,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "b9767f6f358bcccd",
        "type": "send-message",
        "z": "8851dd36bcc9afaa",
        "isTimerUsed": false,
        "language": "lang",
        "languageType": "msg",
        "messageOption": "",
        "messageID": "",
        "messageIDType": "str",
        "name": "fines_pdf_file",
        "props": {
            "": [],
            "welcomeMessage": [],
            "main_3_1_1_1_1": [
                {
                    "property": "Amount",
                    "value": "Amount",
                    "valueType": "msg"
                },
                {
                    "property": "VehicleRegistration",
                    "value": "VehicleRegistration",
                    "valueType": "msg"
                },
                {
                    "property": "NoticeNumber",
                    "value": "NoticeNumber",
                    "valueType": "msg"
                },
                {
                    "property": "OffenceDate",
                    "value": "OffenceDate",
                    "valueType": "msg"
                }
            ],
            "main_3_1_1_1_0_0": [
                {
                    "property": "text",
                    "value": "fileUrl",
                    "valueType": "msg"
                }
            ],
            "fines_pdf_file": [
                {
                    "property": "pdfUrl",
                    "value": "fileUrl",
                    "valueType": "msg"
                }
            ]
        },
        "templateId": "fines_pdf_file",
        "templateIdToDelete": "",
        "templatesJsons": {
            "welcomeMessage": {
                "text": "{{text}}",
                "en": {
                    "text": "*New Traffic Fine Notification from Ekurhuleni\nMetro Police Department*\nPlease take note that a new traffic fine (REF:\nC1/93563/808/187933) has been issued against ID\nending 51.\nFor more information or options to pay the fine\nplease reply to this message and our friendly\nChatbot, Traffic Officer Buddy will gladly assist you.\nAlternatively log onto payCity.co.za for more\ninformation and options to pay.\n1. Pay Fine\n2. More Options\n3. View/Query all my fines from Ekurhuleni"
                }
            },
            "main_3_1_1_1_1": {
                "text": "{{text}}",
                "data": {
                    "interactive": {
                        "type": "button",
                        "buttons": [
                            {
                                "title": "{{button1}}"
                            },
                            {
                                "title": "{{button2}}"
                            },
                            {
                                "title": "{{button3}}"
                            }
                        ]
                    }
                },
                "en": {
                    "button1": "Pay Now",
                    "button2": "FAQ",
                    "button3": "Back to List",
                    "text": "Amount: {{Amount}}\nVehicle Registration: {{VehicleRegistration}}\nNotice Number: {{NoticeNumber}}\nOffence Date: {{OffenceDate}}"
                }
            },
            "main_3_1_1_1": {
                "text": "{{text}}",
                "en": {
                    "text": "Please select Fine (list of all fines):\n1. CA 687666 - R500\n2. CA 000997 - R1100\n3. CY 500000 - R750"
                }
            },
            "main_3_1_1_1_0_0": {
                "pdfUrl": "{{pdfUrl}}",
                "en": {
                    "pdfUrl": "{{text}}"
                }
            },
            "fines_pdf_file": {
                "pdfUrl": "{{pdfUrl}}"
            }
        },
        "templatesList": [
            "fine_not_found",
            "faq_my_vehicle_not_driver",
            "querying_fine_details_waiting",
            "pay_your_fine",
            "paynow_express_payment",
            "main_nextfines",
            "main_image_file",
            "main_payment_info_allowedreason",
            "faq_dispute",
            "main_finedetail_1",
            "main_image_placeholder",
            "goodbye",
            "enter_digit_number",
            "connect_agent",
            "get_started",
            "select_the_option",
            "enter_digit_number_error",
            "main_3_1_1_1_1_3",
            "welocme",
            "main_3_1_1_1_1",
            "main_1_0",
            "main_3_error",
            "main_3_1",
            "main_1",
            "main_3_1_1_0",
            "main_3",
            "fines_pdf_file",
            "welcomeMessage",
            "main_0_0_pdf",
            "main_0_0",
            "main_2_2",
            "main_3_1_1_1_0_0",
            "main_2",
            "main_2_1",
            "querying_for_fines",
            "sendwindowopener_template",
            "fines_info",
            "main_3_1_1_1_1_2",
            "main_1_3",
            "main_pdf_placeholder",
            "main_1_2",
            "main_1_1",
            "main_3_1_1_1_1_1",
            "faq_other_queries",
            "main_1_2_1",
            "main_3_1_1",
            "main_3_1_3",
            "main_3_1_2",
            "main_3_1_1_1_0",
            "main_3_1_1_1",
            "fines_not_found",
            "faq_representations",
            "errorMessage",
            "faq_representations_contacts",
            "faq_my_vehicle_not_driver_contacts",
            "registration_image_file"
        ],
        "userID": "userID",
        "userIDType": "msg",
        "traceID": "traceID",
        "traceIDType": "msg",
        "useTimer": false,
        "timer": "",
        "outputs": 3,
        "jsonToCreate": "{\"pdfUrl\":\"{{pdfUrl}}\",\"en\":{\"pdfUrl\":\"{{text}}\"}}",
        "jsonToCreateType": "json",
        "templateDescriptionButtonsContainerToCreate": [],
        "templateDesciptionDetailsToCreate": "main",
        "templateDesciptionTextToCreate": "",
        "templateIdToCreate": "fines_pdf_file",
        "templateGroupToCreate": "main",
        "currentTemplateDescription": {
            "details": "main"
        },
        "currentTemplateGroup": "main",
        "currentTemplateTimer": null,
        "currentTemplateType": "standard",
        "jsonToEdit": "{\"pdfUrl\":\"{{pdfUrl}}\"}",
        "jsonToEditType": "json",
        "templateIdToEdit": "fines_pdf_file",
        "templateDescriptionButtonsContainerToEdit": [],
        "templateDesciptionDetailsToEdit": "main",
        "templateDesciptionTextToEdit": "",
        "x": 3830,
        "y": 480,
        "wires": [
            [
                "e2f5d162cc6280f2"
            ],
            [
                "e2f5d162cc6280f2"
            ],
            [
                "e2f5d162cc6280f2"
            ]
        ]
    },
    {
        "id": "1daa1a2d4dbc0f3c",
        "type": "delay",
        "z": "8851dd36bcc9afaa",
        "name": "",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 4020,
        "y": 260,
        "wires": [
            [
                "198a408a9796d1bd"
            ]
        ]
    },
    {
        "id": "7454c87e61fa5480",
        "type": "delay",
        "z": "8851dd36bcc9afaa",
        "name": "",
        "pauseType": "delay",
        "timeout": "5",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 4000,
        "y": 380,
        "wires": [
            [
                "2a91271c9dbf2b61"
            ]
        ]
    },
    {
        "id": "6668e1e86e097f95",
        "type": "send-message",
        "z": "8851dd36bcc9afaa",
        "isTimerUsed": false,
        "language": "lang",
        "languageType": "msg",
        "messageOption": "",
        "messageID": "",
        "messageIDType": "str",
        "name": "main_pdf_placeholder",
        "props": {
            "": [],
            "welcomeMessage": [],
            "main_3_1_1_1_1": [
                {
                    "property": "Amount",
                    "value": "Amount",
                    "valueType": "msg"
                },
                {
                    "property": "VehicleRegistration",
                    "value": "VehicleRegistration",
                    "valueType": "msg"
                },
                {
                    "property": "NoticeNumber",
                    "value": "NoticeNumber",
                    "valueType": "msg"
                },
                {
                    "property": "OffenceDate",
                    "value": "OffenceDate",
                    "valueType": "msg"
                }
            ],
            "main_3_1_1_1_0_0": [
                {
                    "property": "text",
                    "value": "text",
                    "valueType": "msg"
                }
            ],
            "main_image_file": [
                {
                    "property": "text",
                    "value": "fileUrl",
                    "valueType": "msg"
                }
            ],
            "main_image_placeholder": [],
            "main_pdf_placeholder": []
        },
        "templateId": "main_pdf_placeholder",
        "templateIdToDelete": "",
        "templatesJsons": {
            "welcomeMessage": {
                "text": "{{text}}",
                "en": {
                    "text": "*New Traffic Fine Notification from Ekurhuleni\nMetro Police Department*\nPlease take note that a new traffic fine (REF:\nC1/93563/808/187933) has been issued against ID\nending 51.\nFor more information or options to pay the fine\nplease reply to this message and our friendly\nChatbot, Traffic Officer Buddy will gladly assist you.\nAlternatively log onto payCity.co.za for more\ninformation and options to pay.\n1. Pay Fine\n2. More Options\n3. View/Query all my fines from Ekurhuleni"
                }
            },
            "main_3_1_1_1_1": {
                "text": "{{text}}",
                "data": {
                    "interactive": {
                        "type": "button",
                        "buttons": [
                            {
                                "title": "{{button1}}"
                            },
                            {
                                "title": "{{button2}}"
                            },
                            {
                                "title": "{{button3}}"
                            }
                        ]
                    }
                },
                "en": {
                    "button1": "Pay Now",
                    "button2": "FAQ",
                    "button3": "Back to List",
                    "text": "Amount: {{Amount}}\nVehicle Registration: {{VehicleRegistration}}\nNotice Number: {{NoticeNumber}}\nOffence Date: {{OffenceDate}}"
                }
            },
            "main_3_1_1_1": {
                "text": "{{text}}",
                "en": {
                    "text": "Please select Fine (list of all fines):\n1. CA 687666 - R500\n2. CA 000997 - R1100\n3. CY 500000 - R750"
                }
            },
            "main_3_1_1_1_0_0": {
                "pdfUrl": "{{pdfUrl}}",
                "en": {
                    "pdfUrl": "{{text}}"
                }
            },
            "main_image_file": {
                "imageUrl": "{{imageUrl}}",
                "en": {
                    "imageUrl": "{{text}}"
                }
            },
            "main_image_placeholder": {
                "text": "{{text}}",
                "en": {
                    "text": "Placeholder image"
                }
            },
            "main_pdf_placeholder": {
                "text": "{{text}}",
                "en": {
                    "text": "Placeholder PDF"
                }
            }
        },
        "templatesList": [
            "fine_not_found",
            "faq_representations",
            "faq_my_vehicle_not_driver",
            "querying_fine_details_waiting",
            "paynow_express_payment",
            "pay_your_fine",
            "main_nextfines",
            "main_image_file",
            "main_payment_info_allowedreason",
            "faq_dispute",
            "main_finedetail_1",
            "get_started",
            "main_image_placeholder",
            "goodbye",
            "enter_digit_number",
            "select_the_option",
            "connect_agent",
            "enter_digit_number_error",
            "main_3_1_1_1_1_3",
            "welocme",
            "main_3_1_1_1_1",
            "main_1_0",
            "main_3_error",
            "main_3_1",
            "main_1",
            "main_3_1_1_0",
            "main_3",
            "fines_pdf_file",
            "welcomeMessage",
            "main_0_0_pdf",
            "main_0_0",
            "main_2_2",
            "main_3_1_1_1_0_0",
            "main_2",
            "main_2_1",
            "querying_for_fines",
            "sendwindowopener_template",
            "fines_info",
            "main_3_1_1_1_1_2",
            "main_1_3",
            "main_pdf_placeholder",
            "main_1_2",
            "main_1_1",
            "main_3_1_1_1_1_1",
            "faq_other_queries",
            "main_1_2_1",
            "main_3_1_1",
            "main_3_1_3",
            "main_3_1_2",
            "main_3_1_1_1_0",
            "main_3_1_1_1",
            "fines_not_found",
            "errorMessage",
            "faq_representations_contacts",
            "faq_my_vehicle_not_driver_contacts",
            "registration_image_file"
        ],
        "userID": "userID",
        "userIDType": "msg",
        "traceID": "traceID",
        "traceIDType": "msg",
        "useTimer": false,
        "timer": "",
        "outputs": 3,
        "jsonToCreate": "{\"text\":\"{{text}}\",\"en\":{\"text\":\"Placeholder PDF\"}}",
        "jsonToCreateType": "json",
        "templateDescriptionButtonsContainerToCreate": [],
        "templateDesciptionDetailsToCreate": "main",
        "templateDesciptionTextToCreate": "",
        "templateIdToCreate": "main_pdf_placeholder",
        "templateGroupToCreate": "main",
        "currentTemplateDescription": {
            "details": "main"
        },
        "currentTemplateGroup": "main",
        "currentTemplateType": "standard",
        "jsonToEdit": "{\"text\":\"{{text}}\",\"en\":{\"text\":\"Placeholder PDF\"}}",
        "jsonToEditType": "json",
        "templateIdToEdit": "main_pdf_placeholder",
        "templateDescriptionButtonsContainerToEdit": [],
        "templateDesciptionDetailsToEdit": "main",
        "templateDesciptionTextToEdit": "",
        "x": 2640,
        "y": 160,
        "wires": [
            [
                "3e9622742af18397"
            ],
            [],
            []
        ]
    },
    {
        "id": "ff1c98bd8073f13c",
        "type": "send-message",
        "z": "8851dd36bcc9afaa",
        "isTimerUsed": false,
        "language": "lang",
        "languageType": "msg",
        "messageOption": "",
        "messageID": "",
        "messageIDType": "str",
        "name": "main_pdf_placeholder",
        "props": {
            "": [],
            "welcomeMessage": [],
            "main_3_1_1_1_1": [
                {
                    "property": "Amount",
                    "value": "Amount",
                    "valueType": "msg"
                },
                {
                    "property": "VehicleRegistration",
                    "value": "VehicleRegistration",
                    "valueType": "msg"
                },
                {
                    "property": "NoticeNumber",
                    "value": "NoticeNumber",
                    "valueType": "msg"
                },
                {
                    "property": "OffenceDate",
                    "value": "OffenceDate",
                    "valueType": "msg"
                }
            ],
            "main_3_1_1_1_0_0": [
                {
                    "property": "text",
                    "value": "text",
                    "valueType": "msg"
                }
            ],
            "main_image_file": [
                {
                    "property": "text",
                    "value": "fileUrl",
                    "valueType": "msg"
                }
            ],
            "main_image_placeholder": [],
            "main_pdf_placeholder": []
        },
        "templateId": "main_pdf_placeholder",
        "templateIdToDelete": "",
        "templatesJsons": {
            "welcomeMessage": {
                "text": "{{text}}",
                "en": {
                    "text": "*New Traffic Fine Notification from Ekurhuleni\nMetro Police Department*\nPlease take note that a new traffic fine (REF:\nC1/93563/808/187933) has been issued against ID\nending 51.\nFor more information or options to pay the fine\nplease reply to this message and our friendly\nChatbot, Traffic Officer Buddy will gladly assist you.\nAlternatively log onto payCity.co.za for more\ninformation and options to pay.\n1. Pay Fine\n2. More Options\n3. View/Query all my fines from Ekurhuleni"
                }
            },
            "main_3_1_1_1_1": {
                "text": "{{text}}",
                "data": {
                    "interactive": {
                        "type": "button",
                        "buttons": [
                            {
                                "title": "{{button1}}"
                            },
                            {
                                "title": "{{button2}}"
                            },
                            {
                                "title": "{{button3}}"
                            }
                        ]
                    }
                },
                "en": {
                    "button1": "Pay Now",
                    "button2": "FAQ",
                    "button3": "Back to List",
                    "text": "Amount: {{Amount}}\nVehicle Registration: {{VehicleRegistration}}\nNotice Number: {{NoticeNumber}}\nOffence Date: {{OffenceDate}}"
                }
            },
            "main_3_1_1_1": {
                "text": "{{text}}",
                "en": {
                    "text": "Please select Fine (list of all fines):\n1. CA 687666 - R500\n2. CA 000997 - R1100\n3. CY 500000 - R750"
                }
            },
            "main_3_1_1_1_0_0": {
                "pdfUrl": "{{pdfUrl}}",
                "en": {
                    "pdfUrl": "{{text}}"
                }
            },
            "main_image_file": {
                "imageUrl": "{{imageUrl}}",
                "en": {
                    "imageUrl": "{{text}}"
                }
            },
            "main_image_placeholder": {
                "text": "{{text}}",
                "en": {
                    "text": "Placeholder image"
                }
            },
            "main_pdf_placeholder": {
                "text": "{{text}}",
                "en": {
                    "text": "Placeholder PDF"
                }
            }
        },
        "templatesList": [
            "fine_not_found",
            "faq_representations",
            "faq_my_vehicle_not_driver",
            "querying_fine_details_waiting",
            "paynow_express_payment",
            "pay_your_fine",
            "main_nextfines",
            "main_image_file",
            "main_payment_info_allowedreason",
            "faq_dispute",
            "main_finedetail_1",
            "get_started",
            "main_image_placeholder",
            "goodbye",
            "enter_digit_number",
            "select_the_option",
            "connect_agent",
            "enter_digit_number_error",
            "main_3_1_1_1_1_3",
            "welocme",
            "main_3_1_1_1_1",
            "main_1_0",
            "main_3_error",
            "main_3_1",
            "main_1",
            "main_3_1_1_0",
            "main_3",
            "fines_pdf_file",
            "welcomeMessage",
            "main_0_0_pdf",
            "main_0_0",
            "main_2_2",
            "main_3_1_1_1_0_0",
            "main_2",
            "main_2_1",
            "querying_for_fines",
            "sendwindowopener_template",
            "fines_info",
            "main_3_1_1_1_1_2",
            "main_1_3",
            "main_pdf_placeholder",
            "main_1_2",
            "main_1_1",
            "main_3_1_1_1_1_1",
            "faq_other_queries",
            "main_1_2_1",
            "main_3_1_1",
            "main_3_1_3",
            "main_3_1_2",
            "main_3_1_1_1_0",
            "main_3_1_1_1",
            "fines_not_found",
            "errorMessage",
            "faq_representations_contacts",
            "faq_my_vehicle_not_driver_contacts",
            "registration_image_file"
        ],
        "userID": "userID",
        "userIDType": "msg",
        "traceID": "traceID",
        "traceIDType": "msg",
        "useTimer": false,
        "timer": "",
        "outputs": 3,
        "jsonToCreate": "{\"text\":\"{{text}}\",\"en\":{\"text\":\"Placeholder PDF\"}}",
        "jsonToCreateType": "json",
        "templateDescriptionButtonsContainerToCreate": [],
        "templateDesciptionDetailsToCreate": "main",
        "templateDesciptionTextToCreate": "",
        "templateIdToCreate": "main_pdf_placeholder",
        "templateGroupToCreate": "main",
        "currentTemplateDescription": {
            "details": "main"
        },
        "currentTemplateGroup": "main",
        "currentTemplateTimer": null,
        "currentTemplateType": "standard",
        "jsonToEdit": "{\"text\":\"{{text}}\",\"en\":{\"text\":\"Placeholder PDF\"}}",
        "jsonToEditType": "json",
        "templateIdToEdit": "main_pdf_placeholder",
        "templateDescriptionButtonsContainerToEdit": [],
        "templateDesciptionDetailsToEdit": "main",
        "templateDesciptionTextToEdit": "",
        "x": 3740,
        "y": 640,
        "wires": [
            [
                "b9767f6f358bcccd"
            ],
            [],
            []
        ]
    },
    {
        "id": "826acc76b8098230",
        "type": "debug",
        "z": "8851dd36bcc9afaa",
        "name": "debug 53",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 3380,
        "y": 360,
        "wires": []
    },
    {
        "id": "011a860e725989d1",
        "type": "debug",
        "z": "8851dd36bcc9afaa",
        "name": "debug 54",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 3380,
        "y": 560,
        "wires": []
    },
    {
        "id": "1d85eda84e0daff7",
        "type": "debug",
        "z": "8851dd36bcc9afaa",
        "name": "debug 55",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "noticeFileDetail",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1800,
        "y": 400,
        "wires": []
    },
    {
        "id": "e6181acf87ee7f26",
        "type": "switch",
        "z": "8851dd36bcc9afaa",
        "name": "state",
        "property": "state",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "fines_info",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "fines_pdf_file",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "main_image_file",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "main_payment_info_allowedreason",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 5,
        "x": 890,
        "y": 600,
        "wires": [
            [
                "fe4deef7b49a8203"
            ],
            [
                "fe4deef7b49a8203"
            ],
            [
                "fe4deef7b49a8203"
            ],
            [
                "fe4deef7b49a8203"
            ],
            [
                "f118b63a591c4105",
                "5a05ddf65630b1f5"
            ]
        ]
    },
    {
        "id": "706dbf5e040585a5",
        "type": "send-message",
        "z": "8851dd36bcc9afaa",
        "isTimerUsed": false,
        "language": "lang",
        "languageType": "msg",
        "messageOption": "",
        "messageID": "",
        "messageIDType": "str",
        "name": "paynow_express_payment",
        "props": {
            "": [],
            "paynow_express_payment": [
                {
                    "property": "ExpressLink",
                    "value": "ExpressLink",
                    "valueType": "msg"
                }
            ]
        },
        "templateId": "paynow_express_payment",
        "templateIdToDelete": "",
        "templatesJsons": {
            "paynow_express_payment": {
                "text": "{{text}}",
                "data": {
                    "interactive": {
                        "type": "button",
                        "buttons": [
                            {
                                "title": "{{button1}}"
                            },
                            {
                                "title": "{{button2}}"
                            }
                        ]
                    }
                },
                "en": {
                    "button1": "Main Menu",
                    "button2": "Back to List",
                    "text": "Please pay your notice using the link below:\n\n{{ExpressLink}}"
                }
            }
        },
        "templatesList": [
            "fine_not_found",
            "faq_my_vehicle_not_driver",
            "querying_fine_details_waiting",
            "pay_your_fine",
            "paynow_express_payment",
            "main_nextfines",
            "main_image_file",
            "main_payment_info_allowedreason",
            "faq_dispute",
            "main_finedetail_1",
            "main_image_placeholder",
            "goodbye",
            "enter_digit_number",
            "connect_agent",
            "get_started",
            "select_the_option",
            "enter_digit_number_error",
            "main_3_1_1_1_1_3",
            "welocme",
            "main_3_1_1_1_1",
            "main_1_0",
            "main_3_error",
            "main_3_1",
            "main_1",
            "main_3_1_1_0",
            "main_3",
            "fines_pdf_file",
            "welcomeMessage",
            "main_0_0_pdf",
            "main_0_0",
            "main_2_2",
            "main_3_1_1_1_0_0",
            "main_2",
            "main_2_1",
            "querying_for_fines",
            "sendwindowopener_template",
            "fines_info",
            "main_3_1_1_1_1_2",
            "main_1_3",
            "main_pdf_placeholder",
            "main_1_2",
            "main_1_1",
            "main_3_1_1_1_1_1",
            "faq_other_queries",
            "main_1_2_1",
            "main_3_1_1",
            "main_3_1_3",
            "main_3_1_2",
            "main_3_1_1_1_0",
            "main_3_1_1_1",
            "fines_not_found",
            "faq_representations",
            "errorMessage",
            "faq_representations_contacts",
            "faq_my_vehicle_not_driver_contacts",
            "registration_image_file"
        ],
        "userID": "userID",
        "userIDType": "msg",
        "traceID": "traceID",
        "traceIDType": "msg",
        "useTimer": false,
        "timer": "",
        "outputs": 3,
        "jsonToCreate": "{\"text\":\"{{text}}\",\"data\":{\"interactive\":{\"type\":\"button\",\"buttons\":[{\"title\":\"{{button1}}\"},{\"title\":\"{{button2}}\"}]}},\"en\":{\"button1\":\"Main Menu\",\"button2\":\"Back to List\",\"text\":\"Please pay your fine using the link below:\\n\\n{{ExpressLink}}\\n\\nYou can also pay at any of the following locations: Spar, Shoprite & Checkers & PnP.\"}}",
        "jsonToCreateType": "json",
        "templateDescriptionButtonsContainerToCreate": [],
        "templateDesciptionDetailsToCreate": "main",
        "templateDesciptionTextToCreate": "",
        "templateIdToCreate": "paynow_express_payment",
        "templateGroupToCreate": "main",
        "currentTemplateDescription": {
            "details": "main"
        },
        "currentTemplateGroup": "main",
        "currentTemplateTimer": "",
        "currentTemplateType": "standard",
        "jsonToEdit": "{\"text\":\"{{text}}\",\"data\":{\"interactive\":{\"type\":\"button\",\"buttons\":[{\"title\":\"{{button1}}\"},{\"title\":\"{{button2}}\"}]}},\"en\":{\"button1\":\"Main Menu\",\"button2\":\"Back to List\",\"text\":\"Please pay your notice using the link below:\\n\\n{{ExpressLink}}\"}}",
        "jsonToEditType": "json",
        "templateIdToEdit": "paynow_express_payment",
        "templateDescriptionButtonsContainerToEdit": [],
        "templateDesciptionDetailsToEdit": "main",
        "templateDesciptionTextToEdit": "",
        "x": 1320,
        "y": 700,
        "wires": [
            [
                "84421ae6a45aa516"
            ],
            [],
            []
        ]
    },
    {
        "id": "f118b63a591c4105",
        "type": "send-message",
        "z": "8851dd36bcc9afaa",
        "isTimerUsed": false,
        "language": "lang",
        "languageType": "msg",
        "messageOption": "",
        "messageID": "",
        "messageIDType": "str",
        "name": "querying_fine_details_waiting",
        "props": {
            "querying_fine_details_waiting": []
        },
        "templateId": "querying_fine_details_waiting",
        "templateIdToDelete": "",
        "templatesJsons": {
            "querying_fine_details_waiting": {
                "text": "{{text}}",
                "en": {
                    "text": "Busy loading ⌛️ we are retrieving the original offence image, PDF traffic notice & notice details"
                }
            }
        },
        "templatesList": [
            "fine_not_found",
            "faq_representations",
            "faq_my_vehicle_not_driver",
            "querying_fine_details_waiting",
            "paynow_express_payment",
            "pay_your_fine",
            "main_nextfines",
            "main_image_file",
            "main_payment_info_allowedreason",
            "faq_dispute",
            "main_finedetail_1",
            "get_started",
            "main_image_placeholder",
            "goodbye",
            "enter_digit_number",
            "select_the_option",
            "connect_agent",
            "enter_digit_number_error",
            "main_3_1_1_1_1_3",
            "welocme",
            "main_3_1_1_1_1",
            "main_1_0",
            "main_3_error",
            "main_3_1",
            "main_1",
            "main_3_1_1_0",
            "main_3",
            "fines_pdf_file",
            "welcomeMessage",
            "main_0_0_pdf",
            "main_0_0",
            "main_2_2",
            "main_3_1_1_1_0_0",
            "main_2",
            "main_2_1",
            "querying_for_fines",
            "sendwindowopener_template",
            "fines_info",
            "main_3_1_1_1_1_2",
            "main_1_3",
            "main_pdf_placeholder",
            "main_1_2",
            "main_1_1",
            "main_3_1_1_1_1_1",
            "faq_other_queries",
            "main_1_2_1",
            "main_3_1_1",
            "main_3_1_3",
            "main_3_1_2",
            "main_3_1_1_1_0",
            "main_3_1_1_1",
            "fines_not_found",
            "errorMessage",
            "faq_representations_contacts",
            "faq_my_vehicle_not_driver_contacts",
            "registration_image_file"
        ],
        "userID": "userID",
        "userIDType": "msg",
        "traceID": "traceID",
        "traceIDType": "msg",
        "useTimer": false,
        "timer": "",
        "outputs": 3,
        "jsonToCreate": "{\"text\":\"{{text}}\",\"en\":{\"text\":\"Busy loading ⌛️ we are retrieving the original offence image, traffic fine notice & fine notice\"}}",
        "jsonToCreateType": "json",
        "templateDescriptionButtonsContainerToCreate": [],
        "templateDesciptionDetailsToCreate": "main",
        "templateDesciptionTextToCreate": "",
        "templateIdToCreate": "querying_fine_details_waiting",
        "templateGroupToCreate": "main",
        "currentTemplateDescription": {
            "details": "main"
        },
        "currentTemplateGroup": "main",
        "currentTemplateTimer": "",
        "currentTemplateType": "standard",
        "jsonToEdit": "{\"text\":\"{{text}}\",\"en\":{\"text\":\"Busy loading ⌛️ we are retrieving the original offence image, PDF traffic notice & notice details\"}}",
        "jsonToEditType": "json",
        "templateIdToEdit": "querying_fine_details_waiting",
        "templateDescriptionButtonsContainerToEdit": [],
        "templateDesciptionDetailsToEdit": "main",
        "templateDesciptionTextToEdit": "",
        "x": 1250,
        "y": 600,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "5a05ddf65630b1f5",
        "type": "function",
        "z": "8851dd36bcc9afaa",
        "name": "set Finedetails",
        "func": "msg.service = \"CustomerAPI\"\n\nmsg.method = \"POST\"\nmsg.url = `${msg.customerApi}/settings`;\nmsg.headers = {\n    \"authorization\": msg.customerApiKey,\n    \"x-trace-id\": msg.traceID,\n    \"x-user-id\": msg.userID\n}\n\nmsg.payload = {\n    \"FineDetails\": msg.text\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1200,
        "y": 380,
        "wires": [
            [
                "5ffd4b84c0af2a53",
                "0988b3333a1388b5"
            ]
        ]
    },
    {
        "id": "0988b3333a1388b5",
        "type": "subflow:8e9dd0b44d3c40ea",
        "z": "8851dd36bcc9afaa",
        "name": "",
        "x": 1358.5999755859375,
        "y": 357.79998779296875,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "84421ae6a45aa516",
        "type": "function",
        "z": "8851dd36bcc9afaa",
        "name": "set Finedetails",
        "func": "msg.service = \"CustomerAPI\"\n\nmsg.method = \"POST\"\nmsg.url = `${msg.customerApi}/settings`;\nmsg.headers = {\n    \"authorization\": msg.customerApiKey,\n    \"x-trace-id\": msg.traceID,\n    \"x-user-id\": msg.userID\n}\n\nmsg.payload = {\n    \"FineDetails\": \"\"\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1500,
        "y": 600,
        "wires": [
            [
                "066873410d01d6e6"
            ]
        ]
    },
    {
        "id": "066873410d01d6e6",
        "type": "subflow:8e9dd0b44d3c40ea",
        "z": "8851dd36bcc9afaa",
        "name": "",
        "x": 1560,
        "y": 680,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "10cd3c890bfd6a2e",
        "type": "switch",
        "z": "8851dd36bcc9afaa",
        "name": "state",
        "property": "replyType",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "unknown",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 710,
        "y": 460,
        "wires": [
            [
                "71615fd36e87c75c"
            ],
            [
                "726e2ecb47de0fc2"
            ]
        ]
    },
    {
        "id": "fe4deef7b49a8203",
        "type": "function",
        "z": "8851dd36bcc9afaa",
        "name": "set Finedetails",
        "func": "msg.method = \"POST\"\nmsg.url = `https://swee.sh/yourls-api.php`;\nmsg.headers = {};\nmsg.headers['Content-Type'] = 'application/x-www-form-urlencoded';\nmsg.payload = {\n    \"url\": msg.ExpressLink,\n    \"format\": \"json\",\n    \"action\": \"shorturl\",\n    \"username\": \"janizol\",\n    \"password\": \"uaheERh1ZA!22@f\"\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1040,
        "y": 680,
        "wires": [
            [
                "de246fc00a4380c2"
            ]
        ]
    },
    {
        "id": "de246fc00a4380c2",
        "type": "subflow:8e9dd0b44d3c40ea",
        "z": "8851dd36bcc9afaa",
        "name": "",
        "x": 1100,
        "y": 800,
        "wires": [
            [
                "d27a6980ef7dd0c1",
                "7127a62459bed895"
            ],
            [
                "d27a6980ef7dd0c1",
                "a48bf86b96a56f44"
            ]
        ]
    },
    {
        "id": "d27a6980ef7dd0c1",
        "type": "debug",
        "z": "8851dd36bcc9afaa",
        "name": "debug 61",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1380,
        "y": 880,
        "wires": []
    },
    {
        "id": "a48bf86b96a56f44",
        "type": "link out",
        "z": "8851dd36bcc9afaa",
        "name": "erroe out",
        "mode": "link",
        "links": [
            "a0a45e24a84f7526"
        ],
        "x": 1165,
        "y": 880,
        "wires": []
    },
    {
        "id": "7127a62459bed895",
        "type": "change",
        "z": "8851dd36bcc9afaa",
        "name": "noticeFileDetail",
        "rules": [
            {
                "t": "set",
                "p": "ExpressLink",
                "pt": "msg",
                "to": "msg.ExpressLink",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1340,
        "y": 800,
        "wires": [
            [
                "706dbf5e040585a5"
            ]
        ]
    },
    {
        "id": "abb025ce2df2c81e",
        "type": "debug",
        "z": "8851dd36bcc9afaa",
        "name": "debug 68",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1600,
        "y": 420,
        "wires": []
    },
    {
        "id": "2feac52c66178c48",
        "type": "link in",
        "z": "5aeea1c008d64d4d",
        "name": "consultation in",
        "links": [
            "10f54d76a0a6d7c1",
            "4474fcb737091fec",
            "80c07eab93ed6b8d",
            "d7fcacaedfbaf773",
            "eb8ac7583c8a922d"
        ],
        "x": 335,
        "y": 413,
        "wires": [
            [
                "13c8a807464086b8"
            ]
        ]
    },
    {
        "id": "1a2458c028369a32",
        "type": "subflow:8e9dd0b44d3c40ea",
        "z": "5aeea1c008d64d4d",
        "name": "",
        "x": 1200,
        "y": 420,
        "wires": [
            [
                "e5025e7906b681e5",
                "511f670b6a049284"
            ],
            []
        ]
    },
    {
        "id": "b27e84b77e94c833",
        "type": "function",
        "z": "5aeea1c008d64d4d",
        "name": "create contact",
        "func": "msg.method = \"POST\";\nmsg.url = `${msg.chatwootApiUrl}/accounts/${msg.accountId}/contacts`;\n\nmsg.payload = {\n    \"name\": msg.chatId,\n    \"phone_number\": msg.chatId,\n    \"additional_attributes\": {},\n    \"contact_inboxes\": [\n        {\n            \"source_id\": \"4f8e3124-2beb-450a-a3e6-7fcd92e011c5\",\n            \"inbox\": {\n                \"id\": 0,\n                \"name\": \"string\",\n                \"website_url\": \"string\",\n                \"channel_type\": \"string\",\n                \"avatar_url\": \"string\",\n                \"widget_color\": \"string\",\n                \"website_token\": \"string\",\n                \"enable_auto_assignment\": true,\n                \"web_widget_script\": \"string\",\n                \"welcome_title\": \"string\",\n                \"welcome_tagline\": \"string\",\n                \"greeting_enabled\": true,\n                \"greeting_message\": \"string\"\n            }\n        }\n    ]\n};\nmsg.headers = {};\nmsg.headers['Content-Type'] = 'application/json';\nmsg.headers['api_access_token'] = msg.chatwootApiKey;\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1020,
        "y": 420,
        "wires": [
            [
                "1a2458c028369a32"
            ]
        ]
    },
    {
        "id": "42c8eed4de8d6eee",
        "type": "subflow:8e9dd0b44d3c40ea",
        "z": "5aeea1c008d64d4d",
        "name": "",
        "x": 620,
        "y": 413,
        "wires": [
            [
                "5a58fcee5f2d452c",
                "8a3b35e93f2f4341"
            ],
            [
                "b27e84b77e94c833"
            ]
        ]
    },
    {
        "id": "13c8a807464086b8",
        "type": "function",
        "z": "5aeea1c008d64d4d",
        "name": "get contact",
        "func": "msg.method = \"GET\";\n\n/*if (msg.chatId[0] == '+') {\n    msg.chatId = msg.chatId.substring(1, msg.chatId.length)\n}*/\n\nmsg.url = `${msg.chatwootApiUrl}/accounts/${msg.accountId}/contacts/search?q=${msg.chatId}`;\n\nmsg.payload = {};\nmsg.headers = {};\nmsg.headers['Content-Type'] = 'application/json';\nmsg.headers['api_access_token'] = msg.chatwootApiKey;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 450,
        "y": 413,
        "wires": [
            [
                "42c8eed4de8d6eee"
            ]
        ]
    },
    {
        "id": "5a58fcee5f2d452c",
        "type": "switch",
        "z": "5aeea1c008d64d4d",
        "name": "",
        "property": "payload.payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nempty"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 810,
        "y": 380,
        "wires": [
            [
                "f91a6294b647a157"
            ],
            [
                "b27e84b77e94c833"
            ]
        ]
    },
    {
        "id": "f91a6294b647a157",
        "type": "change",
        "z": "5aeea1c008d64d4d",
        "name": "set contactId",
        "rules": [
            {
                "t": "set",
                "p": "contactId",
                "pt": "msg",
                "to": "payload.payload[0].id",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1010,
        "y": 360,
        "wires": [
            [
                "5a5e34f011033272"
            ]
        ]
    },
    {
        "id": "e5025e7906b681e5",
        "type": "change",
        "z": "5aeea1c008d64d4d",
        "name": "set contactId",
        "rules": [
            {
                "t": "set",
                "p": "contactId",
                "pt": "msg",
                "to": "payload.payload.contact.id",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1390,
        "y": 420,
        "wires": [
            [
                "5a5e34f011033272"
            ]
        ]
    },
    {
        "id": "a3aef217e862e2f1",
        "type": "subflow:8e9dd0b44d3c40ea",
        "z": "5aeea1c008d64d4d",
        "name": "",
        "x": 2300,
        "y": 160,
        "wires": [
            [
                "41ca1d8b6af5e7e7"
            ],
            [
                "84b751732919d6c9"
            ]
        ]
    },
    {
        "id": "0bae5407f26926e8",
        "type": "function",
        "z": "5aeea1c008d64d4d",
        "name": "create message (text)",
        "func": "msg.method = \"POST\";\nmsg.url = `${msg.chatwootApiUrl}/accounts/${msg.accountId}/conversations/${msg.conversationId}/messages`;\n\nmsg.payload = {\n    \"id\": 0,\n    \"content\": msg.text,\n    \"inbox_id\": 0,\n    \"conversation_id\": 0,\n    \"message_type\": 0,\n    \"content_type\": null,\n    \"content_attributes\": {},\n    \"created_at\": 0,\n    \"private\": false,\n    \"sender\": {\n        \"id\": 0,\n        \"name\": \"BotUser\",\n        \"type\": \"contact\"\n    }\n};\nmsg.headers = {};\nmsg.headers['Content-Type'] = 'application/json';\nmsg.headers['api_access_token'] = msg.chatwootApiKey;\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1960,
        "y": 160,
        "wires": [
            [
                "a3aef217e862e2f1"
            ]
        ]
    },
    {
        "id": "8a3b35e93f2f4341",
        "type": "debug",
        "z": "5aeea1c008d64d4d",
        "name": "get contact call",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 840,
        "y": 320,
        "wires": []
    },
    {
        "id": "511f670b6a049284",
        "type": "debug",
        "z": "5aeea1c008d64d4d",
        "name": "create contact call",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1410,
        "y": 460,
        "wires": []
    },
    {
        "id": "41ca1d8b6af5e7e7",
        "type": "debug",
        "z": "5aeea1c008d64d4d",
        "name": "create massage call",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2500,
        "y": 120,
        "wires": []
    },
    {
        "id": "5a5e34f011033272",
        "type": "switch",
        "z": "5aeea1c008d64d4d",
        "name": "isConversationId",
        "property": "customerSettings.conversationId",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nnull"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 1590,
        "y": 360,
        "wires": [
            [
                "ca06bb91e7c9c553"
            ],
            [
                "eabaab29242e4b0e"
            ]
        ]
    },
    {
        "id": "4ff6c505c6e06ecc",
        "type": "function",
        "z": "5aeea1c008d64d4d",
        "name": "set startDialogFlag",
        "func": "msg.service = \"CustomerAPI\"\n\nmsg.method = \"POST\"\nmsg.url = `${msg.customerApi}/settings`;\nmsg.headers = {\n    \"authorization\": msg.customerApiKey,\n    \"x-trace-id\": msg.traceID,\n    \"x-user-id\": msg.userID\n}\n\nmsg.payload = {\n    \"dialogIsActive\": true\n}\n\nreturn msg;\n\n// msg.method = \"GET\";\n// msg.url = `${msg.chatwootApiUrl}/accounts/${msg.accountId}/contacts/search?q=${msg.chatId}`;\n\n// msg.payload = {};\n// msg.headers = {};\n// msg.headers['Content-Type'] = 'application/json';\n// msg.headers['api_access_token'] = msg.chatwootApiKey;\n// return msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2610,
        "y": 300,
        "wires": [
            [
                "665d36cdedf3a79f"
            ]
        ]
    },
    {
        "id": "665d36cdedf3a79f",
        "type": "subflow:8e9dd0b44d3c40ea",
        "z": "5aeea1c008d64d4d",
        "name": "",
        "x": 2820,
        "y": 280,
        "wires": [
            [
                "46b574e94c05a846"
            ],
            []
        ]
    },
    {
        "id": "ca06bb91e7c9c553",
        "type": "switch",
        "z": "5aeea1c008d64d4d",
        "name": "dialogIsActive",
        "property": "msg.customerSettings.dialogIsActive",
        "propertyType": "msg",
        "rules": [
            {
                "t": "true"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 1540,
        "y": 280,
        "wires": [
            [
                "4ad846e40abf36ef"
            ],
            [
                "395abd2722a5a231"
            ]
        ]
    },
    {
        "id": "4a9b2c4d13baa52f",
        "type": "subflow:8e9dd0b44d3c40ea",
        "z": "5aeea1c008d64d4d",
        "name": "",
        "x": 3220,
        "y": 200,
        "wires": [
            [
                "c8ea03353c2c2c8a",
                "49b4e8cc4d6d56b7"
            ],
            [
                "5e06e2d2c8a9751b"
            ]
        ]
    },
    {
        "id": "46b574e94c05a846",
        "type": "function",
        "z": "5aeea1c008d64d4d",
        "name": "create message",
        "func": "msg.method = \"POST\";\nmsg.url = `${msg.chatwootApiUrl}/accounts/${msg.accountId}/conversations/${msg.conversationId}/messages`;\n\nmsg.payload = {\n    \"id\": 0,\n    \"content\": \"New Message from \" + msg.chatId,\n    \"inbox_id\": 0,\n    \"conversation_id\": 0,\n    \"message_type\": 0,\n    \"content_type\": null,\n    \"content_attributes\": {},\n    \"created_at\": 0,\n    \"private\": false,\n    \"sender\": {\n        \"id\": 0,\n        \"name\": \"BotUser\",\n        \"type\": \"contact\"\n    }\n};\nmsg.headers = {};\nmsg.headers['Content-Type'] = 'application/json';\nmsg.headers['api_access_token'] = msg.chatwootApiKey;\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3020,
        "y": 240,
        "wires": [
            [
                "4a9b2c4d13baa52f"
            ]
        ]
    },
    {
        "id": "c8ea03353c2c2c8a",
        "type": "send-message",
        "z": "5aeea1c008d64d4d",
        "isTimerUsed": false,
        "language": "lang",
        "languageType": "msg",
        "messageOption": "",
        "messageID": "",
        "messageIDType": "str",
        "name": "connect_agent",
        "props": {
            "": [],
            "welcomeMessage": [],
            "main_1_1": [],
            "main_1_2": [],
            "main_1_3": [],
            "main_2_2": [],
            "connect_agent": []
        },
        "templateId": "connect_agent",
        "templateIdToDelete": "",
        "templatesJsons": {
            "welcomeMessage": {
                "text": "{{text}}",
                "en": {
                    "text": "*New Traffic Fine Notification from Ekurhuleni\nMetro Police Department*\nPlease take note that a new traffic fine (REF:\nC1/93563/808/187933) has been issued against ID\nending 51.\nFor more information or options to pay the fine\nplease reply to this message and our friendly\nChatbot, Traffic Officer Buddy will gladly assist you.\nAlternatively log onto payCity.co.za for more\ninformation and options to pay.\n1. Pay Fine\n2. More Options\n3. View/Query all my fines from Ekurhuleni"
                }
            },
            "main_1_1": {
                "text": "{{text}}",
                "en": {
                    "text": "Please follow the link below.\nhttps://paynow.paycity.co.za\n1. Back to Payment Options\n2. Main Menu\nYou can also pay at any of the\nfollowing locations: Spar, Shoprite &\nCheckers & Pnp."
                }
            },
            "main_1_2": {
                "text": "{{text}}",
                "en": {
                    "text": "Respond to this message with your query.\nAlternatively, please submit an email to\nqueries@paycity.co.za."
                }
            },
            "main_1_3": {
                "text": "{{text}}",
                "en": {
                    "text": "Please hold while we connect you to an agent in live chat"
                }
            },
            "main_2_2": {
                "text": "{{text}}",
                "en": {
                    "text": "Please hold while we connect you to an agent."
                }
            },
            "connect_agent": {
                "text": "{{text}}",
                "en": {
                    "text": "Please give us a moment while we find an agent available to chat with you.\n\n_Reply with 'Back to bot' if you want to go back to the bot_\n\nNote: our call center hours are from 08:00 to 17:00"
                }
            }
        },
        "templatesList": [
            "fine_not_found",
            "faq_my_vehicle_not_driver",
            "querying_fine_details_waiting",
            "pay_your_fine",
            "paynow_express_payment",
            "main_nextfines",
            "main_image_file",
            "main_payment_info_allowedreason",
            "faq_dispute",
            "main_finedetail_1",
            "connect_agent",
            "main_image_placeholder",
            "goodbye",
            "enter_digit_number",
            "get_started",
            "select_the_option",
            "enter_digit_number_error",
            "main_3_1_1_1_1_3",
            "welocme",
            "main_3_1_1_1_1",
            "main_1_0",
            "main_3_error",
            "main_3_1",
            "main_1",
            "main_3_1_1_0",
            "main_3",
            "fines_pdf_file",
            "welcomeMessage",
            "main_0_0_pdf",
            "main_0_0",
            "main_2_2",
            "main_3_1_1_1_0_0",
            "main_2",
            "main_2_1",
            "querying_for_fines",
            "sendwindowopener_template",
            "fines_info",
            "main_3_1_1_1_1_2",
            "main_1_3",
            "main_pdf_placeholder",
            "main_1_2",
            "main_1_1",
            "main_3_1_1_1_1_1",
            "faq_other_queries",
            "main_1_2_1",
            "main_3_1_1",
            "main_3_1_3",
            "main_3_1_2",
            "main_3_1_1_1_0",
            "main_3_1_1_1",
            "fines_not_found",
            "faq_representations",
            "errorMessage",
            "faq_representations_contacts",
            "faq_my_vehicle_not_driver_contacts",
            "registration_image_file"
        ],
        "userID": "userID",
        "userIDType": "msg",
        "traceID": "traceID",
        "traceIDType": "msg",
        "useTimer": false,
        "timer": "",
        "outputs": 3,
        "jsonToCreate": "{\"text\":\"{{text}}\",\"en\":{\"text\":\"Please hold while we connect you to an agent.\"}}",
        "jsonToCreateType": "json",
        "templateDescriptionButtonsContainerToCreate": [],
        "templateDesciptionDetailsToCreate": "main",
        "templateDesciptionTextToCreate": "",
        "templateIdToCreate": "connect_agent",
        "templateGroupToCreate": "main",
        "currentTemplateDescription": {
            "details": "main"
        },
        "currentTemplateGroup": "main",
        "currentTemplateTimer": "",
        "currentTemplateType": "standard",
        "jsonToEdit": "{\"text\":\"{{text}}\",\"en\":{\"text\":\"Please give us a moment while we find an agent available to chat with you.\\n\\n_Reply with 'Back to bot' if you want to go back to the bot_\\n\\nNote: our call center hours are from 08:00 to 17:00\"}}",
        "jsonToEditType": "json",
        "templateIdToEdit": "connect_agent",
        "templateDescriptionButtonsContainerToEdit": [],
        "templateDesciptionDetailsToEdit": "main",
        "templateDesciptionTextToEdit": "",
        "x": 3420,
        "y": 200,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "ed837016a637de14",
        "type": "switch",
        "z": "5aeea1c008d64d4d",
        "name": "checkReplyType",
        "property": "replyType",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "image",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "document",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 1640,
        "y": 140,
        "wires": [
            [
                "777659050695ff89",
                "90ec6d6167848242"
            ],
            [
                "4e7ee8d5cdb84780"
            ],
            [
                "0bae5407f26926e8"
            ]
        ]
    },
    {
        "id": "6a0ea0c142215c5b",
        "type": "function",
        "z": "5aeea1c008d64d4d",
        "name": "create message (image/pdf)",
        "func": "msg.method = \"POST\";\nmsg.url = `${msg.chatwootApiUrl}/accounts/${msg.accountId}/conversations/${msg.conversationId}/messages`;\nmsg.payload = {\n    'attachments[]': {\n        'value': msg.payload,\n        'options': {\n            'filename': 'New file'+msg.fileExt\n        }\n    },\n    \"message_type\": \"incoming\",\n}\n\n\nmsg.headers = {};\nmsg.headers['Content-Type'] = \"multipart/form-data\";\nmsg.headers['api_access_token'] = msg.chatwootApiKey;\n\n// msg.payload = {\n//     \"id\": 0,\n//     \"content\": \"image\",\n//     \"inbox_id\": 0,\n//     \"conversation_id\": 0,\n//     \"message_type\": 0,\n//     \"content_type\": \"multipart/form-data\",\n//     \"content_attributes\": {},\n//     \"attachments\": [\n//         binaryFile\n//     ],\n//     \"created_at\": 0,\n//     \"private\": false,\n//     \"sender\": {\n//         \"id\": 0,\n//         \"name\": \"BotUser\",\n//         \"type\": \"contact\"\n//     }\n// };\n\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2340,
        "y": 60,
        "wires": [
            [
                "a3aef217e862e2f1"
            ]
        ]
    },
    {
        "id": "777659050695ff89",
        "type": "debug",
        "z": "5aeea1c008d64d4d",
        "name": "debug 52",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "originalBody",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1580,
        "y": 40,
        "wires": []
    },
    {
        "id": "90ec6d6167848242",
        "type": "function",
        "z": "5aeea1c008d64d4d",
        "name": "get image",
        "func": "msg.method = \"GET\";\nmsg.requestType = \"binary\";\nmsg.url = msg.originalBody.imageUrl;\nmsg.fileExt = msg.url.substring(msg.url.lastIndexOf(\".\"));\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1880,
        "y": 60,
        "wires": [
            [
                "d09a59b98b51bdbd"
            ]
        ]
    },
    {
        "id": "d09a59b98b51bdbd",
        "type": "subflow:8e9dd0b44d3c40ea",
        "z": "5aeea1c008d64d4d",
        "name": "",
        "x": 2080,
        "y": 60,
        "wires": [
            [
                "6a0ea0c142215c5b"
            ],
            []
        ]
    },
    {
        "id": "5e06e2d2c8a9751b",
        "type": "switch",
        "z": "5aeea1c008d64d4d",
        "name": "404",
        "property": "statusCode",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "404",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 3390,
        "y": 280,
        "wires": [
            [
                "3901016f331f7d32"
            ]
        ]
    },
    {
        "id": "84b751732919d6c9",
        "type": "switch",
        "z": "5aeea1c008d64d4d",
        "name": "404",
        "property": "statusCode",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "404",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 2450,
        "y": 200,
        "wires": [
            [
                "4043088a11280859"
            ]
        ]
    },
    {
        "id": "7eb0055c0889cc82",
        "type": "link in",
        "z": "5aeea1c008d64d4d",
        "name": "link in 3",
        "links": [
            "3901016f331f7d32",
            "4043088a11280859"
        ],
        "x": 1565,
        "y": 560,
        "wires": [
            [
                "eabaab29242e4b0e"
            ]
        ]
    },
    {
        "id": "3901016f331f7d32",
        "type": "link out",
        "z": "5aeea1c008d64d4d",
        "name": "link out 4",
        "mode": "link",
        "links": [
            "7eb0055c0889cc82"
        ],
        "x": 3505,
        "y": 280,
        "wires": []
    },
    {
        "id": "4043088a11280859",
        "type": "link out",
        "z": "5aeea1c008d64d4d",
        "name": "link out 5",
        "mode": "link",
        "links": [
            "7eb0055c0889cc82"
        ],
        "x": 2555,
        "y": 200,
        "wires": []
    },
    {
        "id": "4e7ee8d5cdb84780",
        "type": "function",
        "z": "5aeea1c008d64d4d",
        "name": "get file",
        "func": "msg.method = \"GET\";\nmsg.requestType = \"binary\";\nmsg.url = msg.originalBody.pdfUrl;\nmsg.fileExt = msg.url.substring(msg.url.lastIndexOf(\".\"));\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1850,
        "y": 120,
        "wires": [
            [
                "d09a59b98b51bdbd"
            ]
        ]
    },
    {
        "id": "eabaab29242e4b0e",
        "type": "function",
        "z": "5aeea1c008d64d4d",
        "name": "check conversation exist?",
        "func": "msg.method = \"GET\";\nmsg.url = `${msg.chatwootApiUrl}/accounts/${msg.accountId}/contacts/${msg.contactId}/conversations`;\n\nmsg.payload = {\n    \"inbox_id\": msg.inboxId\n};\nmsg.headers = {};\nmsg.headers['Content-Type'] = 'application/json';\nmsg.headers['api_access_token'] = msg.chatwootApiKey;\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1790,
        "y": 640,
        "wires": [
            [
                "9201b6d7f79cc60c"
            ]
        ]
    },
    {
        "id": "9201b6d7f79cc60c",
        "type": "subflow:8e9dd0b44d3c40ea",
        "z": "5aeea1c008d64d4d",
        "name": "",
        "x": 1800,
        "y": 740,
        "wires": [
            [
                "ec2f0489012c31d1",
                "1543fc6ce3bfa206",
                "e98371ffccdf746b"
            ],
            [
                "2b56d2ac1b676daf",
                "1543fc6ce3bfa206"
            ]
        ]
    },
    {
        "id": "e98371ffccdf746b",
        "type": "debug",
        "z": "5aeea1c008d64d4d",
        "name": "debug 76",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload.payload[0]",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1940,
        "y": 700,
        "wires": []
    },
    {
        "id": "1543fc6ce3bfa206",
        "type": "debug",
        "z": "5aeea1c008d64d4d",
        "name": "check conversation exiss log",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1860,
        "y": 860,
        "wires": []
    },
    {
        "id": "ec2f0489012c31d1",
        "type": "switch",
        "z": "5aeea1c008d64d4d",
        "name": "conversation found?",
        "property": "payload.payload[0]",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nempty"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 2080,
        "y": 760,
        "wires": [
            [
                "597ea965c45d934f"
            ],
            [
                "2b56d2ac1b676daf"
            ]
        ]
    },
    {
        "id": "597ea965c45d934f",
        "type": "function",
        "z": "5aeea1c008d64d4d",
        "name": "check conversation found for inbox?",
        "func": "let conversationFineDetail = msg.payload.payload ?? [];\nmsg.conversationId = null;\nfor (let i = 0; i < conversationFineDetail.length; i++) {\n    if (conversationFineDetail[i]['inbox_id'] == msg.inboxId) {\n        msg.conversationId = conversationFineDetail[i]['id'];\n        break;\n    }\n}\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2170,
        "y": 640,
        "wires": [
            [
                "b3b2dd42e751887e",
                "a9ec0582d3309ad4"
            ]
        ]
    },
    {
        "id": "2b56d2ac1b676daf",
        "type": "function",
        "z": "5aeea1c008d64d4d",
        "name": "create conversation",
        "func": "msg.method = \"POST\";\nmsg.url = `${msg.chatwootApiUrl}/accounts/${msg.accountId}/conversations`;\n\nmsg.payload = {\n    \"source_id\": msg.chatId,\n    \"inbox_id\": msg.inboxId,\n    \"contact_id\": msg.contactId\n};\nmsg.headers = {};\nmsg.headers['Content-Type'] = 'application/json';\nmsg.headers['api_access_token'] = msg.chatwootApiKey;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2150,
        "y": 880,
        "wires": [
            [
                "7cb958e0a6043edf"
            ]
        ]
    },
    {
        "id": "b3b2dd42e751887e",
        "type": "switch",
        "z": "5aeea1c008d64d4d",
        "name": "conversationId?",
        "property": "conversationId",
        "propertyType": "msg",
        "rules": [
            {
                "t": "null"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 2340,
        "y": 720,
        "wires": [
            [
                "2b56d2ac1b676daf"
            ],
            [
                "4b5bd6939ee4cd01"
            ]
        ]
    },
    {
        "id": "a9ec0582d3309ad4",
        "type": "debug",
        "z": "5aeea1c008d64d4d",
        "name": "debug 77",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "conversationId",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 2360,
        "y": 580,
        "wires": []
    },
    {
        "id": "7cb958e0a6043edf",
        "type": "subflow:8e9dd0b44d3c40ea",
        "z": "5aeea1c008d64d4d",
        "name": "",
        "x": 2400,
        "y": 840,
        "wires": [
            [
                "17c571d72e6eed4a",
                "40b85e1c337eb537"
            ],
            [
                "40b85e1c337eb537"
            ]
        ]
    },
    {
        "id": "4b5bd6939ee4cd01",
        "type": "function",
        "z": "5aeea1c008d64d4d",
        "name": "set conversationId",
        "func": "msg.service = \"CustomerAPI\"\n\nmsg.method = \"POST\"\nmsg.url = `${msg.customerApi}/settings`;\nmsg.headers = {\n    \"authorization\": msg.customerApiKey,\n    \"x-trace-id\": msg.traceID,\n    \"x-user-id\": msg.userID\n}\n\nlet cart = [];\n\nmsg.payload = {\n    \"conversationId\": msg.conversationId\n}\n\nreturn msg;",
        "outputs": 1,
        "timeout": "",
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2650,
        "y": 660,
        "wires": [
            [
                "4da9872b714b5233"
            ]
        ]
    },
    {
        "id": "17c571d72e6eed4a",
        "type": "change",
        "z": "5aeea1c008d64d4d",
        "name": "set conversationId",
        "rules": [
            {
                "t": "set",
                "p": "conversationId",
                "pt": "msg",
                "to": "payload.id",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2630,
        "y": 760,
        "wires": [
            [
                "4b5bd6939ee4cd01"
            ]
        ]
    },
    {
        "id": "40b85e1c337eb537",
        "type": "debug",
        "z": "5aeea1c008d64d4d",
        "name": "create conversation call",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2630,
        "y": 920,
        "wires": []
    },
    {
        "id": "4da9872b714b5233",
        "type": "subflow:8e9dd0b44d3c40ea",
        "z": "5aeea1c008d64d4d",
        "name": "",
        "x": 2860,
        "y": 660,
        "wires": [
            [
                "4ff6c505c6e06ecc"
            ],
            []
        ]
    },
    {
        "id": "49b4e8cc4d6d56b7",
        "type": "delay",
        "z": "5aeea1c008d64d4d",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 3400,
        "y": 140,
        "wires": [
            [
                "ffd83d59628f7d5a"
            ]
        ]
    },
    {
        "id": "ffd83d59628f7d5a",
        "type": "link out",
        "z": "5aeea1c008d64d4d",
        "name": "create 1st message",
        "mode": "link",
        "links": [
            "e63040e50d48f483"
        ],
        "x": 3445,
        "y": 80,
        "wires": []
    },
    {
        "id": "e63040e50d48f483",
        "type": "link in",
        "z": "5aeea1c008d64d4d",
        "name": "Create first message",
        "links": [
            "ffd83d59628f7d5a"
        ],
        "x": 1455,
        "y": 140,
        "wires": [
            [
                "ed837016a637de14"
            ]
        ]
    },
    {
        "id": "395abd2722a5a231",
        "type": "change",
        "z": "5aeea1c008d64d4d",
        "name": "set conversationId",
        "rules": [
            {
                "t": "set",
                "p": "conversationId",
                "pt": "msg",
                "to": "customerSettings.conversationId",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2050,
        "y": 280,
        "wires": [
            [
                "4ff6c505c6e06ecc"
            ]
        ]
    },
    {
        "id": "4ad846e40abf36ef",
        "type": "change",
        "z": "5aeea1c008d64d4d",
        "name": "set conversationId",
        "rules": [
            {
                "t": "set",
                "p": "conversationId",
                "pt": "msg",
                "to": "customerSettings.conversationId",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1670,
        "y": 220,
        "wires": [
            [
                "ed837016a637de14"
            ]
        ]
    },
    {
        "id": "a0a45e24a84f7526",
        "type": "link in",
        "z": "93c71a31f4ec166d",
        "name": "error in",
        "links": [
            "a2cae91059e107c4",
            "1aba1c53782f6b2d",
            "c7cdc18e12becf50",
            "ca6cdea8951b4de6",
            "5a06dcd32818fc3f",
            "6448e95e739307ee",
            "8e18451d2a8dab5b",
            "28a3c4ca290c7571",
            "b791d592bf38ca98",
            "b011af9c0d776a08",
            "71615fd36e87c75c",
            "cd92b53c12a54776",
            "e0a990b922ee86ea",
            "9e5aeba86c948b7c",
            "41f94ba03122eee2",
            "fbf4c74c3851098d",
            "cd6743287f5ce369",
            "d836bba2d9e69357",
            "4fafc4eab5469761",
            "01bb6236479cb5ac",
            "a48bf86b96a56f44"
        ],
        "x": 155,
        "y": 160,
        "wires": [
            [
                "058b989bf1cd444c",
                "31d1ea0298822b4c"
            ]
        ]
    },
    {
        "id": "058b989bf1cd444c",
        "type": "send-message",
        "z": "93c71a31f4ec166d",
        "isTimerUsed": false,
        "language": "lang",
        "languageType": "msg",
        "messageOption": "",
        "messageID": "",
        "messageIDType": "str",
        "name": "errorMessage",
        "props": {
            "": [],
            "welcomeMessage": [],
            "errorMessage": []
        },
        "templateId": "errorMessage",
        "templateIdToDelete": "",
        "templatesJsons": {
            "welcomeMessage": {
                "text": "{{text}}",
                "data": {
                    "interactive": {
                        "type": "button",
                        "buttons": [
                            {
                                "title": "{{button1}}"
                            },
                            {
                                "title": "{{button2}}"
                            },
                            {
                                "title": "{{button3}}"
                            }
                        ]
                    }
                },
                "en": {
                    "button1": "Pay Fine",
                    "button2": "Questions & Answers",
                    "button3": "View Fines",
                    "text": "*New Traffic Fine Notification from Ekurhuleni\nMetro Police Department*\n\nPlease take note that a new traffic fine\n(REF:C1/93563/808/187933)\nhas been issued against ID ending 51.\n\nFor more information or options to pay the fine\nplease reply to this message and our friendly\nChatbot, Traffic Officer Buddy will gladly assist you.\n\nAlternatively log onto payCity.co.za for more\ninformation and options to pay."
                }
            },
            "errorMessage": {
                "text": "{{text}}",
                "data": {
                    "interactive": {
                        "type": "button",
                        "buttons": [
                            {
                                "title": "{{button1}}"
                            },
                            {
                                "title": "{{button2}}"
                            },
                            {
                                "title": "{{button3}}"
                            }
                        ]
                    }
                },
                "en": {
                    "button1": "View all notices",
                    "button2": "FAQ",
                    "button3": "Chat to Agent",
                    "text": "I am unable to process your request.\n\nUse the buttons below to find the information you need, or do chat with an agent. ⬇️"
                }
            }
        },
        "templatesList": [
            "fine_not_found",
            "faq_representations",
            "faq_my_vehicle_not_driver",
            "querying_fine_details_waiting",
            "paynow_express_payment",
            "pay_your_fine",
            "main_nextfines",
            "main_image_file",
            "main_payment_info_allowedreason",
            "faq_dispute",
            "main_finedetail_1",
            "get_started",
            "main_image_placeholder",
            "goodbye",
            "enter_digit_number",
            "select_the_option",
            "connect_agent",
            "enter_digit_number_error",
            "main_3_1_1_1_1_3",
            "welocme",
            "main_3_1_1_1_1",
            "main_1_0",
            "main_3_error",
            "main_3_1",
            "main_1",
            "main_3_1_1_0",
            "main_3",
            "fines_pdf_file",
            "welcomeMessage",
            "main_0_0_pdf",
            "main_0_0",
            "main_2_2",
            "main_3_1_1_1_0_0",
            "main_2",
            "main_2_1",
            "querying_for_fines",
            "sendwindowopener_template",
            "fines_info",
            "main_3_1_1_1_1_2",
            "main_1_3",
            "main_pdf_placeholder",
            "main_1_2",
            "main_1_1",
            "main_3_1_1_1_1_1",
            "faq_other_queries",
            "main_1_2_1",
            "main_3_1_1",
            "main_3_1_3",
            "main_3_1_2",
            "main_3_1_1_1_0",
            "main_3_1_1_1",
            "fines_not_found",
            "errorMessage",
            "faq_representations_contacts",
            "faq_my_vehicle_not_driver_contacts",
            "registration_image_file"
        ],
        "userID": "userID",
        "userIDType": "msg",
        "traceID": "traceID",
        "traceIDType": "msg",
        "useTimer": false,
        "timer": "",
        "outputs": 3,
        "jsonToCreate": "{\"text\":\"{{text}}\",\"data\":{\"interactive\":{\"type\":\"button\",\"buttons\":[{\"title\":\"{{button1}}\"},{\"title\":\"{{button2}}\"},{\"title\":\"{{button3}}\"}]}},\"en\":{\"button1\":\"Pay Fine\",\"button2\":\"FAQ\",\"button3\":\"View Fines\",\"text\":\"Oops there was some problem connecting to the database, try again later \"}}",
        "jsonToCreateType": "json",
        "templateDescriptionButtonsContainerToCreate": [],
        "templateDesciptionDetailsToCreate": "errorMessage",
        "templateDesciptionTextToCreate": "",
        "templateIdToCreate": "errorMessage",
        "templateGroupToCreate": "errorMessage",
        "currentTemplateDescription": {
            "details": "errorMessage"
        },
        "currentTemplateGroup": "errorMessage",
        "currentTemplateTimer": "",
        "currentTemplateType": "standard",
        "jsonToEdit": "{\"text\":\"{{text}}\",\"data\":{\"interactive\":{\"type\":\"button\",\"buttons\":[{\"title\":\"{{button1}}\"},{\"title\":\"{{button2}}\"},{\"title\":\"{{button3}}\"}]}},\"en\":{\"button1\":\"View all notices\",\"button2\":\"FAQ\",\"button3\":\"Chat to Agent\",\"text\":\"I am unable to process your request.\\n\\nUse the buttons below to find the information you need, or do chat with an agent. ⬇️\"}}",
        "jsonToEditType": "json",
        "templateIdToEdit": "errorMessage",
        "templateDescriptionButtonsContainerToEdit": [],
        "templateDesciptionDetailsToEdit": "errorMessage",
        "templateDesciptionTextToEdit": "",
        "x": 340,
        "y": 160,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "31d1ea0298822b4c",
        "type": "debug",
        "z": "93c71a31f4ec166d",
        "name": "error logs",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 320,
        "y": 80,
        "wires": []
    },
    {
        "id": "b2f21f27bc5b85e7",
        "type": "delay",
        "z": "542d33d1da2e3551",
        "name": "",
        "pauseType": "delay",
        "timeout": "3",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "outputs": 1,
        "x": 260,
        "y": 140,
        "wires": [
            [
                "ee0d6d963c01b2f8"
            ]
        ]
    },
    {
        "id": "806330a6233f1910",
        "type": "link in",
        "z": "542d33d1da2e3551",
        "name": "goodbye in",
        "links": [
            "eb96463ae3ae1b37",
            "bd27e6533f188452",
            "b7fd6a794bcbee0c",
            "97f09e7737fce806",
            "b2da344f14cf92e5",
            "c14bd7d53fe6d1db",
            "79776ce8a30a3f59",
            "ddc86f8a6409d514",
            "d70b0c2c267d8078",
            "ad9129cf0f1f8fc3",
            "d7d0a63d39d50955",
            "0a96c8b0d0d3835d",
            "aaf2c143a94f83c4",
            "a07efca22f61ac18",
            "652005cc86416f5e",
            "91429f4c2514994d"
        ],
        "x": 145,
        "y": 140,
        "wires": [
            [
                "b2f21f27bc5b85e7"
            ]
        ]
    },
    {
        "id": "ee0d6d963c01b2f8",
        "type": "send-message",
        "z": "542d33d1da2e3551",
        "isTimerUsed": false,
        "language": "lang",
        "languageType": "msg",
        "messageOption": "",
        "messageID": "",
        "messageIDType": "str",
        "name": "goodbye",
        "props": {
            "": [],
            "welcomeMessage": [],
            "main_1_1": [],
            "main_1": [],
            "main_1_0": [],
            "goodbye": []
        },
        "templateId": "goodbye",
        "templateIdToDelete": "",
        "templatesJsons": {
            "welcomeMessage": {
                "text": "{{text}}",
                "en": {
                    "text": "*New Traffic Fine Notification from Ekurhuleni\nMetro Police Department*\nPlease take note that a new traffic fine (REF:\nC1/93563/808/187933) has been issued against ID\nending 51.\nFor more information or options to pay the fine\nplease reply to this message and our friendly\nChatbot, Traffic Officer Buddy will gladly assist you.\nAlternatively log onto payCity.co.za for more\ninformation and options to pay.\n1. Pay Fine\n2. More Options\n3. View/Query all my fines from Ekurhuleni"
                }
            },
            "main_1_1": {
                "text": "{{text}}",
                "en": {
                    "text": "Please follow the link below.\nhttps://paynow.paycity.co.za\n1. Back to Payment Options\n2. Main Menu\nYou can also pay at any of the\nfollowing locations: Spar, Shoprite &\nCheckers & Pnp."
                }
            },
            "main_1": {
                "text": "{{text}}",
                "en": {
                    "text": "Please pay your fine using the link below.\nYou can also pay at any of the\nfollowing locations: Spar, Shoprite &\nCheckers & Pnp."
                }
            },
            "main_1_0": {
                "text": "{{text}}",
                "en": {
                    "text": "Goodbye 👋 To enagage again with Traffic Officer Buddy please type 'Hi'"
                }
            },
            "goodbye": {
                "text": "{{text}}",
                "en": {
                    "text": "Goodbye 👋 To engage again with Traffic Officer Buddy please type 'Hi'"
                }
            }
        },
        "templatesList": [
            "fine_not_found",
            "faq_representations",
            "faq_my_vehicle_not_driver",
            "querying_fine_details_waiting",
            "paynow_express_payment",
            "pay_your_fine",
            "main_nextfines",
            "main_image_file",
            "main_payment_info_allowedreason",
            "faq_dispute",
            "main_finedetail_1",
            "get_started",
            "main_image_placeholder",
            "goodbye",
            "enter_digit_number",
            "select_the_option",
            "connect_agent",
            "enter_digit_number_error",
            "main_3_1_1_1_1_3",
            "welocme",
            "main_3_1_1_1_1",
            "main_1_0",
            "main_3_error",
            "main_3_1",
            "main_1",
            "main_3_1_1_0",
            "main_3",
            "fines_pdf_file",
            "welcomeMessage",
            "main_0_0_pdf",
            "main_0_0",
            "main_2_2",
            "main_3_1_1_1_0_0",
            "main_2",
            "main_2_1",
            "querying_for_fines",
            "sendwindowopener_template",
            "fines_info",
            "main_3_1_1_1_1_2",
            "main_1_3",
            "main_pdf_placeholder",
            "main_1_2",
            "main_1_1",
            "main_3_1_1_1_1_1",
            "faq_other_queries",
            "main_1_2_1",
            "main_3_1_1",
            "main_3_1_3",
            "main_3_1_2",
            "main_3_1_1_1_0",
            "main_3_1_1_1",
            "fines_not_found",
            "errorMessage",
            "faq_representations_contacts",
            "faq_my_vehicle_not_driver_contacts",
            "registration_image_file"
        ],
        "userID": "userID",
        "userIDType": "msg",
        "traceID": "traceID",
        "traceIDType": "msg",
        "useTimer": false,
        "timer": "",
        "outputs": 3,
        "jsonToCreate": "{\"text\":\"{{text}}\",\"en\":{\"text\":\"Goodbye 👋 To enagage again with Traffic Officer Buddy please type 'Hi'\"}}",
        "jsonToCreateType": "json",
        "templateDescriptionButtonsContainerToCreate": [],
        "templateDesciptionDetailsToCreate": "main",
        "templateDesciptionTextToCreate": "",
        "templateIdToCreate": "goodbye",
        "templateGroupToCreate": "main",
        "currentTemplateDescription": {
            "details": "main"
        },
        "currentTemplateGroup": "main",
        "currentTemplateTimer": "",
        "currentTemplateType": "standard",
        "jsonToEdit": "{\"text\":\"{{text}}\",\"en\":{\"text\":\"Goodbye 👋 To engage again with Traffic Officer Buddy please type 'Hi'\"}}",
        "jsonToEditType": "json",
        "templateIdToEdit": "goodbye",
        "templateDescriptionButtonsContainerToEdit": [],
        "templateDesciptionDetailsToEdit": "main",
        "templateDesciptionTextToEdit": "",
        "x": 420,
        "y": 140,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "ab56433a9564c563",
        "type": "function",
        "z": "13630048e9aa6406",
        "name": "get envs",
        "func": "\nmsg.apiVersion = \"v1\";\n\nmsg.messagesApiKey = env.get(\"MESSAGES_API_KEY\");\nmsg.customerApiKey = env.get(\"CUSTOMER_API_KEY\");\nmsg.messagesApiUrl = env.get(\"MESSAGES_API_URL\") + \"/\" + msg.apiVersion;\nmsg.customerApi = env.get(\"CUSTOMER_API_URL\") + \"/\" + msg.apiVersion;\n\nmsg.externalApiUrl = env.get(\"EXTERNAL_API_URL\")\nmsg.externalApiKey = env.get(\"EXTERNAL_API_KEY\")\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 440,
        "y": 200,
        "wires": [
            [
                "11d0fc61c895edd9"
            ]
        ]
    },
    {
        "id": "dbdf9e391d9f211d",
        "type": "inject",
        "z": "13630048e9aa6406",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 240,
        "y": 200,
        "wires": [
            [
                "ab56433a9564c563"
            ]
        ]
    },
    {
        "id": "11d0fc61c895edd9",
        "type": "function",
        "z": "13630048e9aa6406",
        "name": "",
        "func": "msg.method = \"POST\";\nmsg.url = `${msg.externalApiUrl}/TrafficFines.svc`;\n\nmsg.payload = `<soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:tem=\"http://tempuri.org/\" xmlns:traf=\"http://schemas.datacontract.org/2004/07/TrafficFineService.Model.Request\"><soapenv:Header/><soapenv:Body><tem:FindTrafficFines><!--Optional:--><tem:enquiry><!--Optional:--><traf:MessageDate>2022-11-28</traf:MessageDate><!--Optional:--><traf:MessageId>A88A947E-6861-47EA-8173-B771FFE2022B</traf:MessageId><!--Optional:--><traf:Partner><!--Optional:--><traf:Code>CSH</traf:Code><!--Optional:--><traf:Key>c41#@hCP</traf:Key></traf:Partner><!--Optional:--><traf:IdentifierType>NoticeNumber</traf:IdentifierType><!--Optional:--><traf:IdentifierValue>13/52369/145/104896</traf:IdentifierValue></tem:enquiry></tem:FindTrafficFines></soapenv:Body></soapenv:Envelope>`;\nmsg.headers = {};\nmsg.headers['Content-Type'] = 'text/xml';\nmsg.headers['SOAPAction'] = 'http://tempuri.org/ITrafficFinesService/FindTrafficFines';\n// msg.headers['Ocp-Apim-Subscription-Key'] = '3dec01f1e4524c58bb67f876fe8ee2b8';\n// msg.headers['Authorization'] = `Basic ${msg.externalApiKey}`;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 640,
        "y": 200,
        "wires": [
            [
                "589e02b8ca5049d7",
                "e2df60f751ec15e3"
            ]
        ]
    },
    {
        "id": "589e02b8ca5049d7",
        "type": "http request",
        "z": "13630048e9aa6406",
        "name": "",
        "method": "use",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "senderr": false,
        "x": 850,
        "y": 200,
        "wires": [
            [
                "0b617ac7447328b4",
                "d51bee7adf22ce63"
            ]
        ]
    },
    {
        "id": "f52caf8f6eaafac7",
        "type": "debug",
        "z": "13630048e9aa6406",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1070,
        "y": 120,
        "wires": []
    },
    {
        "id": "0b617ac7447328b4",
        "type": "debug",
        "z": "13630048e9aa6406",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "statusCode",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 860,
        "y": 120,
        "wires": []
    },
    {
        "id": "d51bee7adf22ce63",
        "type": "xml",
        "z": "13630048e9aa6406",
        "name": "",
        "property": "payload",
        "attr": "",
        "chr": "",
        "x": 1050,
        "y": 200,
        "wires": [
            [
                "f52caf8f6eaafac7"
            ]
        ]
    },
    {
        "id": "e2df60f751ec15e3",
        "type": "debug",
        "z": "13630048e9aa6406",
        "name": "debug 1",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 640,
        "y": 120,
        "wires": []
    },
    {
        "id": "b18897579ae3d405",
        "type": "function",
        "z": "13630048e9aa6406",
        "name": "",
        "func": "msg.method = \"POST\";\nmsg.url = `${msg.externalApiUrl}/TrafficFines.svc`;\n\nmsg.payload = `<soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:tem=\"http://tempuri.org/\" xmlns:traf=\"http://schemas.datacontract.org/2004/07/TrafficFineService.Model.Request\"><soapenv:Header/><soapenv:Body><tem:FindTrafficFines><!--Optional:--><tem:enquiry><!--Optional:--><traf:MessageDate>2022-11-28</traf:MessageDate><!--Optional:--><traf:MessageId>A88A947E-6861-47EA-8173-B771FFE2022B</traf:MessageId><!--Optional:--><traf:Partner><!--Optional:--><traf:Code>CSH</traf:Code><!--Optional:--><traf:Key>c41#@hCP</traf:Key></traf:Partner><!--Optional:--><traf:IdentifierType>RSAIDNumber</traf:IdentifierType><!--Optional:--><traf:IdentifierValue>${msg.text}</traf:IdentifierValue></tem:enquiry></tem:FindTrafficFines></soapenv:Body></soapenv:Envelope>`;\nmsg.headers = {};\nmsg.headers['Content-Type'] = 'text/xml';\nmsg.headers['SOAPAction'] = 'http://tempuri.org/ITrafficFinesService/FindTrafficFines';\n// msg.headers['Ocp-Apim-Subscription-Key'] = '3dec01f1e4524c58bb67f876fe8ee2b8';\n// msg.headers['Authorization'] = `Basic ${msg.externalApiKey}`;\nmsg.requestType = \"xml\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 640,
        "y": 440,
        "wires": [
            [
                "1947fe62fe57c791",
                "be524602abb11a8e"
            ]
        ]
    },
    {
        "id": "1947fe62fe57c791",
        "type": "debug",
        "z": "13630048e9aa6406",
        "name": "debug 5",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 640,
        "y": 360,
        "wires": []
    },
    {
        "id": "17d939a94e13aa45",
        "type": "function",
        "z": "13630048e9aa6406",
        "name": "get envs",
        "func": "\nmsg.apiVersion = \"v1\";\n\nmsg.messagesApiKey = env.get(\"MESSAGES_API_KEY\");\nmsg.customerApiKey = env.get(\"CUSTOMER_API_KEY\");\nmsg.messagesApiUrl = env.get(\"MESSAGES_API_URL\") + \"/\" + msg.apiVersion;\nmsg.customerApi = env.get(\"CUSTOMER_API_URL\") + \"/\" + msg.apiVersion;\n\nmsg.externalApiUrl = env.get(\"EXTERNAL_API_URL\")\nmsg.externalApiKey = env.get(\"EXTERNAL_API_KEY\")\n\nmsg.text = \"7406295705083\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 440,
        "y": 440,
        "wires": [
            [
                "b18897579ae3d405"
            ]
        ]
    },
    {
        "id": "4998df71871c5d93",
        "type": "inject",
        "z": "13630048e9aa6406",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 240,
        "y": 440,
        "wires": [
            [
                "17d939a94e13aa45"
            ]
        ]
    },
    {
        "id": "7122106f893981d6",
        "type": "function",
        "z": "13630048e9aa6406",
        "name": "",
        "func": "msg.method = \"POST\";\nmsg.url = `${msg.externalApiUrl}/TrafficFines.svc`;\n\nmsg.payload = `<soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:tem=\"http://tempuri.org/\" xmlns:traf=\"http://schemas.datacontract.org/2004/07/TrafficFineService.Model.Request\"><soapenv:Header/><soapenv:Body><tem:FindTrafficFiles><!--Optional:--><tem:request><!--Optional:--><traf:MessageDate>2022-11-28</traf:MessageDate><!--Optional:--><traf:MessageId>A88A947E-6861-47EA-8173-B771FFE2022B</traf:MessageId><!--Optional:--><traf:Partner><!--Optional:--><traf:Code>CSH</traf:Code><!--Optional:--><traf:Key>c41#@hCP</traf:Key></traf:Partner><!--Optional:--><traf:IdNumber>${msg.idNumber}</traf:IdNumber><!--Optional:--><traf:NoticeNumber>${msg.text}</traf:NoticeNumber></tem:request></tem:FindTrafficFiles></soapenv:Body></soapenv:Envelope>`;\nmsg.headers = {};\nmsg.headers['Content-Type'] = 'text/xml';\nmsg.headers['SOAPAction'] = 'http://tempuri.org/ITrafficFinesService/FindTrafficFiles';\n// msg.headers['Ocp-Apim-Subscription-Key'] = '3dec01f1e4524c58bb67f876fe8ee2b8';\n// msg.headers['Authorization'] = `Basic ${msg.externalApiKey}`;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 680,
        "y": 680,
        "wires": [
            [
                "38deaa2aadd9fdd4",
                "301b95c1ec2b3406"
            ]
        ]
    },
    {
        "id": "38deaa2aadd9fdd4",
        "type": "http request",
        "z": "13630048e9aa6406",
        "name": "",
        "method": "use",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "senderr": false,
        "x": 890,
        "y": 680,
        "wires": [
            [
                "bf0154b8b3c1689a",
                "4b5b29ec937f154a"
            ]
        ]
    },
    {
        "id": "bf0154b8b3c1689a",
        "type": "debug",
        "z": "13630048e9aa6406",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "statusCode",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 900,
        "y": 600,
        "wires": []
    },
    {
        "id": "4b5b29ec937f154a",
        "type": "xml",
        "z": "13630048e9aa6406",
        "name": "",
        "property": "payload",
        "attr": "",
        "chr": "",
        "x": 1090,
        "y": 680,
        "wires": [
            [
                "87332c68ae9c844c",
                "21969858e33d8682",
                "6169f71a88f48eae"
            ]
        ]
    },
    {
        "id": "301b95c1ec2b3406",
        "type": "debug",
        "z": "13630048e9aa6406",
        "name": "debug 6",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 680,
        "y": 600,
        "wires": []
    },
    {
        "id": "87332c68ae9c844c",
        "type": "debug",
        "z": "13630048e9aa6406",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1090,
        "y": 600,
        "wires": []
    },
    {
        "id": "b9e7588ffe30a027",
        "type": "function",
        "z": "13630048e9aa6406",
        "name": "get envs",
        "func": "msg.traceID = \"5212773b-7a6b-404b-93bf-a155b0335f94\"\nmsg.userID = \"2_1_WA_+380966000932\"\nmsg.lang = \"en\"\n\nmsg.apiVersion = \"v1\";\n\nmsg.messagesApiKey = env.get(\"MESSAGES_API_KEY\");\nmsg.storageApiUrl = env.get(\"STORAGE_API_URL\");\nmsg.customerApiKey = env.get(\"CUSTOMER_API_KEY\");\nmsg.messagesApiUrl = env.get(\"MESSAGES_API_URL\") + \"/\" + msg.apiVersion;\nmsg.customerApi = env.get(\"CUSTOMER_API_URL\") + \"/\" + msg.apiVersion;\n\nmsg.externalApiUrl = env.get(\"EXTERNAL_API_URL\")\nmsg.externalApiKey = env.get(\"EXTERNAL_API_KEY\")\n\n// 14/29973/145/060105\n// 15/02438/145/005036\n// 15/52239/145/104638\n\n//msg.text = '14/29973/145/060105'\nmsg.text = '39/56365/145/112914'\n// msg.text = '65/54758/142/109723' \nmsg.idNumber = '8809020130080'\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 440,
        "y": 680,
        "wires": [
            [
                "7122106f893981d6",
                "d840d6ee27d444ca"
            ]
        ]
    },
    {
        "id": "f35ac25c75cefe4d",
        "type": "inject",
        "z": "13630048e9aa6406",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 240,
        "y": 680,
        "wires": [
            [
                "b9e7588ffe30a027"
            ]
        ]
    },
    {
        "id": "77362c9ed99ab974",
        "type": "inject",
        "z": "13630048e9aa6406",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "<s:Envelope xmlns:s=\"http://schemas.xmlsoap.org/soap/envelope/\">     <s:Body>         <FindTrafficFinesResponse xmlns=\"http://tempuri.org/\">             <FindTrafficFinesResult xmlns:a=\"http://schemas.datacontract.org/2004/07/TrafficFineService.Model.Response\" xmlns:i=\"http://www.w3.org/2001/XMLSchema-instance\">                 <a:MessageId>a88a947e-6861-47ea-8173-b771ffe2022b</a:MessageId>                 <a:ResponseDate>2022-12-06T09:24:48.629643+02:00</a:ResponseDate>                 <a:FineDetails xmlns:b=\"http://schemas.datacontract.org/2004/07/TrafficFineService.Model\">                     <b:TrafficFineDetail>                         <b:AmountDueRand>0</b:AmountDueRand>                         <b:CameraSerial>008</b:CameraSerial>                         <b:CaseNumber>0</b:CaseNumber>                         <b:ContemptOfCourtAmount>0</b:ContemptOfCourtAmount>                         <b:Contractor>Q</b:Contractor>                         <b:CourtCode>214502</b:CourtCode>                         <b:CourtDate i:nil=\"true\"/>                         <b:CourtName>Palmridge</b:CourtName>                         <b:FilmNumber>EM5311</b:FilmNumber>                         <b:HasDocuments>true</b:HasDocuments>                         <b:HasImages>true</b:HasImages>                         <b:IsPaymentAllowed>false</b:IsPaymentAllowed>                         <b:IsWarrantPending>false</b:IsWarrantPending>                         <b:LastPaymentDate i:nil=\"true\"/>                         <b:LocalAuthorityCode>142</b:LocalAuthorityCode>                         <b:LocalAuthorityName>Ekurhuleni - 142</b:LocalAuthorityName>                         <b:Location>                             <b:City/>                             <b:FullLocation>HEIDELBERG ROAD NORTH BETWEEN VEREENIGING ROAD AND ASCOT ROAD</b:FullLocation>                             <b:StreetName/>                             <b:Suburb/>                         </b:Location>                         <b:MediaMessage>S341 Camera Notice</b:MediaMessage>                         <b:NoticeNumber>14/73747/142/147650</b:NoticeNumber>                         <b:OffenceDate>2016-03-21T10:35:00</b:OffenceDate>                         <b:OffenceDescription/>                         <b:OwnerIDNumber>7406295705083</b:OwnerIDNumber>                         <b:OwnerInitialsAndSurname>WP KUBAYI</b:OwnerInitialsAndSurname>                         <b:PaymentAllowedReason>Case already finalised</b:PaymentAllowedReason>                         <b:SpeedLimit>60</b:SpeedLimit>                         <b:SummonsNumber/>                         <b:VehicleRegistrationNumber>DT10FJGP</b:VehicleRegistrationNumber>                         <b:VehicleSpeed>72</b:VehicleSpeed>                         <b:WarrantNumber/>                     </b:TrafficFineDetail>                     <b:TrafficFineDetail>                         <b:AmountDueRand>0</b:AmountDueRand>                         <b:CameraSerial>031</b:CameraSerial>                         <b:CaseNumber>0</b:CaseNumber>                         <b:ContemptOfCourtAmount>0</b:ContemptOfCourtAmount>                         <b:Contractor>Q</b:Contractor>                         <b:CourtCode>114605</b:CourtCode>                         <b:CourtDate>2017-12-14T00:00:00</b:CourtDate>                         <b:CourtName>Boksburg</b:CourtName>                         <b:FilmNumber>EM15149</b:FilmNumber>                         <b:HasDocuments>true</b:HasDocuments>                         <b:HasImages>true</b:HasImages>                         <b:IsPaymentAllowed>false</b:IsPaymentAllowed>                         <b:IsWarrantPending>false</b:IsWarrantPending>                         <b:LastPaymentDate>2017-11-30T00:00:00</b:LastPaymentDate>                         <b:LocalAuthorityCode>142</b:LocalAuthorityCode>                         <b:LocalAuthorityName>Ekurhuleni - 142</b:LocalAuthorityName>                         <b:Location>                             <b:City/>                             <b:FullLocation>Commissioner Street East between Elsburg Road and Leon Ferreira Drive</b:FullLocation>                             <b:StreetName/>                             <b:Suburb/>                         </b:Location>                         <b:MediaMessage>S341 Camera Notice</b:MediaMessage>                         <b:NoticeNumber>24/37769/142/075704</b:NoticeNumber>                         <b:OffenceDate>2017-05-14T07:49:00</b:OffenceDate>                         <b:OffenceDescription/>                         <b:OwnerIDNumber>7406295705083</b:OwnerIDNumber>                         <b:OwnerInitialsAndSurname>PK NDIYANE</b:OwnerInitialsAndSurname>                         <b:PaymentAllowedReason>Case already finalised</b:PaymentAllowedReason>                         <b:SpeedLimit>80</b:SpeedLimit>                         <b:SummonsNumber>T//017034/17</b:SummonsNumber>                         <b:VehicleRegistrationNumber>DT10FJGP</b:VehicleRegistrationNumber>                         <b:VehicleSpeed>97</b:VehicleSpeed>                         <b:WarrantNumber/>                     </b:TrafficFineDetail>                     <b:TrafficFineDetail>                         <b:AmountDueRand>0</b:AmountDueRand>                         <b:CameraSerial>025</b:CameraSerial>                         <b:CaseNumber>0</b:CaseNumber>                         <b:ContemptOfCourtAmount>0</b:ContemptOfCourtAmount>                         <b:Contractor>Q</b:Contractor>                         <b:CourtCode>114605</b:CourtCode>                         <b:CourtDate>2018-02-07T00:00:00</b:CourtDate>                         <b:CourtName>Boksburg</b:CourtName>                         <b:FilmNumber>EM15419</b:FilmNumber>                         <b:HasDocuments>true</b:HasDocuments>                         <b:HasImages>true</b:HasImages>                         <b:IsPaymentAllowed>false</b:IsPaymentAllowed>                         <b:IsWarrantPending>false</b:IsWarrantPending>                         <b:LastPaymentDate>2018-01-24T00:00:00</b:LastPaymentDate>                         <b:LocalAuthorityCode>142</b:LocalAuthorityCode>                         <b:LocalAuthorityName>Ekurhuleni - 142</b:LocalAuthorityName>                         <b:Location>                             <b:City/>                             <b:FullLocation>Commissioner Street East between Elsburg Road and Leon Ferreira Drive</b:FullLocation>                             <b:StreetName/>                             <b:Suburb/>                         </b:Location>                         <b:MediaMessage>S341 Camera Notice</b:MediaMessage>                         <b:NoticeNumber>24/79770/142/159706</b:NoticeNumber>                         <b:OffenceDate>2017-06-01T08:09:00</b:OffenceDate>                         <b:OffenceDescription/>                         <b:OwnerIDNumber>7406295705083</b:OwnerIDNumber>                         <b:OwnerInitialsAndSurname>PK NDIYANE</b:OwnerInitialsAndSurname>                         <b:PaymentAllowedReason>Case already finalised</b:PaymentAllowedReason>                         <b:SpeedLimit>80</b:SpeedLimit>                         <b:SummonsNumber>T//006960/18</b:SummonsNumber>                         <b:VehicleRegistrationNumber>DT10FJGP</b:VehicleRegistrationNumber>                         <b:VehicleSpeed>107</b:VehicleSpeed>                         <b:WarrantNumber/>                     </b:TrafficFineDetail>                     <b:TrafficFineDetail>                         <b:AmountDueRand>0</b:AmountDueRand>                         <b:CameraSerial>038</b:CameraSerial>                         <b:CaseNumber>0</b:CaseNumber>                         <b:ContemptOfCourtAmount>0</b:ContemptOfCourtAmount>                         <b:Contractor>Q</b:Contractor>                         <b:CourtCode>115009</b:CourtCode>                         <b:CourtDate>2019-03-05T00:00:00</b:CourtDate>                         <b:CourtName>Benoni</b:CourtName>                         <b:FilmNumber>EM19300</b:FilmNumber>                         <b:HasDocuments>true</b:HasDocuments>                         <b:HasImages>true</b:HasImages>                         <b:IsPaymentAllowed>false</b:IsPaymentAllowed>                         <b:IsWarrantPending>false</b:IsWarrantPending>                         <b:LastPaymentDate>2019-02-15T00:00:00</b:LastPaymentDate>                         <b:LocalAuthorityCode>142</b:LocalAuthorityCode>                         <b:LocalAuthorityName>Ekurhuleni - 142</b:LocalAuthorityName>                         <b:Location>                             <b:City/>                             <b:FullLocation>Range View Road/Snake Road/R23 South at Main Reef Road</b:FullLocation>                             <b:StreetName/>                             <b:Suburb/>                         </b:Location>                         <b:MediaMessage>S341 Camera Notice</b:MediaMessage>                         <b:NoticeNumber>30/18014/142/036200</b:NoticeNumber>                         <b:OffenceDate>2018-01-04T22:37:00</b:OffenceDate>                         <b:OffenceDescription/>                         <b:OwnerIDNumber>7406295705083</b:OwnerIDNumber>                         <b:OwnerInitialsAndSurname>PK NDIYANE</b:OwnerInitialsAndSurname>                         <b:PaymentAllowedReason>Case already finalised</b:PaymentAllowedReason>                         <b:SpeedLimit>80</b:SpeedLimit>                         <b:SummonsNumber>B/V/S/005360/19</b:SummonsNumber>                         <b:VehicleRegistrationNumber>DT10FJGP</b:VehicleRegistrationNumber>                         <b:VehicleSpeed>92</b:VehicleSpeed>                         <b:WarrantNumber/>                     </b:TrafficFineDetail>                     <b:TrafficFineDetail>                         <b:AmountDueRand>0</b:AmountDueRand>                         <b:CameraSerial>044</b:CameraSerial>                         <b:CaseNumber>0</b:CaseNumber>                         <b:ContemptOfCourtAmount>0</b:ContemptOfCourtAmount>                         <b:Contractor>Q</b:Contractor>                         <b:CourtCode>114605</b:CourtCode>                         <b:CourtDate>2019-11-20T00:00:00</b:CourtDate>                         <b:CourtName>Boksburg</b:CourtName>                         <b:FilmNumber>EM22998</b:FilmNumber>                         <b:HasDocuments>true</b:HasDocuments>                         <b:HasImages>true</b:HasImages>                         <b:IsPaymentAllowed>false</b:IsPaymentAllowed>                         <b:IsWarrantPending>false</b:IsWarrantPending>                         <b:LastPaymentDate>2019-11-06T00:00:00</b:LastPaymentDate>                         <b:LocalAuthorityCode>142</b:LocalAuthorityCode>                         <b:LocalAuthorityName>Ekurhuleni - 142</b:LocalAuthorityName>                         <b:Location>                             <b:City/>                             <b:FullLocation>Rondebult Road North between Rietfontein road and Ravenswood street</b:FullLocation>                             <b:StreetName/>                             <b:Suburb/>                         </b:Location>                         <b:MediaMessage>S341 Camera Notice</b:MediaMessage>                         <b:NoticeNumber>36/37672/142/075522</b:NoticeNumber>                         <b:OffenceDate>2018-09-13T08:02:00</b:OffenceDate>                         <b:OffenceDescription/>                         <b:OwnerIDNumber>7406295705083</b:OwnerIDNumber>                         <b:OwnerInitialsAndSurname>PK NDIYANE</b:OwnerInitialsAndSurname>                         <b:PaymentAllowedReason>Case already finalised</b:PaymentAllowedReason>                         <b:SpeedLimit>80</b:SpeedLimit>                         <b:SummonsNumber>T//019331/19</b:SummonsNumber>                         <b:VehicleRegistrationNumber>DT10FJGP</b:VehicleRegistrationNumber>                         <b:VehicleSpeed>108</b:VehicleSpeed>                         <b:WarrantNumber/>                     </b:TrafficFineDetail>                     <b:TrafficFineDetail>                         <b:AmountDueRand>0</b:AmountDueRand>                         <b:CameraSerial/>                         <b:CaseNumber>100</b:CaseNumber>                         <b:ContemptOfCourtAmount>0</b:ContemptOfCourtAmount>                         <b:Contractor>Q</b:Contractor>                         <b:CourtCode>114003</b:CourtCode>                         <b:CourtDate>2019-02-25T00:00:00</b:CourtDate>                         <b:CourtName>Elsburg</b:CourtName>                         <b:FilmNumber/>                         <b:HasDocuments>true</b:HasDocuments>                         <b:HasImages>true</b:HasImages>                         <b:IsPaymentAllowed>false</b:IsPaymentAllowed>                         <b:IsWarrantPending>false</b:IsWarrantPending>                         <b:LastPaymentDate>2019-02-07T00:00:00</b:LastPaymentDate>                         <b:LocalAuthorityCode>142</b:LocalAuthorityCode>                         <b:LocalAuthorityName>Ekurhuleni - 142</b:LocalAuthorityName>                         <b:Location>                             <b:City/>                             <b:FullLocation>BLACK REEF ROAD WADEVILLE GERMISTON</b:FullLocation>                             <b:StreetName/>                             <b:Suburb/>                         </b:Location>                         <b:MediaMessage>S341 Camera Notice</b:MediaMessage>                         <b:NoticeNumber>98/24701/142/049642</b:NoticeNumber>                         <b:OffenceDate>2018-05-13T07:58:00</b:OffenceDate>                         <b:OffenceDescription/>                         <b:OwnerIDNumber>7406295705083</b:OwnerIDNumber>                         <b:OwnerInitialsAndSurname>PK NDIYANE</b:OwnerInitialsAndSurname>                         <b:PaymentAllowedReason>Case already finalised</b:PaymentAllowedReason>                         <b:SpeedLimit>0</b:SpeedLimit>                         <b:SummonsNumber>E/VT//003943/19</b:SummonsNumber>                         <b:VehicleRegistrationNumber>DT10FJGP</b:VehicleRegistrationNumber>                         <b:VehicleSpeed>0</b:VehicleSpeed>                         <b:WarrantNumber>E/V/T/V/T/002956/19</b:WarrantNumber>                     </b:TrafficFineDetail>                     <b:TrafficFineDetail>                         <b:AmountDueRand>0</b:AmountDueRand>                         <b:CameraSerial/>                         <b:CaseNumber>100</b:CaseNumber>                         <b:ContemptOfCourtAmount>0</b:ContemptOfCourtAmount>                         <b:Contractor>Q</b:Contractor>                         <b:CourtCode>214502</b:CourtCode>                         <b:CourtDate>2019-06-25T00:00:00</b:CourtDate>                         <b:CourtName>Palmridge</b:CourtName>                         <b:FilmNumber/>                         <b:HasDocuments>true</b:HasDocuments>                         <b:HasImages>false</b:HasImages>                         <b:IsPaymentAllowed>false</b:IsPaymentAllowed>                         <b:IsWarrantPending>false</b:IsWarrantPending>                         <b:LastPaymentDate>2019-06-11T00:00:00</b:LastPaymentDate>                         <b:LocalAuthorityCode>145</b:LocalAuthorityCode>                         <b:LocalAuthorityName>Ekurhuleni - 145</b:LocalAuthorityName>                         <b:Location>                             <b:City/>                             <b:FullLocation>KGOTSO STREET</b:FullLocation>                             <b:StreetName/>                             <b:Suburb/>                         </b:Location>                         <b:MediaMessage>No images available for S56 Handwritten Notice</b:MediaMessage>                         <b:NoticeNumber>54/63067/145/126333</b:NoticeNumber>                         <b:OffenceDate>2019-04-23T15:10:00</b:OffenceDate>                         <b:OffenceDescription/>                         <b:OwnerIDNumber>7406295705083</b:OwnerIDNumber>                         <b:OwnerInitialsAndSurname>P KUBAYI</b:OwnerInitialsAndSurname>                         <b:PaymentAllowedReason>Case already finalised</b:PaymentAllowedReason>                         <b:SpeedLimit>0</b:SpeedLimit>                         <b:SummonsNumber>54/63067/145/126333</b:SummonsNumber>                         <b:VehicleRegistrationNumber>DT10FJGP</b:VehicleRegistrationNumber>                         <b:VehicleSpeed>0</b:VehicleSpeed>                         <b:WarrantNumber/>                     </b:TrafficFineDetail>                     <b:TrafficFineDetail>                         <b:AmountDueRand>0</b:AmountDueRand>                         <b:CameraSerial>60159</b:CameraSerial>                         <b:CaseNumber>0</b:CaseNumber>                         <b:ContemptOfCourtAmount>0</b:ContemptOfCourtAmount>                         <b:Contractor>Q</b:Contractor>                         <b:CourtCode>115407</b:CourtCode>                         <b:CourtDate i:nil=\"true\"/>                         <b:CourtName>Brakpan</b:CourtName>                         <b:FilmNumber>ED2646</b:FilmNumber>                         <b:HasDocuments>true</b:HasDocuments>                         <b:HasImages>true</b:HasImages>                         <b:IsPaymentAllowed>false</b:IsPaymentAllowed>                         <b:IsWarrantPending>false</b:IsWarrantPending>                         <b:LastPaymentDate i:nil=\"true\"/>                         <b:LocalAuthorityCode>145</b:LocalAuthorityCode>                         <b:LocalAuthorityName>Ekurhuleni - 145</b:LocalAuthorityName>                         <b:Location>                             <b:City/>                             <b:FullLocation>R23 HEIDELBERG ROAD North between Beechwood street and New Kleinfontein road</b:FullLocation>                             <b:StreetName/>                             <b:Suburb/>                         </b:Location>                         <b:MediaMessage>S341 Camera Notice</b:MediaMessage>                         <b:NoticeNumber>14/09024/145/018207</b:NoticeNumber>                         <b:OffenceDate>2020-05-26T07:17:00</b:OffenceDate>                         <b:OffenceDescription/>                         <b:OwnerIDNumber>7406295705083</b:OwnerIDNumber>                         <b:OwnerInitialsAndSurname>PK NDIYANE</b:OwnerInitialsAndSurname>                         <b:PaymentAllowedReason>Case already finalised</b:PaymentAllowedReason>                         <b:SpeedLimit>80</b:SpeedLimit>                         <b:SummonsNumber/>                         <b:VehicleRegistrationNumber>DT10FJGP</b:VehicleRegistrationNumber>                         <b:VehicleSpeed>95</b:VehicleSpeed>                         <b:WarrantNumber/>                     </b:TrafficFineDetail>                     <b:TrafficFineDetail>                         <b:AmountDueRand>800</b:AmountDueRand>                         <b:CameraSerial/>                         <b:CaseNumber>100</b:CaseNumber>                         <b:ContemptOfCourtAmount>300</b:ContemptOfCourtAmount>                         <b:Contractor>Q</b:Contractor>                         <b:CourtCode>115407</b:CourtCode>                         <b:CourtDate>2021-10-05T00:00:00</b:CourtDate>                         <b:CourtName>Brakpan</b:CourtName>                         <b:FilmNumber/>                         <b:HasDocuments>true</b:HasDocuments>                         <b:HasImages>false</b:HasImages>                         <b:IsPaymentAllowed>false</b:IsPaymentAllowed>                         <b:IsWarrantPending>false</b:IsWarrantPending>                         <b:LastPaymentDate>2021-08-23T00:00:00</b:LastPaymentDate>                         <b:LocalAuthorityCode>145</b:LocalAuthorityCode>                         <b:LocalAuthorityName>Ekurhuleni - 145</b:LocalAuthorityName>                         <b:Location>                             <b:City/>                             <b:FullLocation>R23 AND R554</b:FullLocation>                             <b:StreetName/>                             <b:Suburb/>                         </b:Location>                         <b:MediaMessage>No images available for S56 Handwritten Notice</b:MediaMessage>                         <b:NoticeNumber>63/83602/145/167412</b:NoticeNumber>                         <b:OffenceDate>2021-05-04T07:47:00</b:OffenceDate>                         <b:OffenceDescription>84135~Drove m/v while holding cell phone in hand or other body part</b:OffenceDescription>                         <b:OwnerIDNumber>7406295705083</b:OwnerIDNumber>                         <b:OwnerInitialsAndSurname>P KUBAYI</b:OwnerInitialsAndSurname>                         <b:PaymentAllowedReason>Due date passed - Offender must go to court</b:PaymentAllowedReason>                         <b:SpeedLimit>0</b:SpeedLimit>                         <b:SummonsNumber>63/83602/145/167412</b:SummonsNumber>                         <b:VehicleRegistrationNumber>DT10FJGP</b:VehicleRegistrationNumber>                         <b:VehicleSpeed>0</b:VehicleSpeed>                         <b:WarrantNumber>B/B/V/A/002381/21</b:WarrantNumber>                     </b:TrafficFineDetail>                     <b:TrafficFineDetail>                         <b:AmountDueRand>200</b:AmountDueRand>                         <b:CameraSerial/>                         <b:CaseNumber>0</b:CaseNumber>                         <b:ContemptOfCourtAmount>0</b:ContemptOfCourtAmount>                         <b:Contractor>Q</b:Contractor>                         <b:CourtCode>115203</b:CourtCode>                         <b:CourtDate i:nil=\"true\"/>                         <b:CourtName>Daveyton</b:CourtName>                         <b:FilmNumber/>                         <b:HasDocuments>true</b:HasDocuments>                         <b:HasImages>true</b:HasImages>                         <b:IsPaymentAllowed>false</b:IsPaymentAllowed>                         <b:IsWarrantPending>false</b:IsWarrantPending>                         <b:LastPaymentDate i:nil=\"true\"/>                         <b:LocalAuthorityCode>145</b:LocalAuthorityCode>                         <b:LocalAuthorityName>Ekurhuleni - 145</b:LocalAuthorityName>                         <b:Location>                             <b:City/>                             <b:FullLocation>DAVEYTON MALL</b:FullLocation>                             <b:StreetName/>                             <b:Suburb/>                         </b:Location>                         <b:MediaMessage>S341 Camera Notice</b:MediaMessage>                         <b:NoticeNumber>95/96263/145/192766</b:NoticeNumber>                         <b:OffenceDate>2021-06-07T10:15:00</b:OffenceDate>                         <b:OffenceDescription>83870~Parked not within 450mm from edge / Double parking</b:OffenceDescription>                         <b:OwnerIDNumber>7406295705083</b:OwnerIDNumber>                         <b:OwnerInitialsAndSurname>PK NDIYANE</b:OwnerInitialsAndSurname>                         <b:PaymentAllowedReason>Online payments not allowed for this municipality</b:PaymentAllowedReason>                         <b:SpeedLimit>0</b:SpeedLimit>                         <b:SummonsNumber/>                         <b:VehicleRegistrationNumber>DT10FJGP</b:VehicleRegistrationNumber>                         <b:VehicleSpeed>0</b:VehicleSpeed>                         <b:WarrantNumber/>                     </b:TrafficFineDetail>                     <b:TrafficFineDetail>                         <b:AmountDueRand>500</b:AmountDueRand>                         <b:CameraSerial/>                         <b:CaseNumber>0</b:CaseNumber>                         <b:ContemptOfCourtAmount>0</b:ContemptOfCourtAmount>                         <b:Contractor>Q</b:Contractor>                         <b:CourtCode>115203</b:CourtCode>                         <b:CourtDate i:nil=\"true\"/>                         <b:CourtName>Daveyton</b:CourtName>                         <b:FilmNumber/>                         <b:HasDocuments>true</b:HasDocuments>                         <b:HasImages>true</b:HasImages>                         <b:IsPaymentAllowed>false</b:IsPaymentAllowed>                         <b:IsWarrantPending>false</b:IsWarrantPending>                         <b:LastPaymentDate i:nil=\"true\"/>                         <b:LocalAuthorityCode>145</b:LocalAuthorityCode>                         <b:LocalAuthorityName>Ekurhuleni - 145</b:LocalAuthorityName>                         <b:Location>                             <b:City/>                             <b:FullLocation>DAVETON MALL</b:FullLocation>                             <b:StreetName/>                             <b:Suburb/>                         </b:Location>                         <b:MediaMessage>S341 Camera Notice</b:MediaMessage>                         <b:NoticeNumber>97/21213/145/042668</b:NoticeNumber>                         <b:OffenceDate>2021-10-29T00:00:00</b:OffenceDate>                         <b:OffenceDescription>78011~Use unlicensed m/v</b:OffenceDescription>                         <b:OwnerIDNumber>7406295705083</b:OwnerIDNumber>                         <b:OwnerInitialsAndSurname>PK NDIYANE</b:OwnerInitialsAndSurname>                         <b:PaymentAllowedReason>Online payments not allowed for this municipality</b:PaymentAllowedReason>                         <b:SpeedLimit>0</b:SpeedLimit>                         <b:SummonsNumber/>                         <b:VehicleRegistrationNumber>DT10FJGP</b:VehicleRegistrationNumber>                         <b:VehicleSpeed>0</b:VehicleSpeed>                         <b:WarrantNumber/>                     </b:TrafficFineDetail>                 </a:FineDetails>                 <a:Summaries>                     <a:ResponseSummary>                         <a:IsSuccessful>true</a:IsSuccessful>                         <a:Message>Success</a:Message>                         <a:NumberOfRecords>11</a:NumberOfRecords>                         <a:OperationStatusCode>0</a:OperationStatusCode>                         <a:ResponseTimeMilliSeconds>11637</a:ResponseTimeMilliSeconds>                         <a:ServiceName>EMPD</a:ServiceName>                     </a:ResponseSummary>                 </a:Summaries>             </FindTrafficFinesResult>         </FindTrafficFinesResponse>     </s:Body> </s:Envelope>",
        "payloadType": "str",
        "x": 1530,
        "y": 200,
        "wires": [
            [
                "53d5051154abf004"
            ]
        ]
    },
    {
        "id": "53d5051154abf004",
        "type": "xml",
        "z": "13630048e9aa6406",
        "name": "",
        "property": "payload",
        "attr": "",
        "chr": "",
        "x": 1680,
        "y": 200,
        "wires": [
            [
                "4d34a1fe0bf44862"
            ]
        ]
    },
    {
        "id": "4d34a1fe0bf44862",
        "type": "debug",
        "z": "13630048e9aa6406",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1840,
        "y": 200,
        "wires": []
    },
    {
        "id": "dc6366c79b992b85",
        "type": "function",
        "z": "13630048e9aa6406",
        "name": "function 1",
        "func": "const trafficFineDetail = msg.payload[\"s:Envelope\"][\"s:Body\"][0].FindTrafficFinesResponse[0].FindTrafficFinesResult[0][\"a:FineDetails\"][0][\"b:TrafficFineDetail\"]\nmsg.text = \"\";\n\ntrafficFineDetail.forEach((item, index) => {\n    msg.text += index + 1 + \". \" + item[\"b:VehicleRegistrationNumber\"][0] + \" - R\" + item[\"b:AmountDueRand\"][0] + \"\\n\";\n});\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1320,
        "y": 200,
        "wires": [
            [
                "19200cd3e79a27cd"
            ]
        ]
    },
    {
        "id": "23f5086ccc458519",
        "type": "subflow:8e9dd0b44d3c40ea",
        "z": "13630048e9aa6406",
        "name": "",
        "x": 1460,
        "y": 1780,
        "wires": [
            [
                "04606665acd8a826"
            ],
            []
        ]
    },
    {
        "id": "0e1c136c31f8ec7b",
        "type": "function",
        "z": "13630048e9aa6406",
        "name": "create contact",
        "func": "msg.method = \"POST\";\nmsg.url = `${msg.chatwootApiUrl}/accounts/${msg.accountId}/contacts`;\n\nmsg.payload = {\n    \"phone_number\": msg.chatId,\n    \"additional_attributes\": {},\n    \"contact_inboxes\": [\n        {\n            \"source_id\": \"4f8e3124-2beb-450a-a3e6-7fcd92e011c5\",\n            \"inbox\": {\n                \"id\": 0,\n                \"name\": \"string\",\n                \"website_url\": \"string\",\n                \"channel_type\": \"string\",\n                \"avatar_url\": \"string\",\n                \"widget_color\": \"string\",\n                \"website_token\": \"string\",\n                \"enable_auto_assignment\": true,\n                \"web_widget_script\": \"string\",\n                \"welcome_title\": \"string\",\n                \"welcome_tagline\": \"string\",\n                \"greeting_enabled\": true,\n                \"greeting_message\": \"string\"\n            }\n        }\n    ]\n};\nmsg.headers = {};\nmsg.headers['Content-Type'] = 'application/json';\nmsg.headers['api_access_token'] = msg.chatwootApiKey;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1260,
        "y": 1780,
        "wires": [
            [
                "23f5086ccc458519"
            ]
        ]
    },
    {
        "id": "f40d083ea5013faa",
        "type": "subflow:8e9dd0b44d3c40ea",
        "z": "13630048e9aa6406",
        "name": "",
        "x": 2060,
        "y": 1734,
        "wires": [
            [
                "fd74e06fd6b92e18"
            ],
            []
        ]
    },
    {
        "id": "ef63cdb7ec380b4c",
        "type": "function",
        "z": "13630048e9aa6406",
        "name": "create conversation",
        "func": "msg.method = \"POST\";\nmsg.url = `${msg.chatwootApiUrl}/accounts/${msg.accountId}/conversations`;\n\nmsg.payload = {\n    \"source_id\": msg.chatId,\n    \"inbox_id\": 14,\n    \"contact_id\": msg.contactId\n};\nmsg.headers = {};\nmsg.headers['Content-Type'] = 'application/json';\nmsg.headers['api_access_token'] = msg.chatwootApiKey;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1870,
        "y": 1734,
        "wires": [
            [
                "f40d083ea5013faa"
            ]
        ]
    },
    {
        "id": "2b4790ef14578086",
        "type": "subflow:8e9dd0b44d3c40ea",
        "z": "13630048e9aa6406",
        "name": "",
        "x": 860,
        "y": 1774,
        "wires": [
            [
                "1d15333913b8dfa2"
            ],
            [
                "0e1c136c31f8ec7b"
            ]
        ]
    },
    {
        "id": "95de7aea0a25178c",
        "type": "function",
        "z": "13630048e9aa6406",
        "name": "get contact",
        "func": "msg.method = \"GET\";\nmsg.url = `${msg.chatwootApiUrl}/accounts/${msg.accountId}/contacts/search?q=${msg.chatId}`;\n\nmsg.payload = {};\nmsg.headers = {};\nmsg.headers['Content-Type'] = 'application/json';\nmsg.headers['api_access_token'] = msg.chatwootApiKey;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 650,
        "y": 1774,
        "wires": [
            [
                "2b4790ef14578086",
                "37cec06169edb4c3"
            ]
        ]
    },
    {
        "id": "1d15333913b8dfa2",
        "type": "switch",
        "z": "13630048e9aa6406",
        "name": "",
        "property": "payload.payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nempty"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 1030,
        "y": 1740,
        "wires": [
            [
                "27dd08283eca2944"
            ],
            [
                "0e1c136c31f8ec7b"
            ]
        ]
    },
    {
        "id": "27dd08283eca2944",
        "type": "change",
        "z": "13630048e9aa6406",
        "name": "set contactId",
        "rules": [
            {
                "t": "set",
                "p": "contactId",
                "pt": "msg",
                "to": "payload.payload[0].id",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1230,
        "y": 1734,
        "wires": [
            [
                "ef63cdb7ec380b4c"
            ]
        ]
    },
    {
        "id": "04606665acd8a826",
        "type": "change",
        "z": "13630048e9aa6406",
        "name": "set contactId",
        "rules": [
            {
                "t": "set",
                "p": "contactId",
                "pt": "msg",
                "to": "payload.payload.contact.id",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1630,
        "y": 1774,
        "wires": [
            [
                "ef63cdb7ec380b4c"
            ]
        ]
    },
    {
        "id": "e6994229074119cb",
        "type": "subflow:8e9dd0b44d3c40ea",
        "z": "13630048e9aa6406",
        "name": "",
        "x": 2720,
        "y": 1734,
        "wires": [
            [
                "0bdab489ec90e436"
            ],
            []
        ]
    },
    {
        "id": "0954d5f10c828b1c",
        "type": "function",
        "z": "13630048e9aa6406",
        "name": "create message",
        "func": "msg.method = \"POST\";\nmsg.url = `${msg.chatwootApiUrl}/accounts/${msg.accountId}/conversations/${msg.conversationId}/messages`;\n\nmsg.payload = {\n    \"id\": 0,\n    \"content\": \"first message\",\n    \"inbox_id\": 0,\n    \"conversation_id\": 0,\n    \"message_type\": 0,\n    \"content_type\": null,\n    \"content_attributes\": {},\n    \"created_at\": 0,\n    \"private\": false,\n    \"sender\": {\n        \"id\": 0,\n        \"name\": \"BotUser\",\n        \"type\": \"contact\"\n    }\n};\nmsg.headers = {};\nmsg.headers['Content-Type'] = 'application/json';\nmsg.headers['api_access_token'] = msg.chatwootApiKey;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2520,
        "y": 1734,
        "wires": [
            [
                "e6994229074119cb"
            ]
        ]
    },
    {
        "id": "fd74e06fd6b92e18",
        "type": "change",
        "z": "13630048e9aa6406",
        "name": "set conversationId",
        "rules": [
            {
                "t": "set",
                "p": "conversationId",
                "pt": "msg",
                "to": "payload.id",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2270,
        "y": 1734,
        "wires": [
            [
                "0954d5f10c828b1c"
            ]
        ]
    },
    {
        "id": "0bdab489ec90e436",
        "type": "function",
        "z": "13630048e9aa6406",
        "name": "set conversationId",
        "func": "msg.service = \"CustomerAPI\"\n\nmsg.method = \"POST\"\nmsg.url = `${msg.customerApiUrl}/settings`;\nmsg.headers = {\n    \"authorization\": msg.customerApiKey,\n    \"x-trace-id\": msg.traceID,\n    \"x-user-id\": msg.userID\n}\n\nlet cart = [];\n\nmsg.payload = {\n    \"conversationId\": msg.conversationId\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2930,
        "y": 1734,
        "wires": [
            [
                "0aca190daefaebde"
            ]
        ]
    },
    {
        "id": "0aca190daefaebde",
        "type": "subflow:8e9dd0b44d3c40ea",
        "z": "13630048e9aa6406",
        "name": "",
        "x": 3120,
        "y": 1734,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "42aaa5a0342f2654",
        "type": "inject",
        "z": "13630048e9aa6406",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 240,
        "y": 1774,
        "wires": [
            [
                "d6642564cbdfbf0f"
            ]
        ]
    },
    {
        "id": "d6642564cbdfbf0f",
        "type": "function",
        "z": "13630048e9aa6406",
        "name": "get envs",
        "func": "\nmsg.apiVersion = \"v1\";\n\nmsg.messagesApiKey = env.get(\"MESSAGES_API_KEY\");\nmsg.customerApiKey = env.get(\"CUSTOMER_API_KEY\");\nmsg.messagesApiUrl = env.get(\"MESSAGES_API_URL\") + \"/\" + msg.apiVersion;\nmsg.customerApi = env.get(\"CUSTOMER_API_URL\") + \"/\" + msg.apiVersion;\n\nmsg.externalApiUrl = env.get(\"EXTERNAL_API_URL\")\nmsg.externalApiKey = env.get(\"EXTERNAL_API_KEY\")\n\nmsg.chatwootApiUrl = env.get(\"CHATWOOT_API_URL\") ? env.get(\"CHATWOOT_API_URL\") : \"https://chatwoot-dev.chatinc.com\" \nmsg.chatwootApiUrl += \"/api/v1\" \nmsg.chatwootApiKey = env.get(\"CHATWOOT_API_KEY\") ? env.get(\"CHATWOOT_API_KEY\") : \"GXWgPAGkf2Y3wXwW2tELRWS2\"\n\n\nmsg.stage = env.get(\"NODE_ENV\");\n\nmsg.lang = \"en\"\n\nmsg.accountId = 1;\n\nmsg.chatId = \"+380962672870\"\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 420,
        "y": 1774,
        "wires": [
            [
                "95de7aea0a25178c"
            ]
        ]
    },
    {
        "id": "37cec06169edb4c3",
        "type": "debug",
        "z": "13630048e9aa6406",
        "name": "debug 10",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "headers",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 860,
        "y": 1914,
        "wires": []
    },
    {
        "id": "19200cd3e79a27cd",
        "type": "debug",
        "z": "13630048e9aa6406",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "text",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1320,
        "y": 120,
        "wires": []
    },
    {
        "id": "21969858e33d8682",
        "type": "function",
        "z": "13630048e9aa6406",
        "name": "function 2",
        "func": "msg.JpgUrl = msg.payload[\"s:Envelope\"][\"s:Body\"][0].FindTrafficFilesResponse[0].FindTrafficFilesResult[0][\"a:FileDetails\"][0][\"b:NoticeFileDetail\"][0][\"b:Url\"][0]\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1280,
        "y": 680,
        "wires": [
            [
                "5c0f93d5f6a5b54f",
                "ead845f899144b23"
            ]
        ]
    },
    {
        "id": "5c0f93d5f6a5b54f",
        "type": "debug",
        "z": "13630048e9aa6406",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1270,
        "y": 600,
        "wires": []
    },
    {
        "id": "e8ec48f9db9035cf",
        "type": "function",
        "z": "13630048e9aa6406",
        "name": "",
        "func": "msg.method = \"POST\";\nmsg.url = `${msg.externalApiUrl}/TrafficFines.svc`;\n\nmsg.payload = `<soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:tem=\"http://tempuri.org/\" xmlns:traf=\"http://schemas.datacontract.org/2004/07/TrafficFineService.Model.Request\"><soapenv:Header/><soapenv:Body><tem:FindTrafficFiles><!--Optional:--><tem:request><!--Optional:--><traf:MessageDate>2022-11-28</traf:MessageDate><!--Optional:--><traf:MessageId>A88A947E-6861-47EA-8173-B771FFE2022B</traf:MessageId><!--Optional:--><traf:Partner><!--Optional:--><traf:Code>CSH</traf:Code><!--Optional:--><traf:Key>c41#@hCP</traf:Key></traf:Partner><!--Optional:--><traf:IdNumber></traf:IdNumber><!--Optional:--><traf:NoticeNumber24/37769/142/075704</traf:NoticeNumber></tem:request></tem:FindTrafficFiles></soapenv:Body></soapenv:Envelope>`;\nmsg.headers = {};\nmsg.headers['Content-Type'] = 'text/xml';\nmsg.headers['SOAPAction'] = 'http://tempuri.org/ITrafficFinesService/FindTrafficFines';\n// msg.headers['Ocp-Apim-Subscription-Key'] = '3dec01f1e4524c58bb67f876fe8ee2b8';\n// msg.headers['Authorization'] = `Basic ${msg.externalApiKey}`;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1740,
        "y": 1520,
        "wires": [
            [
                "555f398c4ffc8643",
                "b2c8a0fb9b0ea068"
            ]
        ]
    },
    {
        "id": "555f398c4ffc8643",
        "type": "http request",
        "z": "13630048e9aa6406",
        "name": "",
        "method": "use",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "insecureHTTPParser": false,
        "authType": "",
        "senderr": false,
        "headers": [],
        "x": 1930,
        "y": 1520,
        "wires": [
            [
                "b4350e5f775f9e71",
                "2e66c48e5d315617"
            ]
        ]
    },
    {
        "id": "b4350e5f775f9e71",
        "type": "debug",
        "z": "13630048e9aa6406",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "statusCode",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 2160,
        "y": 1460,
        "wires": []
    },
    {
        "id": "8ef1ca247ccaca8f",
        "type": "xml",
        "z": "13630048e9aa6406",
        "name": "",
        "property": "payload",
        "attr": "",
        "chr": "",
        "x": 2330,
        "y": 1520,
        "wires": [
            [
                "70e2cdee4ec36bbc"
            ]
        ]
    },
    {
        "id": "b2c8a0fb9b0ea068",
        "type": "debug",
        "z": "13630048e9aa6406",
        "name": "debug 17",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1920,
        "y": 1460,
        "wires": []
    },
    {
        "id": "70e2cdee4ec36bbc",
        "type": "debug",
        "z": "13630048e9aa6406",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 2550,
        "y": 1460,
        "wires": []
    },
    {
        "id": "5d5fd6686f742a0b",
        "type": "xml",
        "z": "13630048e9aa6406",
        "name": "",
        "property": "payload",
        "attr": "",
        "chr": "",
        "x": 1090,
        "y": 1520,
        "wires": [
            [
                "9c955e693ecd09e6",
                "9ad8adc68f893807"
            ]
        ]
    },
    {
        "id": "9c955e693ecd09e6",
        "type": "debug",
        "z": "13630048e9aa6406",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1290,
        "y": 1460,
        "wires": []
    },
    {
        "id": "9ad8adc68f893807",
        "type": "function",
        "z": "13630048e9aa6406",
        "name": "set rows",
        "func": "msg.text = \"http://196.223.110.162/EMPD.Dev.FS/api/filestore?id=ubAuX0LNSwwNxgZ%2bf3JjpH8drxNYB8O4OFqluqE2nDUxw8sDEU1ervYflFU7uOp1T%2bcden2JBjO1GKh%2fC3XL3y77iTY2%2bwUDfBP6u5amOwV%2fJ3D3Fjt3lCL5NzffVC4gfMNHGQtmN%2bxLaBBNdQVHlw%3d%3d\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1280,
        "y": 1520,
        "wires": [
            [
                "98eb29fe27230c21"
            ]
        ]
    },
    {
        "id": "ca6cdea8951b4de6",
        "type": "link out",
        "z": "13630048e9aa6406",
        "name": "erroe out",
        "mode": "link",
        "links": [
            "a0a45e24a84f7526"
        ],
        "x": 1105,
        "y": 1600,
        "wires": []
    },
    {
        "id": "2e66c48e5d315617",
        "type": "switch",
        "z": "13630048e9aa6406",
        "name": "",
        "property": "statusCode",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "200",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "201",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "202",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 4,
        "x": 2130,
        "y": 1520,
        "wires": [
            [
                "8ef1ca247ccaca8f"
            ],
            [
                "8ef1ca247ccaca8f"
            ],
            [
                "8ef1ca247ccaca8f"
            ],
            [
                "5a06dcd32818fc3f"
            ]
        ]
    },
    {
        "id": "5a06dcd32818fc3f",
        "type": "link out",
        "z": "13630048e9aa6406",
        "name": "erroe out",
        "mode": "link",
        "links": [
            "a0a45e24a84f7526"
        ],
        "x": 2295,
        "y": 1580,
        "wires": []
    },
    {
        "id": "4de547f116857a9e",
        "type": "switch",
        "z": "13630048e9aa6406",
        "name": "",
        "property": "statusCode",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "200",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "201",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "202",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 4,
        "x": 910,
        "y": 1520,
        "wires": [
            [
                "5d5fd6686f742a0b"
            ],
            [
                "5d5fd6686f742a0b"
            ],
            [
                "5d5fd6686f742a0b"
            ],
            [
                "ca6cdea8951b4de6"
            ]
        ]
    },
    {
        "id": "edf5f5a051c846df",
        "type": "debug",
        "z": "13630048e9aa6406",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "statusCode",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 920,
        "y": 1460,
        "wires": []
    },
    {
        "id": "36c5a6bc73ac5d43",
        "type": "debug",
        "z": "13630048e9aa6406",
        "name": "debug 18",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 700,
        "y": 1460,
        "wires": []
    },
    {
        "id": "ba560588daa76bd2",
        "type": "http request",
        "z": "13630048e9aa6406",
        "name": "",
        "method": "use",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "senderr": false,
        "x": 710,
        "y": 1520,
        "wires": [
            [
                "edf5f5a051c846df",
                "4de547f116857a9e"
            ]
        ]
    },
    {
        "id": "22ef82f6f9851145",
        "type": "inject",
        "z": "13630048e9aa6406",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 240,
        "y": 1440,
        "wires": [
            [
                "ddc45350bd6ac966"
            ]
        ]
    },
    {
        "id": "ddc45350bd6ac966",
        "type": "function",
        "z": "13630048e9aa6406",
        "name": "get envs",
        "func": "\nmsg.apiVersion = \"v1\";\n\nmsg.messagesApiKey = env.get(\"MESSAGES_API_KEY\");\nmsg.customerApiKey = env.get(\"CUSTOMER_API_KEY\");\nmsg.messagesApiUrl = env.get(\"MESSAGES_API_URL\") + \"/\" + msg.apiVersion;\nmsg.customerApi = env.get(\"CUSTOMER_API_URL\") + \"/\" + msg.apiVersion;\n\nmsg.externalApiUrl = env.get(\"EXTERNAL_API_URL\")\nmsg.externalApiKey = env.get(\"EXTERNAL_API_KEY\")\n\nmsg.text = '14/29973/145/060105'\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 460,
        "y": 1440,
        "wires": [
            [
                "42e5402184daacaf"
            ]
        ]
    },
    {
        "id": "98eb29fe27230c21",
        "type": "debug",
        "z": "13630048e9aa6406",
        "name": "rows",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1530,
        "y": 1440,
        "wires": []
    },
    {
        "id": "42e5402184daacaf",
        "type": "function",
        "z": "13630048e9aa6406",
        "name": "",
        "func": "\n\nmsg.method = \"POST\";\nmsg.url = `${msg.externalApiUrl}/TrafficFines.svc`;\n\nmsg.payload = `<soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:tem=\"http://tempuri.org/\" xmlns:traf=\"http://schemas.datacontract.org/2004/07/TrafficFineService.Model.Request\"><soapenv:Header/><soapenv:Body><tem:FindTrafficFiles><!--Optional:--><tem:request><!--Optional:--><traf:MessageDate>2022-11-28</traf:MessageDate><!--Optional:--><traf:MessageId>A88A947E-6861-47EA-8173-B771FFE2022B</traf:MessageId><!--Optional:--><traf:Partner><!--Optional:--><traf:Code>CSH</traf:Code><!--Optional:--><traf:Key>c41#@hCP</traf:Key></traf:Partner><!--Optional:--><traf:IdNumber></traf:IdNumber><!--Optional:--><traf:NoticeNumber>${msg.text}</traf:NoticeNumber></tem:request></tem:FindTrafficFiles></soapenv:Body></soapenv:Envelope>`;\nmsg.headers = {};\nmsg.headers['Content-Type'] = 'text/xml';\nmsg.headers['SOAPAction'] = 'http://tempuri.org/ITrafficFinesService/FindTrafficFiles';\n// msg.headers['Ocp-Apim-Subscription-Key'] = '3dec01f1e4524c58bb67f876fe8ee2b8';\n// msg.headers['Authorization'] = `Basic ${msg.externalApiKey}`;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 520,
        "y": 1520,
        "wires": [
            [
                "36c5a6bc73ac5d43",
                "ba560588daa76bd2"
            ]
        ]
    },
    {
        "id": "f668937a37c25aac",
        "type": "debug",
        "z": "13630048e9aa6406",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "rows",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1180,
        "y": 480,
        "wires": []
    },
    {
        "id": "81cb5d1cadc1944e",
        "type": "function",
        "z": "13630048e9aa6406",
        "name": "set rows",
        "func": "const trafficFineDetail = msg.payload[\"s:Envelope\"][\"s:Body\"][0].FindTrafficFinesResponse[0].FindTrafficFinesResult[0][\"a:FineDetails\"][0][\"b:TrafficFineDetail\"]\n\nmsg.rows = [];\n\ntrafficFineDetail.forEach((item, index) => {\n    msg.rows.push({\n        title: item[\"b:NoticeNumber\"][0]\n    });\n});\n\nreturn msg;\n\n// msg.rows = [\n//     {\n//         \"title\": msg.payload[\"s:Envelope\"][\"s:Body\"][0].FindTrafficFinesResponse[0].FindTrafficFinesResult[0][\"a:FineDetails\"][0][\"b:TrafficFineDetail\"][0][\"b:NoticeNumber\"][0]\n//     },\n//     {\n//         \"title\": msg.payload[\"s:Envelope\"][\"s:Body\"][0].FindTrafficFinesResponse[0].FindTrafficFinesResult[0][\"a:FineDetails\"][0][\"b:TrafficFineDetail\"][1][\"b:NoticeNumber\"][0]\n//     },\n//     {\n//         \"title\": msg.payload[\"s:Envelope\"][\"s:Body\"][0].FindTrafficFinesResponse[0].FindTrafficFinesResult[0][\"a:FineDetails\"][0][\"b:TrafficFineDetail\"][2][\"b:NoticeNumber\"][0]\n//     },\n//     {\n//         \"title\": msg.payload[\"s:Envelope\"][\"s:Body\"][0].FindTrafficFinesResponse[0].FindTrafficFinesResult[0][\"a:FineDetails\"][0][\"b:TrafficFineDetail\"][3][\"b:NoticeNumber\"][0]\n//     }];\n\n// return msg;\n\n// msg.rows = [{\n//     \"title\": \"CA 687666\"\n// }, {\n//     \"title\": \"CA 000997\"\n// }, {\n//     \"title\": \"CY 500000\"\n// }];\n// return msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1120,
        "y": 400,
        "wires": [
            [
                "f668937a37c25aac"
            ]
        ]
    },
    {
        "id": "7c7a2c46ef35c6e3",
        "type": "function",
        "z": "13630048e9aa6406",
        "name": "",
        "func": "\n\nmsg.method = \"POST\";\nmsg.url = `${msg.externalApiUrl}/TrafficFines.svc`;\n\nmsg.payload = `<soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:tem=\"http://tempuri.org/\" xmlns:traf=\"http://schemas.datacontract.org/2004/07/TrafficFineService.Model.Request\"><soapenv:Header/><soapenv:Body><tem:FindTrafficFiles><!--Optional:--><tem:request><!--Optional:--><traf:MessageDate>2022-11-28</traf:MessageDate><!--Optional:--><traf:MessageId>A88A947E-6861-47EA-8173-B771FFE2022B</traf:MessageId><!--Optional:--><traf:Partner><!--Optional:--><traf:Code>CSH</traf:Code><!--Optional:--><traf:Key>c41#@hCP</traf:Key></traf:Partner><!--Optional:--><traf:IdNumber></traf:IdNumber><!--Optional:--><traf:NoticeNumber>${msg.text}</traf:NoticeNumber></tem:request></tem:FindTrafficFiles></soapenv:Body></soapenv:Envelope>`;\nmsg.headers = {};\nmsg.headers['Content-Type'] = 'text/xml';\nmsg.headers['SOAPAction'] = 'http://tempuri.org/ITrafficFinesService/FindTrafficFiles';\n// msg.headers['Ocp-Apim-Subscription-Key'] = '3dec01f1e4524c58bb67f876fe8ee2b8';\n// msg.headers['Authorization'] = `Basic ${msg.externalApiKey}`;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 680,
        "y": 880,
        "wires": [
            [
                "d6cb54e33baecaf5",
                "db2e6405c2cdf0f5"
            ]
        ]
    },
    {
        "id": "d6cb54e33baecaf5",
        "type": "http request",
        "z": "13630048e9aa6406",
        "name": "",
        "method": "use",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "senderr": false,
        "x": 870,
        "y": 880,
        "wires": [
            [
                "3df7575ae59ad452",
                "c4184be7e5724af3"
            ]
        ]
    },
    {
        "id": "3df7575ae59ad452",
        "type": "debug",
        "z": "13630048e9aa6406",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "statusCode",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1080,
        "y": 840,
        "wires": []
    },
    {
        "id": "c4184be7e5724af3",
        "type": "xml",
        "z": "13630048e9aa6406",
        "name": "",
        "property": "payload",
        "attr": "",
        "chr": "",
        "x": 1050,
        "y": 880,
        "wires": [
            [
                "996f293e4e5b183f",
                "3419ca3e17b8b945"
            ]
        ]
    },
    {
        "id": "db2e6405c2cdf0f5",
        "type": "debug",
        "z": "13630048e9aa6406",
        "name": "debug 24",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 860,
        "y": 840,
        "wires": []
    },
    {
        "id": "996f293e4e5b183f",
        "type": "debug",
        "z": "13630048e9aa6406",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1290,
        "y": 840,
        "wires": []
    },
    {
        "id": "eaf9dbb1e6c641cf",
        "type": "function",
        "z": "13630048e9aa6406",
        "name": "get envs",
        "func": "\nmsg.apiVersion = \"v1\";\n\nmsg.messagesApiKey = env.get(\"MESSAGES_API_KEY\");\nmsg.customerApiKey = env.get(\"CUSTOMER_API_KEY\");\nmsg.messagesApiUrl = env.get(\"MESSAGES_API_URL\") + \"/\" + msg.apiVersion;\nmsg.customerApi = env.get(\"CUSTOMER_API_URL\") + \"/\" + msg.apiVersion;\n\nmsg.externalApiUrl = env.get(\"EXTERNAL_API_URL\")\nmsg.externalApiKey = env.get(\"EXTERNAL_API_KEY\")\n\n// 14/29973/145/060105\n// 15/02438/145/005036\n// 15/52239/145/104638\n\nmsg.text = '14/29973/145/060105'\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 460,
        "y": 880,
        "wires": [
            [
                "7c7a2c46ef35c6e3"
            ]
        ]
    },
    {
        "id": "7c375bab383116cf",
        "type": "inject",
        "z": "13630048e9aa6406",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 240,
        "y": 880,
        "wires": [
            [
                "eaf9dbb1e6c641cf"
            ]
        ]
    },
    {
        "id": "925185bc43a8a635",
        "type": "debug",
        "z": "13630048e9aa6406",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "text",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1440,
        "y": 880,
        "wires": []
    },
    {
        "id": "3419ca3e17b8b945",
        "type": "change",
        "z": "13630048e9aa6406",
        "name": "Png set",
        "rules": [
            {
                "t": "set",
                "p": "png",
                "pt": "msg",
                "to": "payload[\"s:Envelope\"][\"s:Body\"][0].FindTrafficFilesResponse[0].FindTrafficFilesResult[0][\"a:FileDetails\"][0][\"b:NoticeFileDetail\"][0][\"b:Url\"][0]",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1260,
        "y": 880,
        "wires": [
            [
                "925185bc43a8a635"
            ]
        ]
    },
    {
        "id": "4bf895d0bcc04412",
        "type": "debug",
        "z": "13630048e9aa6406",
        "name": "debug 25",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 860,
        "y": 1280,
        "wires": []
    },
    {
        "id": "47fb75d132af6b20",
        "type": "subflow:8e9dd0b44d3c40ea",
        "z": "13630048e9aa6406",
        "name": "",
        "x": 840,
        "y": 1100,
        "wires": [
            [
                "82a8981b5793348e"
            ],
            [
                "ab1fdf54a865c380"
            ]
        ]
    },
    {
        "id": "24b3d8a4b05d0d5e",
        "type": "function",
        "z": "13630048e9aa6406",
        "name": "get contact",
        "func": "msg.method = \"GET\";\nmsg.url = `${msg.chatwootApiUrl}/accounts/${msg.accountId}/contacts/search?q=${msg.chatId}`;\n\nmsg.payload = {};\nmsg.headers = {};\nmsg.headers['Content-Type'] = 'application/json';\nmsg.headers['api_access_token'] = msg.chatwootApiKey;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 650,
        "y": 1140,
        "wires": [
            [
                "47fb75d132af6b20",
                "4bf895d0bcc04412"
            ]
        ]
    },
    {
        "id": "5f9a25b81dbe7c96",
        "type": "function",
        "z": "13630048e9aa6406",
        "name": "get envs",
        "func": "\nmsg.apiVersion = \"v1\";\n\nmsg.messagesApiKey = env.get(\"MESSAGES_API_KEY\");\nmsg.customerApiKey = env.get(\"CUSTOMER_API_KEY\");\nmsg.messagesApiUrl = env.get(\"MESSAGES_API_URL\") + \"/\" + msg.apiVersion;\nmsg.customerApi = env.get(\"CUSTOMER_API_URL\") + \"/\" + msg.apiVersion;\n\nmsg.externalApiUrl = env.get(\"EXTERNAL_API_URL\")\nmsg.externalApiKey = env.get(\"EXTERNAL_API_KEY\")\n\nmsg.chatwootApiUrl = env.get(\"CHATWOOT_API_URL\") ? env.get(\"CHATWOOT_API_URL\") : \"https://chatwoot-dev.chatinc.com\" \nmsg.chatwootApiUrl += \"/api/v1\" \nmsg.chatwootApiKey = env.get(\"CHATWOOT_API_KEY\") ? env.get(\"CHATWOOT_API_KEY\") : \"GXWgPAGkf2Y3wXwW2tELRWS2\"\n\n\nmsg.stage = env.get(\"NODE_ENV\");\n\nmsg.lang = \"en\"\n\nmsg.accountId = 20;\n\nmsg.chatId = \"+380665415960\"\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 420,
        "y": 1140,
        "wires": [
            [
                "24b3d8a4b05d0d5e"
            ]
        ]
    },
    {
        "id": "355aeb26ca8455c0",
        "type": "inject",
        "z": "13630048e9aa6406",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 240,
        "y": 1140,
        "wires": [
            [
                "5f9a25b81dbe7c96"
            ]
        ]
    },
    {
        "id": "07239543f2437daa",
        "type": "subflow:8e9dd0b44d3c40ea",
        "z": "13630048e9aa6406",
        "name": "",
        "x": 1560,
        "y": 1100,
        "wires": [
            [
                "ccc590c06542c558"
            ],
            []
        ]
    },
    {
        "id": "ab1fdf54a865c380",
        "type": "function",
        "z": "13630048e9aa6406",
        "name": "create contact",
        "func": "msg.method = \"POST\";\nmsg.url = `${msg.chatwootApiUrl}/accounts/${msg.accountId}/contacts`;\n\nmsg.payload = {\n    \"phone_number\": msg.chatId,\n    \"additional_attributes\": {},\n    \"contact_inboxes\": [\n        {\n            \"source_id\": \"4f8e3124-2beb-450a-a3e6-7fcd92e011c5\",\n            \"inbox\": {\n                \"id\": 0,\n                \"name\": \"string\",\n                \"website_url\": \"string\",\n                \"channel_type\": \"string\",\n                \"avatar_url\": \"string\",\n                \"widget_color\": \"string\",\n                \"website_token\": \"string\",\n                \"enable_auto_assignment\": true,\n                \"web_widget_script\": \"string\",\n                \"welcome_title\": \"string\",\n                \"welcome_tagline\": \"string\",\n                \"greeting_enabled\": true,\n                \"greeting_message\": \"string\"\n            }\n        }\n    ]\n};\nmsg.headers = {};\nmsg.headers['Content-Type'] = 'application/json';\nmsg.headers['api_access_token'] = msg.chatwootApiKey;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1360,
        "y": 1100,
        "wires": [
            [
                "07239543f2437daa"
            ]
        ]
    },
    {
        "id": "82a8981b5793348e",
        "type": "switch",
        "z": "13630048e9aa6406",
        "name": "",
        "property": "payload.payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nempty"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 2,
        "x": 1130,
        "y": 1060,
        "wires": [
            [
                "afd398e19eb75f64",
                "49f844f8ec1d361e"
            ],
            [
                "ab1fdf54a865c380",
                "bb589aa0294ac852"
            ]
        ]
    },
    {
        "id": "afd398e19eb75f64",
        "type": "change",
        "z": "13630048e9aa6406",
        "name": "set contactId",
        "rules": [
            {
                "t": "set",
                "p": "contactId",
                "pt": "msg",
                "to": "payload.payload[0].id",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1330,
        "y": 1054,
        "wires": [
            [
                "a4220ffdf5608b12"
            ]
        ]
    },
    {
        "id": "ccc590c06542c558",
        "type": "change",
        "z": "13630048e9aa6406",
        "name": "set contactId",
        "rules": [
            {
                "t": "set",
                "p": "contactId",
                "pt": "msg",
                "to": "payload.payload.contact.id",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1730,
        "y": 1094,
        "wires": [
            [
                "78fa19db35358621"
            ]
        ]
    },
    {
        "id": "49f844f8ec1d361e",
        "type": "debug",
        "z": "13630048e9aa6406",
        "name": "debug 26",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1300,
        "y": 960,
        "wires": []
    },
    {
        "id": "a4220ffdf5608b12",
        "type": "debug",
        "z": "13630048e9aa6406",
        "name": "debug 27",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1600,
        "y": 1020,
        "wires": []
    },
    {
        "id": "78fa19db35358621",
        "type": "debug",
        "z": "13630048e9aa6406",
        "name": "debug 28",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1940,
        "y": 1260,
        "wires": []
    },
    {
        "id": "bb589aa0294ac852",
        "type": "debug",
        "z": "13630048e9aa6406",
        "name": "debug 29",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1320,
        "y": 1220,
        "wires": []
    },
    {
        "id": "ead845f899144b23",
        "type": "function",
        "z": "13630048e9aa6406",
        "name": "get jpg",
        "func": "msg.method = \"GET\";\nmsg.url = msg.JpgUrl;\n// msg.url = 'https://i.ibb.co/1XPzmg5/Screenshot-2023-02-03-at-11-03-10.png'\n\n// msg.payload = `<soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:tem=\"http://tempuri.org/\" xmlns:traf=\"http://schemas.datacontract.org/2004/07/TrafficFineService.Model.Request\"><soapenv:Header/><soapenv:Body><tem:FindTrafficFiles><!--Optional:--><tem:request><!--Optional:--><traf:MessageDate>2022-11-28</traf:MessageDate><!--Optional:--><traf:MessageId>A88A947E-6861-47EA-8173-B771FFE2022B</traf:MessageId><!--Optional:--><traf:Partner><!--Optional:--><traf:Code>CSH</traf:Code><!--Optional:--><traf:Key>c41#@hCP</traf:Key></traf:Partner><!--Optional:--><traf:IdNumber></traf:IdNumber><!--Optional:--><traf:NoticeNumber>${msg.text}</traf:NoticeNumber></tem:request></tem:FindTrafficFiles></soapenv:Body></soapenv:Envelope>`;\n// msg.headers = {};\n// msg.headers['Content-Type'] = 'text/xml';\n// msg.headers['SOAPAction'] = 'http://tempuri.org/ITrafficFinesService/FindTrafficFiles';\n// // msg.headers['Ocp-Apim-Subscription-Key'] = '3dec01f1e4524c58bb67f876fe8ee2b8';\n// // msg.headers['Authorization'] = `Basic ${msg.externalApiKey}`;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1470,
        "y": 680,
        "wires": [
            [
                "b87050ac1704b7ea",
                "34efc26c3e6c744c"
            ]
        ]
    },
    {
        "id": "b87050ac1704b7ea",
        "type": "debug",
        "z": "13630048e9aa6406",
        "name": "debug 34",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1480,
        "y": 600,
        "wires": []
    },
    {
        "id": "8cce81bb68d3c381",
        "type": "file in",
        "z": "13630048e9aa6406",
        "name": "",
        "filename": "payload.Data.Base64FileData",
        "filenameType": "msg",
        "format": "stream",
        "chunk": false,
        "sendError": false,
        "encoding": "base64",
        "allProps": false,
        "x": 2120,
        "y": 540,
        "wires": [
            [
                "c8f893b326b623d6"
            ]
        ]
    },
    {
        "id": "c8f893b326b623d6",
        "type": "debug",
        "z": "13630048e9aa6406",
        "name": "debug 38",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2120,
        "y": 440,
        "wires": []
    },
    {
        "id": "896687d582e74999",
        "type": "function",
        "z": "13630048e9aa6406",
        "name": "get jpg",
        "func": "msg.method = \"GET\";\nmsg.url = \"http://192.168.60.33/OpusFiles/EMPD/CameraImages/ED/2020/6/ED2753/49/0D244EDF-5FA6-4C39-97F6-8AB3011BF682_001.jpg\";\n\n// msg.payload = `<soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:tem=\"http://tempuri.org/\" xmlns:traf=\"http://schemas.datacontract.org/2004/07/TrafficFineService.Model.Request\"><soapenv:Header/><soapenv:Body><tem:FindTrafficFiles><!--Optional:--><tem:request><!--Optional:--><traf:MessageDate>2022-11-28</traf:MessageDate><!--Optional:--><traf:MessageId>A88A947E-6861-47EA-8173-B771FFE2022B</traf:MessageId><!--Optional:--><traf:Partner><!--Optional:--><traf:Code>CSH</traf:Code><!--Optional:--><traf:Key>c41#@hCP</traf:Key></traf:Partner><!--Optional:--><traf:IdNumber></traf:IdNumber><!--Optional:--><traf:NoticeNumber>${msg.text}</traf:NoticeNumber></tem:request></tem:FindTrafficFiles></soapenv:Body></soapenv:Envelope>`;\n// msg.headers = {};\n// msg.headers['Content-Type'] = 'text/xml';\n// msg.headers['SOAPAction'] = 'http://tempuri.org/ITrafficFinesService/FindTrafficFiles';\n// // msg.headers['Ocp-Apim-Subscription-Key'] = '3dec01f1e4524c58bb67f876fe8ee2b8';\n// // msg.headers['Authorization'] = `Basic ${msg.externalApiKey}`;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2130,
        "y": 900,
        "wires": [
            [
                "6967fe7f96f698ce",
                "f9dced228e5d10a9"
            ]
        ]
    },
    {
        "id": "6967fe7f96f698ce",
        "type": "http request",
        "z": "13630048e9aa6406",
        "name": "",
        "method": "use",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "senderr": false,
        "x": 2330,
        "y": 900,
        "wires": [
            [
                "b470b202cace7e7e",
                "eb3a586dad5418fe",
                "03b968bf2cfbe812"
            ]
        ]
    },
    {
        "id": "f9dced228e5d10a9",
        "type": "debug",
        "z": "13630048e9aa6406",
        "name": "debug 39",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2140,
        "y": 820,
        "wires": []
    },
    {
        "id": "b470b202cace7e7e",
        "type": "debug",
        "z": "13630048e9aa6406",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "statusCode",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 2340,
        "y": 980,
        "wires": []
    },
    {
        "id": "eb3a586dad5418fe",
        "type": "debug",
        "z": "13630048e9aa6406",
        "name": "debug 40",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2320,
        "y": 820,
        "wires": []
    },
    {
        "id": "0ebbaab0523a5247",
        "type": "inject",
        "z": "13630048e9aa6406",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 1940,
        "y": 900,
        "wires": [
            [
                "896687d582e74999"
            ]
        ]
    },
    {
        "id": "c05d8967555a2df7",
        "type": "function",
        "z": "13630048e9aa6406",
        "name": "set image",
        "func": "msg.fileUrl = msg.payload.url;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2700,
        "y": 680,
        "wires": [
            [
                "d8f3fbdd765868c3",
                "2ff346a36d26cb81"
            ]
        ]
    },
    {
        "id": "03b968bf2cfbe812",
        "type": "function",
        "z": "13630048e9aa6406",
        "name": "StorageAPI",
        "func": "const databuffer = msg.payload;\nmsg.service = \"StorageAPI\"\n\nmsg.method = \"POST\"\nmsg.url = `${msg.storageApiUrl}/v1/storage/upload`;\nmsg.headers = {\n    //\"authorization\": msg.storageApiKey,\n    \"Content-Type\": 'multipart/form-data',\n    \"x-user-id\": msg.userID,\n    \"x-trace-id\": msg.traceID\n}\n\nmsg.payload = {\n        file: {\n            value: databuffer,\n            options: {\n                filename: msg.req.body.originalBody.message.file_name\n            },\n        },\n};\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2570,
        "y": 900,
        "wires": [
            [
                "9432c5592bfa59d3",
                "62e6177843acc919"
            ]
        ]
    },
    {
        "id": "9432c5592bfa59d3",
        "type": "debug",
        "z": "13630048e9aa6406",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 2610,
        "y": 1000,
        "wires": []
    },
    {
        "id": "f898642b8c6d04e1",
        "type": "function",
        "z": "13630048e9aa6406",
        "name": "set image",
        "func": "msg.text = msg.payload.url;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2900,
        "y": 900,
        "wires": [
            []
        ]
    },
    {
        "id": "888d53235ef5a1a5",
        "type": "file",
        "z": "13630048e9aa6406",
        "name": "",
        "filename": "image64.txt",
        "filenameType": "str",
        "appendNewline": true,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 2570,
        "y": 520,
        "wires": [
            [
                "a749b0b1efd7243a",
                "5c6f6d0c15efafc3"
            ]
        ]
    },
    {
        "id": "a749b0b1efd7243a",
        "type": "debug",
        "z": "13630048e9aa6406",
        "name": "debug 41",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2580,
        "y": 420,
        "wires": []
    },
    {
        "id": "5c6f6d0c15efafc3",
        "type": "file in",
        "z": "13630048e9aa6406",
        "name": "",
        "filename": "image64.txt",
        "filenameType": "str",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 2790,
        "y": 580,
        "wires": [
            [
                "50c7e096b026eca6"
            ]
        ]
    },
    {
        "id": "50c7e096b026eca6",
        "type": "debug",
        "z": "13630048e9aa6406",
        "name": "debug 42",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 2980,
        "y": 500,
        "wires": []
    },
    {
        "id": "48fa296697d66440",
        "type": "inject",
        "z": "13630048e9aa6406",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 2840,
        "y": 340,
        "wires": [
            [
                "5c6f6d0c15efafc3"
            ]
        ]
    },
    {
        "id": "e87b31e0411ba4fb",
        "type": "watch",
        "z": "13630048e9aa6406",
        "name": "",
        "files": "image64.txt",
        "recursive": true,
        "x": 2570,
        "y": 340,
        "wires": [
            [
                "50c7e096b026eca6"
            ]
        ]
    },
    {
        "id": "d8f3fbdd765868c3",
        "type": "debug",
        "z": "13630048e9aa6406",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 2830,
        "y": 760,
        "wires": []
    },
    {
        "id": "6169f71a88f48eae",
        "type": "function",
        "z": "13630048e9aa6406",
        "name": "",
        "func": "msg.method = \"POST\";\nmsg.url = `${msg.externalApiUrl}/TrafficFines.svc`;\n\nmsg.payload = `<soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:tem=\"http://tempuri.org/\" xmlns:traf=\"http://schemas.datacontract.org/2004/07/TrafficFineService.Model.Request\"><soapenv:Header/><soapenv:Body><tem:FindTrafficFiles><!--Optional:--><tem:request><!--Optional:--><traf:MessageDate>2022-11-28</traf:MessageDate><!--Optional:--><traf:MessageId>A88A947E-6861-47EA-8173-B771FFE2022B</traf:MessageId><!--Optional:--><traf:Partner><!--Optional:--><traf:Code>CSH</traf:Code><!--Optional:--><traf:Key>c41#@hCP</traf:Key></traf:Partner><!--Optional:--><traf:IdNumber>${msg.idNumber}</traf:IdNumber><!--Optional:--><traf:NoticeNumber>${msg.text}</traf:NoticeNumber></tem:request></tem:FindTrafficFiles></soapenv:Body></soapenv:Envelope>`;\nmsg.headers = {};\nmsg.headers['Content-Type'] = 'text/xml';\nmsg.headers['SOAPAction'] = 'http://tempuri.org/ITrafficFinesService/FindTrafficFiles';\n// msg.headers['Ocp-Apim-Subscription-Key'] = '3dec01f1e4524c58bb67f876fe8ee2b8';\n// msg.headers['Authorization'] = `Basic ${msg.externalApiKey}`;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1240,
        "y": 780,
        "wires": [
            [
                "7ce4141e09ddf675",
                "97f5d3616a6b6d17"
            ]
        ]
    },
    {
        "id": "7ce4141e09ddf675",
        "type": "http request",
        "z": "13630048e9aa6406",
        "name": "",
        "method": "use",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "senderr": false,
        "x": 1450,
        "y": 780,
        "wires": [
            [
                "2ca91954e56a243c"
            ]
        ]
    },
    {
        "id": "2ca91954e56a243c",
        "type": "xml",
        "z": "13630048e9aa6406",
        "name": "",
        "property": "payload",
        "attr": "",
        "chr": "",
        "x": 1650,
        "y": 780,
        "wires": [
            [
                "fb2ef50842817633",
                "07cb1c1259711453"
            ]
        ]
    },
    {
        "id": "fb2ef50842817633",
        "type": "debug",
        "z": "13630048e9aa6406",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1830,
        "y": 780,
        "wires": []
    },
    {
        "id": "97f5d3616a6b6d17",
        "type": "debug",
        "z": "13630048e9aa6406",
        "name": "debug 48",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1380,
        "y": 740,
        "wires": []
    },
    {
        "id": "07cb1c1259711453",
        "type": "function",
        "z": "13630048e9aa6406",
        "name": "get pdfUrl",
        "func": "let NoticeFileDetail = msg.payload[\"s:Envelope\"][\"s:Body\"][0].FindTrafficFilesResponse[0].FindTrafficFilesResult[0][\"a:FileDetails\"][0][\"b:NoticeFileDetail\"];\nfor (let i = 0; i < NoticeFileDetail.length; i++) {\n    if (NoticeFileDetail[i][\"b:Extension\"][0] == \"pdf\") {\n        msg.pdfUrl = NoticeFileDetail[i][\"b:Url\"][0];\n        break;\n    }\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1740,
        "y": 840,
        "wires": [
            [
                "fb9bcef82fa63682",
                "1b3c0a0d151f207c"
            ]
        ]
    },
    {
        "id": "fb9bcef82fa63682",
        "type": "debug",
        "z": "13630048e9aa6406",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "pdfUrl",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1930,
        "y": 840,
        "wires": []
    },
    {
        "id": "633ec9b7da5473f2",
        "type": "function",
        "z": "13630048e9aa6406",
        "name": "get TrafficFines",
        "func": "msg.method = \"POST\";\nmsg.url = `${msg.externalApiUrl}/TrafficFines.svc`;\n\nmsg.payload = `<soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:tem=\"http://tempuri.org/\" xmlns:traf=\"http://schemas.datacontract.org/2004/07/TrafficFineService.Model.Request\"><soapenv:Header/><soapenv:Body><tem:FindTrafficFines><!--Optional:--><tem:enquiry><!--Optional:--><traf:MessageDate>2022-11-28</traf:MessageDate><!--Optional:--><traf:MessageId>A88A947E-6861-47EA-8173-B771FFE2022B</traf:MessageId><!--Optional:--><traf:Partner><!--Optional:--><traf:Code>CSH</traf:Code><!--Optional:--><traf:Key>c41#@hCP</traf:Key></traf:Partner><!--Optional:--><traf:IdentifierType>RSAIDNumber</traf:IdentifierType><!--Optional:--><traf:IdentifierValue>${msg.idNumber}</traf:IdentifierValue></tem:enquiry></tem:FindTrafficFines></soapenv:Body></soapenv:Envelope>`;\nmsg.headers = {};\nmsg.headers['Content-Type'] = 'text/xml';\nmsg.headers['SOAPAction'] = 'http://tempuri.org/ITrafficFinesService/FindTrafficFines';\n// msg.headers['Ocp-Apim-Subscription-Key'] = '3dec01f1e4524c58bb67f876fe8ee2b8';\n// msg.headers['Authorization'] = `Basic ${msg.externalApiKey}`;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 400,
        "y": 780,
        "wires": [
            [
                "e3e5426c9e9e63f7"
            ]
        ]
    },
    {
        "id": "e3e5426c9e9e63f7",
        "type": "http request",
        "z": "13630048e9aa6406",
        "name": "",
        "method": "use",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "senderr": false,
        "x": 630,
        "y": 780,
        "wires": [
            [
                "ce17d8513f6cda48"
            ]
        ]
    },
    {
        "id": "d50ffbd054e837e3",
        "type": "function",
        "z": "13630048e9aa6406",
        "name": "get envs",
        "func": "\nmsg.apiVersion = \"v1\";\n\nmsg.messagesApiKey = env.get(\"MESSAGES_API_KEY\");\nmsg.customerApiKey = env.get(\"CUSTOMER_API_KEY\");\nmsg.messagesApiUrl = env.get(\"MESSAGES_API_URL\") + \"/\" + msg.apiVersion;\nmsg.customerApi = env.get(\"CUSTOMER_API_URL\") + \"/\" + msg.apiVersion;\n\nmsg.externalApiUrl = env.get(\"EXTERNAL_API_URL\")\nmsg.externalApiKey = env.get(\"EXTERNAL_API_KEY\")\n\n// 14/29973/145/060105\n// 15/02438/145/005036\n// 15/52239/145/104638\n\n// msg.text = '14/29973/145/060105'\nmsg.text = '39/56365/145/112914'\nmsg.idNumber = '8809020130080'\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 420,
        "y": 740,
        "wires": [
            [
                "633ec9b7da5473f2"
            ]
        ]
    },
    {
        "id": "cdb51251cf2d4506",
        "type": "inject",
        "z": "13630048e9aa6406",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 200,
        "y": 740,
        "wires": [
            [
                "d50ffbd054e837e3"
            ]
        ]
    },
    {
        "id": "ce17d8513f6cda48",
        "type": "xml",
        "z": "13630048e9aa6406",
        "name": "",
        "property": "payload",
        "attr": "",
        "chr": "",
        "x": 810,
        "y": 780,
        "wires": [
            [
                "e1101cc5e60751af"
            ]
        ]
    },
    {
        "id": "e1101cc5e60751af",
        "type": "debug",
        "z": "13630048e9aa6406",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 970,
        "y": 740,
        "wires": []
    },
    {
        "id": "3fd50dc2902adb2e",
        "type": "function",
        "z": "13630048e9aa6406",
        "name": "get TrafficFines",
        "func": "msg.method = \"POST\";\nmsg.url = `${msg.externalApiUrl}/TrafficFines.svc`;\n\nmsg.payload = `<soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:tem=\"http://tempuri.org/\" xmlns:traf=\"http://schemas.datacontract.org/2004/07/TrafficFineService.Model.Request\"><soapenv:Header/><soapenv:Body><tem:FindTrafficFines><!--Optional:--><tem:enquiry><!--Optional:--><traf:MessageDate>2022-11-28</traf:MessageDate><!--Optional:--><traf:MessageId>A88A947E-6861-47EA-8173-B771FFE2022B</traf:MessageId><!--Optional:--><traf:Partner><!--Optional:--><traf:Code>CSH</traf:Code><!--Optional:--><traf:Key>c41#@hCP</traf:Key></traf:Partner><!--Optional:--><traf:IdentifierType>RSAIDNumber</traf:IdentifierType><!--Optional:--><traf:IdentifierValue>${msg.text}</traf:IdentifierValue></tem:enquiry></tem:FindTrafficFines></soapenv:Body></soapenv:Envelope>`;\nmsg.headers = {};\nmsg.headers['Content-Type'] = 'text/xml';\nmsg.headers['SOAPAction'] = 'http://tempuri.org/ITrafficFinesService/FindTrafficFines';\n// msg.headers['Ocp-Apim-Subscription-Key'] = '3dec01f1e4524c58bb67f876fe8ee2b8';\n// msg.headers['Authorization'] = `Basic ${msg.externalApiKey}`;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 420,
        "y": 540,
        "wires": [
            [
                "9a76c3c511f1a274"
            ]
        ]
    },
    {
        "id": "1041d1311076ad63",
        "type": "xml",
        "z": "13630048e9aa6406",
        "name": "",
        "property": "payload",
        "attr": "",
        "chr": "",
        "x": 850,
        "y": 540,
        "wires": [
            [
                "8742a9488e4bdfd6"
            ]
        ]
    },
    {
        "id": "9a76c3c511f1a274",
        "type": "http request",
        "z": "13630048e9aa6406",
        "name": "",
        "method": "use",
        "ret": "txt",
        "paytoqs": "ignore",
        "url": "",
        "tls": "",
        "persist": false,
        "proxy": "",
        "authType": "",
        "senderr": false,
        "x": 650,
        "y": 540,
        "wires": [
            [
                "1041d1311076ad63"
            ]
        ]
    },
    {
        "id": "8742a9488e4bdfd6",
        "type": "debug",
        "z": "13630048e9aa6406",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 930,
        "y": 480,
        "wires": []
    },
    {
        "id": "1b3c0a0d151f207c",
        "type": "function",
        "z": "13630048e9aa6406",
        "name": "get pdf",
        "func": "msg.url = msg.pdfUrl;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1940,
        "y": 780,
        "wires": [
            [
                "7d10e4c5260d0969"
            ]
        ]
    },
    {
        "id": "7d10e4c5260d0969",
        "type": "subflow:4b227c0aa46a1b6c",
        "z": "13630048e9aa6406",
        "name": "",
        "x": 2130,
        "y": 780,
        "wires": [
            [
                "bdc97fdf06c46008"
            ],
            []
        ]
    },
    {
        "id": "62e6177843acc919",
        "type": "subflow:8e9dd0b44d3c40ea",
        "z": "13630048e9aa6406",
        "name": "",
        "x": 2740,
        "y": 900,
        "wires": [
            [
                "f898642b8c6d04e1"
            ],
            []
        ]
    },
    {
        "id": "be524602abb11a8e",
        "type": "subflow:8e9dd0b44d3c40ea",
        "z": "13630048e9aa6406",
        "name": "",
        "x": 920,
        "y": 440,
        "wires": [
            [
                "81cb5d1cadc1944e"
            ],
            [
                "f668937a37c25aac"
            ]
        ]
    },
    {
        "id": "b51bcd439583346f",
        "type": "function",
        "z": "13630048e9aa6406",
        "name": "StorageAPI",
        "func": "// msg.payload = (Buffer.from(msg.payload.Data.Base64FileData, 'base64').toString('ascii'));\n\n// msg.payload = atob(msg.payload.Data.Base64FileData)\n\nmsg.payload = Buffer.from(msg.payload.Data.Base64FileData, \"base64\");\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2270,
        "y": 1180,
        "wires": [
            []
        ]
    },
    {
        "id": "d840d6ee27d444ca",
        "type": "debug",
        "z": "13630048e9aa6406",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "storageApiUrl",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 490,
        "y": 600,
        "wires": []
    },
    {
        "id": "bdc97fdf06c46008",
        "type": "send-message",
        "z": "13630048e9aa6406",
        "isTimerUsed": false,
        "language": "lang",
        "languageType": "msg",
        "messageOption": "",
        "messageID": "",
        "messageIDType": "str",
        "name": "fines_pdf_file",
        "props": {
            "": [],
            "welcomeMessage": [],
            "main_3_1_1_1_1": [
                {
                    "property": "Amount",
                    "value": "Amount",
                    "valueType": "msg"
                },
                {
                    "property": "VehicleRegistration",
                    "value": "VehicleRegistration",
                    "valueType": "msg"
                },
                {
                    "property": "NoticeNumber",
                    "value": "NoticeNumber",
                    "valueType": "msg"
                },
                {
                    "property": "OffenceDate",
                    "value": "OffenceDate",
                    "valueType": "msg"
                }
            ],
            "main_3_1_1_1_0_0": [
                {
                    "property": "text",
                    "value": "fileUrl",
                    "valueType": "msg"
                }
            ],
            "fines_pdf_file": [
                {
                    "property": "pdfUrl",
                    "value": "fileUrl",
                    "valueType": "msg"
                }
            ]
        },
        "templateId": "fines_pdf_file",
        "templateIdToDelete": "",
        "templatesJsons": {
            "welcomeMessage": {
                "text": "{{text}}",
                "en": {
                    "text": "*New Traffic Fine Notification from Ekurhuleni\nMetro Police Department*\nPlease take note that a new traffic fine (REF:\nC1/93563/808/187933) has been issued against ID\nending 51.\nFor more information or options to pay the fine\nplease reply to this message and our friendly\nChatbot, Traffic Officer Buddy will gladly assist you.\nAlternatively log onto payCity.co.za for more\ninformation and options to pay.\n1. Pay Fine\n2. More Options\n3. View/Query all my fines from Ekurhuleni"
                }
            },
            "main_3_1_1_1_1": {
                "text": "{{text}}",
                "data": {
                    "interactive": {
                        "type": "button",
                        "buttons": [
                            {
                                "title": "{{button1}}"
                            },
                            {
                                "title": "{{button2}}"
                            },
                            {
                                "title": "{{button3}}"
                            }
                        ]
                    }
                },
                "en": {
                    "button1": "Pay Now",
                    "button2": "FAQ",
                    "button3": "Back to List",
                    "text": "Amount: {{Amount}}\nVehicle Registration: {{VehicleRegistration}}\nNotice Number: {{NoticeNumber}}\nOffence Date: {{OffenceDate}}"
                }
            },
            "main_3_1_1_1": {
                "text": "{{text}}",
                "en": {
                    "text": "Please select Fine (list of all fines):\n1. CA 687666 - R500\n2. CA 000997 - R1100\n3. CY 500000 - R750"
                }
            },
            "main_3_1_1_1_0_0": {
                "pdfUrl": "{{pdfUrl}}",
                "en": {
                    "pdfUrl": "{{text}}"
                }
            },
            "fines_pdf_file": {
                "pdfUrl": "{{pdfUrl}}"
            }
        },
        "templatesList": [
            "main_finedetail_1",
            "main_nextfines",
            "main_payment_info_allowedreason",
            "main_image_file",
            "goodbye",
            "main_image_placeholder",
            "get_started",
            "pay_your_fine",
            "select_the_option",
            "connect_agent",
            "enter_digit_number",
            "enter_digit_number_error",
            "fines_not_found",
            "querying_for_fines",
            "main_3_1_1_1_1_3",
            "welocme",
            "main_3_1_1_1_1",
            "main_1_0",
            "main_3_error",
            "main_3_1",
            "main_1",
            "main_3_1_1_0",
            "main_3",
            "fines_pdf_file",
            "welcomeMessage",
            "main_0_0_pdf",
            "main_0_0",
            "main_2_2",
            "main_3_1_1_1_0_0",
            "main_2",
            "main_2_1",
            "main_3_1_1_1_1_2",
            "main_1_3",
            "main_1_2",
            "main_1_1",
            "main_3_1_1_1_1_1",
            "errorMessage",
            "main_1_2_1",
            "main_3_1_1",
            "main_3_1_3",
            "main_3_1_2",
            "main_3_1_1_1_0",
            "main_3_1_1_1"
        ],
        "userID": "userID",
        "userIDType": "msg",
        "traceID": "traceID",
        "traceIDType": "msg",
        "useTimer": false,
        "timer": "",
        "outputs": 3,
        "jsonToCreate": "{\"pdfUrl\":\"{{pdfUrl}}\",\"en\":{\"pdfUrl\":\"{{text}}\"}}",
        "jsonToCreateType": "json",
        "templateDescriptionButtonsContainerToCreate": [],
        "templateDesciptionDetailsToCreate": "main",
        "templateDesciptionTextToCreate": "",
        "templateIdToCreate": "fines_pdf_file",
        "templateGroupToCreate": "main",
        "currentTemplateDescription": {
            "details": "main"
        },
        "currentTemplateGroup": "main",
        "currentTemplateTimer": null,
        "currentTemplateType": "standard",
        "jsonToEdit": "{\"pdfUrl\":\"{{pdfUrl}}\"}",
        "jsonToEditType": "json",
        "templateIdToEdit": "fines_pdf_file",
        "templateDescriptionButtonsContainerToEdit": [],
        "templateDesciptionDetailsToEdit": "main",
        "templateDesciptionTextToEdit": "",
        "x": 2350,
        "y": 780,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "2ff346a36d26cb81",
        "type": "send-message",
        "z": "13630048e9aa6406",
        "isTimerUsed": false,
        "language": "lang",
        "languageType": "msg",
        "messageOption": "",
        "messageID": "",
        "messageIDType": "str",
        "name": "main_image_file",
        "props": {
            "": [],
            "welcomeMessage": [],
            "main_3_1_1_1_1": [
                {
                    "property": "Amount",
                    "value": "Amount",
                    "valueType": "msg"
                },
                {
                    "property": "VehicleRegistration",
                    "value": "VehicleRegistration",
                    "valueType": "msg"
                },
                {
                    "property": "NoticeNumber",
                    "value": "NoticeNumber",
                    "valueType": "msg"
                },
                {
                    "property": "OffenceDate",
                    "value": "OffenceDate",
                    "valueType": "msg"
                }
            ],
            "main_3_1_1_1_0_0": [
                {
                    "property": "text",
                    "value": "text",
                    "valueType": "msg"
                }
            ],
            "main_image_file": [
                {
                    "property": "text",
                    "value": "fileUrl",
                    "valueType": "msg"
                }
            ]
        },
        "templateId": "main_image_file",
        "templateIdToDelete": "",
        "templatesJsons": {
            "welcomeMessage": {
                "text": "{{text}}",
                "en": {
                    "text": "*New Traffic Fine Notification from Ekurhuleni\nMetro Police Department*\nPlease take note that a new traffic fine (REF:\nC1/93563/808/187933) has been issued against ID\nending 51.\nFor more information or options to pay the fine\nplease reply to this message and our friendly\nChatbot, Traffic Officer Buddy will gladly assist you.\nAlternatively log onto payCity.co.za for more\ninformation and options to pay.\n1. Pay Fine\n2. More Options\n3. View/Query all my fines from Ekurhuleni"
                }
            },
            "main_3_1_1_1_1": {
                "text": "{{text}}",
                "data": {
                    "interactive": {
                        "type": "button",
                        "buttons": [
                            {
                                "title": "{{button1}}"
                            },
                            {
                                "title": "{{button2}}"
                            },
                            {
                                "title": "{{button3}}"
                            }
                        ]
                    }
                },
                "en": {
                    "button1": "Pay Now",
                    "button2": "FAQ",
                    "button3": "Back to List",
                    "text": "Amount: {{Amount}}\nVehicle Registration: {{VehicleRegistration}}\nNotice Number: {{NoticeNumber}}\nOffence Date: {{OffenceDate}}"
                }
            },
            "main_3_1_1_1": {
                "text": "{{text}}",
                "en": {
                    "text": "Please select Fine (list of all fines):\n1. CA 687666 - R500\n2. CA 000997 - R1100\n3. CY 500000 - R750"
                }
            },
            "main_3_1_1_1_0_0": {
                "pdfUrl": "{{pdfUrl}}",
                "en": {
                    "pdfUrl": "{{text}}"
                }
            },
            "main_image_file": {
                "imageUrl": "{{imageUrl}}",
                "en": {
                    "imageUrl": "{{text}}"
                }
            }
        },
        "templatesList": [
            "fine_not_found",
            "main_nextfines",
            "main_image_file",
            "main_payment_info_allowedreason",
            "main_finedetail_1",
            "get_started",
            "goodbye",
            "main_image_placeholder",
            "select_the_option",
            "connect_agent",
            "enter_digit_number",
            "enter_digit_number_error",
            "fines_not_found",
            "main_3_1_1_1_1_3",
            "welocme",
            "main_3_1_1_1_1",
            "main_1_0",
            "main_3_error",
            "main_3_1",
            "main_1",
            "main_3_1_1_0",
            "main_3",
            "fines_pdf_file",
            "welcomeMessage",
            "main_0_0_pdf",
            "main_0_0",
            "main_2_2",
            "main_3_1_1_1_0_0",
            "main_2",
            "main_2_1",
            "querying_for_fines",
            "pay_your_fine",
            "main_3_1_1_1_1_2",
            "main_1_3",
            "main_pdf_placeholder",
            "fines_info",
            "main_1_2",
            "main_1_1",
            "main_3_1_1_1_1_1",
            "errorMessage",
            "main_1_2_1",
            "main_3_1_1",
            "main_3_1_3",
            "main_3_1_2",
            "main_3_1_1_1_0",
            "main_3_1_1_1",
            "registration_image_file"
        ],
        "userID": "userID",
        "userIDType": "msg",
        "traceID": "traceID",
        "traceIDType": "msg",
        "useTimer": false,
        "timer": "",
        "outputs": 3,
        "jsonToCreate": "{\"imageUrl\":\"{{imageUrl}}\",\"en\":{\"imageUrl\":\"{{text}}\"}}",
        "jsonToCreateType": "json",
        "templateDescriptionButtonsContainerToCreate": [],
        "templateDesciptionDetailsToCreate": "main",
        "templateDesciptionTextToCreate": "",
        "templateIdToCreate": "main_image_file",
        "templateGroupToCreate": "main",
        "currentTemplateDescription": {
            "details": "main"
        },
        "currentTemplateGroup": "main",
        "currentTemplateTimer": null,
        "currentTemplateType": "standard",
        "jsonToEdit": "{\"pdfUrl\":\"{{pdfUrl}}\",\"en\":{\"pdfUrl\":\"{{text}}\"}}",
        "jsonToEditType": "json",
        "templateIdToEdit": "main_3_1_1_1_0_0",
        "templateDescriptionButtonsContainerToEdit": [],
        "templateDesciptionDetailsToEdit": "main",
        "templateDesciptionTextToEdit": "",
        "x": 2900,
        "y": 680,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "34efc26c3e6c744c",
        "type": "subflow:4b227c0aa46a1b6c",
        "z": "13630048e9aa6406",
        "name": "",
        "x": 1670,
        "y": 680,
        "wires": [
            [
                "c05d8967555a2df7"
            ],
            []
        ]
    },
    {
        "id": "95321e8ab068de11",
        "type": "switch",
        "z": "53571d9900b8ee5c",
        "name": "text",
        "property": "text",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "Back to FAQ",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Contact Details",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Representations",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "My Vehicle, Not Driver",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Other Queries",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Main Menu",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "Dispute",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 8,
        "x": 250,
        "y": 180,
        "wires": [
            [
                "93be7defdf303918"
            ],
            [
                "1bfdc4680b876d9d"
            ],
            [
                "19cc2c89cb3c8af7"
            ],
            [
                "8b49866cc857cb04"
            ],
            [
                "3c6f361104aec962"
            ],
            [
                "5b88802bef98da59"
            ],
            [
                "cd19aaec0c161479"
            ],
            [
                "d836bba2d9e69357"
            ]
        ]
    },
    {
        "id": "5b88802bef98da59",
        "type": "link out",
        "z": "53571d9900b8ee5c",
        "name": "welcome message",
        "mode": "link",
        "links": [
            "ffb27b2ae071c95f"
        ],
        "x": 610,
        "y": 340,
        "wires": [],
        "l": true
    },
    {
        "id": "ee325a90e5366c57",
        "type": "link in",
        "z": "53571d9900b8ee5c",
        "name": "FAQ in",
        "links": [
            "cf76f46968fca631",
            "937e71a11a1da2fb"
        ],
        "x": 95,
        "y": 200,
        "wires": [
            [
                "95321e8ab068de11"
            ]
        ]
    },
    {
        "id": "93be7defdf303918",
        "type": "send-message",
        "z": "53571d9900b8ee5c",
        "isTimerUsed": false,
        "language": "lang",
        "languageType": "msg",
        "messageOption": "",
        "messageID": "",
        "messageIDType": "str",
        "name": "select_the_option",
        "props": {
            "": [],
            "welcomeMessage": [],
            "main_1_1": [],
            "main_1": [],
            "main_2": [],
            "select_the_option": [
                {
                    "property": "faqs",
                    "value": "faqs",
                    "valueType": "msg"
                }
            ]
        },
        "templateId": "select_the_option",
        "templateIdToDelete": "",
        "templatesJsons": {
            "welcomeMessage": {
                "text": "{{text}}",
                "en": {
                    "text": "*New Traffic Fine Notification from Ekurhuleni\nMetro Police Department*\nPlease take note that a new traffic fine (REF:\nC1/93563/808/187933) has been issued against ID\nending 51.\nFor more information or options to pay the fine\nplease reply to this message and our friendly\nChatbot, Traffic Officer Buddy will gladly assist you.\nAlternatively log onto payCity.co.za for more\ninformation and options to pay.\n1. Pay Fine\n2. More Options\n3. View/Query all my fines from Ekurhuleni"
                }
            },
            "main_1_1": {
                "text": "{{text}}",
                "en": {
                    "text": "Please follow the link below.\nhttps://paynow.paycity.co.za\n1. Back to Payment Options\n2. Main Menu\nYou can also pay at any of the\nfollowing locations: Spar, Shoprite &\nCheckers & Pnp."
                }
            },
            "main_1": {
                "text": "{{text}}",
                "en": {
                    "text": "Please follow the link below.\nhttps://paynow.paycity.co.za\n1. Back to Payment Options\n2. Main Menu\nYou can also pay at any of the\nfollowing locations: Spar, Shoprite &\nCheckers & Pnp."
                }
            },
            "main_2": {
                "text": "{{text}}",
                "data": {
                    "interactive": {
                        "type": "button",
                        "buttons": [
                            {
                                "title": "{{button1}}"
                            },
                            {
                                "title": "{{button2}}"
                            }
                        ]
                    }
                },
                "en": {
                    "button1": "1",
                    "button2": "2",
                    "text": "Please select the option that relates to your query.\n\n1. How do I pay my fine?\n2. Transfer me to an Agent."
                }
            },
            "select_the_option": {
                "text": "{{text}}",
                "data": {
                    "interactive": {
                        "type": "list",
                        "buttonText": "FAQs options",
                        "header": "FAQ",
                        "sections": [
                            {
                                "title": "Select from the list",
                                "rows": "{{faqs}}"
                            }
                        ]
                    }
                },
                "en": {
                    "text": "*Let's see if I can help!* \n\nHere's a list of *FAQs* that might help you with your query 👍\n\nSelect the option you need more information on. ⬇️"
                }
            }
        },
        "templatesList": [
            "fine_not_found",
            "faq_my_vehicle_not_driver",
            "querying_fine_details_waiting",
            "paynow_express_payment",
            "pay_your_fine",
            "main_nextfines",
            "main_image_file",
            "main_payment_info_allowedreason",
            "faq_dispute",
            "main_finedetail_1",
            "get_started",
            "connect_agent",
            "main_image_placeholder",
            "goodbye",
            "enter_digit_number",
            "select_the_option",
            "enter_digit_number_error",
            "main_3_1_1_1_1_3",
            "welocme",
            "main_3_1_1_1_1",
            "main_1_0",
            "main_3_error",
            "main_3_1",
            "main_1",
            "main_3_1_1_0",
            "main_3",
            "fines_pdf_file",
            "welcomeMessage",
            "main_0_0_pdf",
            "main_0_0",
            "main_2_2",
            "main_3_1_1_1_0_0",
            "main_2",
            "main_2_1",
            "querying_for_fines",
            "sendwindowopener_template",
            "fines_info",
            "main_3_1_1_1_1_2",
            "main_1_3",
            "main_pdf_placeholder",
            "main_1_2",
            "main_1_1",
            "main_3_1_1_1_1_1",
            "faq_other_queries",
            "main_1_2_1",
            "main_3_1_1",
            "main_3_1_3",
            "main_3_1_2",
            "main_3_1_1_1_0",
            "main_3_1_1_1",
            "fines_not_found",
            "faq_representations",
            "errorMessage",
            "faq_representations_contacts",
            "faq_my_vehicle_not_driver_contacts",
            "registration_image_file"
        ],
        "userID": "userID",
        "userIDType": "msg",
        "traceID": "traceID",
        "traceIDType": "msg",
        "useTimer": false,
        "timer": "",
        "outputs": 3,
        "jsonToCreate": "{\"text\":\"{{text}}\",\"data\":{\"interactive\":{\"type\":\"button\",\"buttons\":[{\"title\":\"{{button1}}\"},{\"title\":\"{{button2}}\"}]}},\"en\":{\"button1\":\"How do I pay my fine\",\"button2\":\"Transfer to an Agent\",\"text\":\"Please select the option that relates to your query.\"}}",
        "jsonToCreateType": "json",
        "templateDescriptionButtonsContainerToCreate": [],
        "templateDesciptionDetailsToCreate": "main",
        "templateDesciptionTextToCreate": "",
        "templateIdToCreate": "select_the_option",
        "templateGroupToCreate": "main",
        "currentTemplateDescription": {
            "details": "main"
        },
        "currentTemplateGroup": "main",
        "currentTemplateTimer": "",
        "currentTemplateType": "standard",
        "jsonToEdit": "{\"text\":\"{{text}}\",\"data\":{\"interactive\":{\"type\":\"list\",\"buttonText\":\"FAQs options\",\"header\":\"FAQ\",\"sections\":[{\"title\":\"Select from the list\",\"rows\":\"{{faqs}}\"}]}},\"en\":{\"text\":\"*Let's see if I can help!* \\n\\nHere's a list of *FAQs* that might help you with your query 👍\\n\\nSelect the option you need more information on. ⬇️\"}}",
        "jsonToEditType": "json",
        "templateIdToEdit": "select_the_option",
        "templateDescriptionButtonsContainerToEdit": [],
        "templateDesciptionDetailsToEdit": "main",
        "templateDesciptionTextToEdit": "",
        "x": 370,
        "y": 60,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "22cb41e7a3633a8c",
        "type": "send-message",
        "z": "53571d9900b8ee5c",
        "isTimerUsed": false,
        "language": "lang",
        "languageType": "msg",
        "messageOption": "",
        "messageID": "",
        "messageIDType": "str",
        "name": "faq_representations_contacts",
        "props": {
            "faq_representations_contacts": []
        },
        "templateId": "faq_representations_contacts",
        "templateIdToDelete": "",
        "templatesJsons": {
            "faq_representations_contacts": {
                "text": "{{text}}",
                "data": {
                    "interactive": {
                        "type": "button",
                        "buttons": [
                            {
                                "title": "{{button1}}"
                            },
                            {
                                "title": "{{button2}}"
                            }
                        ]
                    }
                },
                "en": {
                    "button1": "Back to FAQ",
                    "button2": "Main Menu",
                    "text": "*Alberton* \nAnnemarie van Wyk (011) 999-2173 \navwyk@ekurhuleni.gov.za \n\n*Benoni* \nNtombi Khoza (011) 999-0592 \nntombi.khoza@ekurhuleni.gov.za \n\n*Boksburg* \nSylvia Hloai (011)999-5314 \nSylia.hloai@ekurhuleni.gov.za \n\n*Brakpan* \nJabu Zwane (011) 999-8217 \nJabu.Zwane@ekurhuleni.gov.za \n\n*Daveyton* \nDouglas Makgoale (011) 999-7573 \nDouglas.Makgoale@ekurhuleni.gov.za \n\n*Edenvale* \nJuliet Tsubella (011) 999-3959 \nJuliet.Tsubella@ekurhuleni.gov.za \n\n*Elsburg* \nGladys Motaung (011) 999-0365 \nGladys.motaung@ekurhuleni.gov.za \n\n*Nigel* \nDimakatso Murudu (011) 999-9131 \nDimakatso.Morudu@ekurhuleni.gov.za \n\n*Springs* \nMelanie Verwey (011) 999-8342 \nmelanie.verwey@ekurhuleni.gov.za \n\n*Tembisa* \nMpho Rangaka (011) 999-3007 \nMpho.Rangaka@ekurhuleni.gov.za \n\n*Kempton Park* \nVirginia Kekana (011) 999-3008 \nVirginia.Kekana@ekurhuleni.gov.za \n\n*Kempton Park* \nTshepo Masemola (011) 999-0375 \nTshepo.Masemola@ekurhuleni.gov.za \n\n*Kempton Park* \nLebogang Maupye (011) 999-2666 \nLebogang.Maupye@ekurhuleni.gov.za"
                }
            }
        },
        "templatesList": [
            "fine_not_found",
            "faq_my_vehicle_not_driver",
            "querying_fine_details_waiting",
            "paynow_express_payment",
            "pay_your_fine",
            "main_nextfines",
            "main_image_file",
            "main_payment_info_allowedreason",
            "faq_dispute",
            "main_finedetail_1",
            "get_started",
            "main_image_placeholder",
            "goodbye",
            "enter_digit_number",
            "select_the_option",
            "connect_agent",
            "enter_digit_number_error",
            "main_3_1_1_1_1_3",
            "welocme",
            "main_3_1_1_1_1",
            "main_1_0",
            "main_3_error",
            "main_3_1",
            "main_1",
            "main_3_1_1_0",
            "main_3",
            "fines_pdf_file",
            "welcomeMessage",
            "main_0_0_pdf",
            "main_0_0",
            "main_2_2",
            "main_3_1_1_1_0_0",
            "main_2",
            "main_2_1",
            "querying_for_fines",
            "sendwindowopener_template",
            "fines_info",
            "main_3_1_1_1_1_2",
            "main_1_3",
            "main_pdf_placeholder",
            "main_1_2",
            "main_1_1",
            "main_3_1_1_1_1_1",
            "faq_other_queries",
            "main_1_2_1",
            "main_3_1_1",
            "main_3_1_3",
            "main_3_1_2",
            "main_3_1_1_1_0",
            "main_3_1_1_1",
            "fines_not_found",
            "faq_representations",
            "errorMessage",
            "faq_representations_contacts",
            "faq_my_vehicle_not_driver_contacts",
            "registration_image_file"
        ],
        "userID": "userID",
        "userIDType": "msg",
        "traceID": "traceID",
        "traceIDType": "msg",
        "useTimer": false,
        "timer": "",
        "outputs": 3,
        "jsonToCreate": "{\"text\":\"{{text}}\",\"en\":{\"text\":\"FAQ rep contacts details\"}}",
        "jsonToCreateType": "json",
        "templateDescriptionButtonsContainerToCreate": [],
        "templateDesciptionDetailsToCreate": "main",
        "templateDesciptionTextToCreate": "",
        "templateIdToCreate": "faq_representations_contacts",
        "templateGroupToCreate": "main",
        "currentTemplateDescription": {
            "details": "main"
        },
        "currentTemplateGroup": "main",
        "currentTemplateTimer": "",
        "currentTemplateType": "standard",
        "jsonToEdit": "{\"text\":\"{{text}}\",\"data\":{\"interactive\":{\"type\":\"button\",\"buttons\":[{\"title\":\"{{button1}}\"},{\"title\":\"{{button2}}\"}]}},\"en\":{\"button1\":\"Back to FAQ\",\"button2\":\"Main Menu\",\"text\":\"*Alberton* \\nAnnemarie van Wyk (011) 999-2173 \\navwyk@ekurhuleni.gov.za \\n\\n*Benoni* \\nNtombi Khoza (011) 999-0592 \\nntombi.khoza@ekurhuleni.gov.za \\n\\n*Boksburg* \\nSylvia Hloai (011)999-5314 \\nSylia.hloai@ekurhuleni.gov.za \\n\\n*Brakpan* \\nJabu Zwane (011) 999-8217 \\nJabu.Zwane@ekurhuleni.gov.za \\n\\n*Daveyton* \\nDouglas Makgoale (011) 999-7573 \\nDouglas.Makgoale@ekurhuleni.gov.za \\n\\n*Edenvale* \\nJuliet Tsubella (011) 999-3959 \\nJuliet.Tsubella@ekurhuleni.gov.za \\n\\n*Elsburg* \\nGladys Motaung (011) 999-0365 \\nGladys.motaung@ekurhuleni.gov.za \\n\\n*Nigel* \\nDimakatso Murudu (011) 999-9131 \\nDimakatso.Morudu@ekurhuleni.gov.za \\n\\n*Springs* \\nMelanie Verwey (011) 999-8342 \\nmelanie.verwey@ekurhuleni.gov.za \\n\\n*Tembisa* \\nMpho Rangaka (011) 999-3007 \\nMpho.Rangaka@ekurhuleni.gov.za \\n\\n*Kempton Park* \\nVirginia Kekana (011) 999-3008 \\nVirginia.Kekana@ekurhuleni.gov.za \\n\\n*Kempton Park* \\nTshepo Masemola (011) 999-0375 \\nTshepo.Masemola@ekurhuleni.gov.za \\n\\n*Kempton Park* \\nLebogang Maupye (011) 999-2666 \\nLebogang.Maupye@ekurhuleni.gov.za\"}}",
        "jsonToEditType": "json",
        "templateIdToEdit": "faq_representations_contacts",
        "templateDescriptionButtonsContainerToEdit": [],
        "templateDesciptionDetailsToEdit": "main",
        "templateDesciptionTextToEdit": "",
        "x": 930,
        "y": 100,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "1bfdc4680b876d9d",
        "type": "switch",
        "z": "53571d9900b8ee5c",
        "name": "state",
        "property": "state",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "faq_representations",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "faq_my_vehicle_not_driver",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "false",
        "repair": false,
        "outputs": 3,
        "x": 570,
        "y": 80,
        "wires": [
            [
                "22cb41e7a3633a8c"
            ],
            [
                "3cca0c390ccedf08"
            ],
            [
                "cd6743287f5ce369"
            ]
        ]
    },
    {
        "id": "3cca0c390ccedf08",
        "type": "send-message",
        "z": "53571d9900b8ee5c",
        "isTimerUsed": false,
        "language": "lang",
        "languageType": "msg",
        "messageOption": "",
        "messageID": "",
        "messageIDType": "str",
        "name": "faq_my_vehicle_not_driver_contacts",
        "props": {
            "faq_representations_contacts": [],
            "faq_my_vehicle_not_driver": [],
            "faq_my_vehicle_not_driver_contacts": []
        },
        "templateId": "faq_my_vehicle_not_driver_contacts",
        "templateIdToDelete": "",
        "templatesJsons": {
            "faq_representations_contacts": {
                "text": "{{text}}",
                "en": {
                    "text": "FAQ rep contacts details"
                }
            },
            "faq_my_vehicle_not_driver": {
                "text": "{{text}}",
                "en": {
                    "text": "FAQ my vehicle contacts details"
                }
            },
            "faq_my_vehicle_not_driver_contacts": {
                "text": "{{text}}",
                "data": {
                    "interactive": {
                        "type": "button",
                        "buttons": [
                            {
                                "title": "{{button1}}"
                            },
                            {
                                "title": "{{button2}}"
                            }
                        ]
                    }
                },
                "en": {
                    "button1": "Back to FAQ",
                    "button2": "Main Menu",
                    "text": "*Alberton* \nAnnemarie van Wyk (011) 999-2173 \navwyk@ekurhuleni.gov.za \n\n*Benoni* \nNtombi Khoza (011) 999-0592 \nntombi.khoza@ekurhuleni.gov.za \n\n*Boksburg* \nSylvia Hloai (011)999-5314 \nSylia.hloai@ekurhuleni.gov.za \n\n*Brakpan* \nJabu Zwane (011) 999-8217 \nJabu.Zwane@ekurhuleni.gov.za \n\n*Daveyton* \nDouglas Makgoale (011) 999-7573 \nDouglas.Makgoale@ekurhuleni.gov.za \n\n*Edenvale* \nJuliet Tsubella (011) 999-3959 \nJuliet.Tsubella@ekurhuleni.gov.za \n\n*Elsburg* \nGladys Motaung (011) 999-0365 \nGladys.motaung@ekurhuleni.gov.za \n\n*Nigel* \nDimakatso Murudu (011) 999-9131 \nDimakatso.Morudu@ekurhuleni.gov.za \n\n*Springs* \nMelanie Verwey (011) 999-8342 \nmelanie.verwey@ekurhuleni.gov.za \n\n*Tembisa* \nMpho Rangaka (011) 999-3007 \nMpho.Rangaka@ekurhuleni.gov.za \n\n*Kempton Park* \nVirginia Kekana (011) 999-3008 \nVirginia.Kekana@ekurhuleni.gov.za \n\n*Kempton Park* \nTshepo Masemola (011) 999-0375 \nTshepo.Masemola@ekurhuleni.gov.za \n\n*Kempton Park* \nLebogang Maupye (011) 999-2666 \nLebogang.Maupye@ekurhuleni.gov.za"
                }
            }
        },
        "templatesList": [
            "fine_not_found",
            "main_nextfines",
            "main_image_file",
            "main_finedetail_1",
            "main_payment_info_allowedreason",
            "get_started",
            "goodbye",
            "main_image_placeholder",
            "select_the_option",
            "enter_digit_number",
            "connect_agent",
            "enter_digit_number_error",
            "fines_not_found",
            "main_3_1_1_1_1_3",
            "welocme",
            "main_3_1_1_1_1",
            "main_1_0",
            "main_3_error",
            "main_3_1",
            "main_1",
            "main_3_1_1_0",
            "main_3",
            "fines_pdf_file",
            "welcomeMessage",
            "main_0_0_pdf",
            "main_0_0",
            "main_2_2",
            "main_3_1_1_1_0_0",
            "main_2",
            "main_2_1",
            "querying_for_fines",
            "pay_your_fine",
            "sendwindowopener_template",
            "fines_info",
            "faq_representations",
            "main_3_1_1_1_1_2",
            "main_1_3",
            "main_pdf_placeholder",
            "faq_other_queries",
            "main_1_2",
            "faq_my_vehicle_not_driver",
            "main_1_1",
            "main_3_1_1_1_1_1",
            "errorMessage",
            "main_1_2_1",
            "main_3_1_1",
            "main_3_1_3",
            "main_3_1_2",
            "faq_my_vehicle_not_driver_contacts",
            "main_3_1_1_1_0",
            "main_3_1_1_1",
            "faq_representations_contacts",
            "registration_image_file"
        ],
        "userID": "userID",
        "userIDType": "msg",
        "traceID": "traceID",
        "traceIDType": "msg",
        "useTimer": false,
        "timer": "",
        "outputs": 3,
        "jsonToCreate": "{\"text\":\"{{text}}\",\"en\":{\"text\":\"FAQ my vehicle contacts details\"}}",
        "jsonToCreateType": "json",
        "templateDescriptionButtonsContainerToCreate": [],
        "templateDesciptionDetailsToCreate": "main",
        "templateDesciptionTextToCreate": "",
        "templateIdToCreate": "faq_my_vehicle_not_driver_contacts",
        "templateGroupToCreate": "main",
        "currentTemplateDescription": {
            "details": "main"
        },
        "currentTemplateGroup": "main",
        "currentTemplateTimer": "",
        "currentTemplateType": "standard",
        "jsonToEdit": "{\"text\":\"{{text}}\",\"data\":{\"interactive\":{\"type\":\"button\",\"buttons\":[{\"title\":\"{{button1}}\"},{\"title\":\"{{button2}}\"}]}},\"en\":{\"button1\":\"Back to FAQ\",\"button2\":\"Main Menu\",\"text\":\"*Alberton* \\nAnnemarie van Wyk (011) 999-2173 \\navwyk@ekurhuleni.gov.za \\n\\n*Benoni* \\nNtombi Khoza (011) 999-0592 \\nntombi.khoza@ekurhuleni.gov.za \\n\\n*Boksburg* \\nSylvia Hloai (011)999-5314 \\nSylia.hloai@ekurhuleni.gov.za \\n\\n*Brakpan* \\nJabu Zwane (011) 999-8217 \\nJabu.Zwane@ekurhuleni.gov.za \\n\\n*Daveyton* \\nDouglas Makgoale (011) 999-7573 \\nDouglas.Makgoale@ekurhuleni.gov.za \\n\\n*Edenvale* \\nJuliet Tsubella (011) 999-3959 \\nJuliet.Tsubella@ekurhuleni.gov.za \\n\\n*Elsburg* \\nGladys Motaung (011) 999-0365 \\nGladys.motaung@ekurhuleni.gov.za \\n\\n*Nigel* \\nDimakatso Murudu (011) 999-9131 \\nDimakatso.Morudu@ekurhuleni.gov.za \\n\\n*Springs* \\nMelanie Verwey (011) 999-8342 \\nmelanie.verwey@ekurhuleni.gov.za \\n\\n*Tembisa* \\nMpho Rangaka (011) 999-3007 \\nMpho.Rangaka@ekurhuleni.gov.za \\n\\n*Kempton Park* \\nVirginia Kekana (011) 999-3008 \\nVirginia.Kekana@ekurhuleni.gov.za \\n\\n*Kempton Park* \\nTshepo Masemola (011) 999-0375 \\nTshepo.Masemola@ekurhuleni.gov.za \\n\\n*Kempton Park* \\nLebogang Maupye (011) 999-2666 \\nLebogang.Maupye@ekurhuleni.gov.za\"}}",
        "jsonToEditType": "json",
        "templateIdToEdit": "faq_my_vehicle_not_driver_contacts",
        "templateDescriptionButtonsContainerToEdit": [],
        "templateDesciptionDetailsToEdit": "main",
        "templateDesciptionTextToEdit": "",
        "x": 950,
        "y": 160,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "3c6f361104aec962",
        "type": "send-message",
        "z": "53571d9900b8ee5c",
        "isTimerUsed": false,
        "language": "lang",
        "languageType": "msg",
        "messageOption": "",
        "messageID": "",
        "messageIDType": "str",
        "name": "faq_other_queries",
        "props": {
            "faq_other_queries": []
        },
        "templateId": "faq_other_queries",
        "templateIdToDelete": "",
        "templatesJsons": {
            "faq_other_queries": {
                "text": "{{text}}",
                "data": {
                    "interactive": {
                        "type": "button",
                        "buttons": [
                            {
                                "title": "{{button1}}"
                            },
                            {
                                "title": "{{button2}}"
                            }
                        ]
                    }
                },
                "en": {
                    "button1": "Back to FAQ",
                    "button2": "Main Menu",
                    "text": "You can select the ‘transfer me to an agent’ option within the FAQ dropdown in order to start a live conversation with an agent or use any of the other options below: \n\nPhone number: 087 237 7011 \n\nEmail: helpdesk@paycity.co.za.\n\nNote: our call center hours are from 08:00 to 17:00"
                }
            }
        },
        "templatesList": [
            "fine_not_found",
            "faq_my_vehicle_not_driver",
            "querying_fine_details_waiting",
            "paynow_express_payment",
            "pay_your_fine",
            "main_nextfines",
            "main_image_file",
            "main_payment_info_allowedreason",
            "faq_dispute",
            "main_finedetail_1",
            "get_started",
            "connect_agent",
            "main_image_placeholder",
            "goodbye",
            "enter_digit_number",
            "select_the_option",
            "enter_digit_number_error",
            "main_3_1_1_1_1_3",
            "welocme",
            "main_3_1_1_1_1",
            "main_1_0",
            "main_3_error",
            "main_3_1",
            "main_1",
            "main_3_1_1_0",
            "main_3",
            "fines_pdf_file",
            "welcomeMessage",
            "main_0_0_pdf",
            "main_0_0",
            "main_2_2",
            "main_3_1_1_1_0_0",
            "main_2",
            "main_2_1",
            "querying_for_fines",
            "sendwindowopener_template",
            "fines_info",
            "main_3_1_1_1_1_2",
            "main_1_3",
            "main_pdf_placeholder",
            "main_1_2",
            "main_1_1",
            "main_3_1_1_1_1_1",
            "faq_other_queries",
            "main_1_2_1",
            "main_3_1_1",
            "main_3_1_3",
            "main_3_1_2",
            "main_3_1_1_1_0",
            "main_3_1_1_1",
            "fines_not_found",
            "faq_representations",
            "errorMessage",
            "faq_representations_contacts",
            "faq_my_vehicle_not_driver_contacts",
            "registration_image_file"
        ],
        "userID": "userID",
        "userIDType": "msg",
        "traceID": "traceID",
        "traceIDType": "msg",
        "useTimer": false,
        "timer": "",
        "outputs": 3,
        "jsonToCreate": "{\"text\":\"{{text}}\",\"en\":{\"text\":\"FAQ other query\"}}",
        "jsonToCreateType": "json",
        "templateDescriptionButtonsContainerToCreate": [],
        "templateDesciptionDetailsToCreate": "main",
        "templateDesciptionTextToCreate": "",
        "templateIdToCreate": "faq_other_queries",
        "templateGroupToCreate": "main",
        "currentTemplateDescription": {
            "details": "main"
        },
        "currentTemplateGroup": "main",
        "currentTemplateTimer": "",
        "currentTemplateType": "standard",
        "jsonToEdit": "{\"text\":\"{{text}}\",\"data\":{\"interactive\":{\"type\":\"button\",\"buttons\":[{\"title\":\"{{button1}}\"},{\"title\":\"{{button2}}\"}]}},\"en\":{\"button1\":\"Back to FAQ\",\"button2\":\"Main Menu\",\"text\":\"You can select the ‘transfer me to an agent’ option within the FAQ dropdown in order to start a live conversation with an agent or use any of the other options below: \\n\\nPhone number: 087 237 7011 \\n\\nEmail: helpdesk@paycity.co.za.\\n\\nNote: our call center hours are from 08:00 to 17:00\"}}",
        "jsonToEditType": "json",
        "templateIdToEdit": "faq_other_queries",
        "templateDescriptionButtonsContainerToEdit": [],
        "templateDesciptionDetailsToEdit": "main",
        "templateDesciptionTextToEdit": "",
        "x": 550,
        "y": 140,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "19cc2c89cb3c8af7",
        "type": "send-message",
        "z": "53571d9900b8ee5c",
        "isTimerUsed": false,
        "language": "lang",
        "languageType": "msg",
        "messageOption": "",
        "messageID": "",
        "messageIDType": "str",
        "name": "faq_representations",
        "props": {
            "": [],
            "faq_representations": []
        },
        "templateId": "faq_representations",
        "templateIdToDelete": "",
        "templatesJsons": {
            "faq_representations": {
                "text": "{{text}}",
                "data": {
                    "interactive": {
                        "type": "button",
                        "buttons": [
                            {
                                "title": "{{button1}}"
                            },
                            {
                                "title": "{{button2}}"
                            },
                            {
                                "title": "{{button3}}"
                            }
                        ]
                    }
                },
                "en": {
                    "button1": "Contact Details",
                    "button2": "Back to FAQ",
                    "button3": "Main Menu",
                    "text": "This option is used for requesting a reduction or declaring a dispute.\n\nYou will have to provide us with the following information in order for us to assess your request:\n\n* A copy of the traffic notice or notice number (you can find this in the top right corner of traffic notice)\n\n* A detailed request on why you are doing a representation must be provided to the relevant court’s contact details\n\nPlease click the button below for the *contact details* of the Magisterial court your traffic notice was issued in. *Note:* you can find this in ‘Section E’ of the actual notice that was issued to you."
                }
            }
        },
        "templatesList": [
            "fine_not_found",
            "faq_my_vehicle_not_driver",
            "querying_fine_details_waiting",
            "paynow_express_payment",
            "pay_your_fine",
            "main_nextfines",
            "main_image_file",
            "main_payment_info_allowedreason",
            "faq_dispute",
            "main_finedetail_1",
            "get_started",
            "main_image_placeholder",
            "goodbye",
            "enter_digit_number",
            "select_the_option",
            "connect_agent",
            "enter_digit_number_error",
            "main_3_1_1_1_1_3",
            "welocme",
            "main_3_1_1_1_1",
            "main_1_0",
            "main_3_error",
            "main_3_1",
            "main_1",
            "main_3_1_1_0",
            "main_3",
            "fines_pdf_file",
            "welcomeMessage",
            "main_0_0_pdf",
            "main_0_0",
            "main_2_2",
            "main_3_1_1_1_0_0",
            "main_2",
            "main_2_1",
            "querying_for_fines",
            "sendwindowopener_template",
            "fines_info",
            "main_3_1_1_1_1_2",
            "main_1_3",
            "main_pdf_placeholder",
            "main_1_2",
            "main_1_1",
            "main_3_1_1_1_1_1",
            "faq_other_queries",
            "main_1_2_1",
            "main_3_1_1",
            "main_3_1_3",
            "main_3_1_2",
            "main_3_1_1_1_0",
            "main_3_1_1_1",
            "fines_not_found",
            "faq_representations",
            "errorMessage",
            "faq_representations_contacts",
            "faq_my_vehicle_not_driver_contacts",
            "registration_image_file"
        ],
        "userID": "userID",
        "userIDType": "msg",
        "traceID": "traceID",
        "traceIDType": "msg",
        "useTimer": false,
        "timer": "",
        "outputs": 3,
        "jsonToCreate": "{\"text\":\"{{text}}\",\"data\":{\"interactive\":{\"type\":\"button\",\"buttons\":[{\"title\":\"{{button1}}\"},{\"title\":\"{{button2}}\"},{\"title\":\"{{button3}}\"}]}},\"en\":{\"button1\":\"Contact Details\",\"button2\":\"Back to FAQ\",\"button3\":\"Main Menu\",\"text\":\"Provide us with the following information to process a change of offender:\\n\\n* A copy of the traffic fine notice or notice number (found at the top right corner of traffic fine notice)\\n\\n* A copy of the driver's licence of the individual who drove the vehicle at the time of offence\\n\\n* Proof of address for the driver/offender\\n\\nPlease click the button below for the contact details of the Magisterial court your traffic fine was issued in. *Note:* you can find this in ‘Section E’ of the actual notice that was issued to you.\"}}",
        "jsonToCreateType": "json",
        "templateDescriptionButtonsContainerToCreate": [],
        "templateDesciptionDetailsToCreate": "main",
        "templateDesciptionTextToCreate": "",
        "templateIdToCreate": "faq_representations",
        "templateGroupToCreate": "main",
        "currentTemplateDescription": {
            "details": "main"
        },
        "currentTemplateGroup": "main",
        "currentTemplateTimer": "",
        "currentTemplateType": "standard",
        "jsonToEdit": "{\"text\":\"{{text}}\",\"data\":{\"interactive\":{\"type\":\"button\",\"buttons\":[{\"title\":\"{{button1}}\"},{\"title\":\"{{button2}}\"},{\"title\":\"{{button3}}\"}]}},\"en\":{\"button1\":\"Contact Details\",\"button2\":\"Back to FAQ\",\"button3\":\"Main Menu\",\"text\":\"This option is used for requesting a reduction or declaring a dispute.\\n\\nYou will have to provide us with the following information in order for us to assess your request:\\n\\n* A copy of the traffic notice or notice number (you can find this in the top right corner of traffic notice)\\n\\n* A detailed request on why you are doing a representation must be provided to the relevant court’s contact details\\n\\nPlease click the button below for the *contact details* of the Magisterial court your traffic notice was issued in. *Note:* you can find this in ‘Section E’ of the actual notice that was issued to you.\"}}",
        "jsonToEditType": "json",
        "templateIdToEdit": "faq_representations",
        "templateDescriptionButtonsContainerToEdit": [],
        "templateDesciptionDetailsToEdit": "main",
        "templateDesciptionTextToEdit": "",
        "x": 580,
        "y": 220,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "8b49866cc857cb04",
        "type": "send-message",
        "z": "53571d9900b8ee5c",
        "isTimerUsed": false,
        "language": "lang",
        "languageType": "msg",
        "messageOption": "",
        "messageID": "",
        "messageIDType": "str",
        "name": "faq_my_vehicle_not_driver",
        "props": {
            "faq_representations_contacts": [],
            "faq_my_vehicle_not_driver": []
        },
        "templateId": "faq_my_vehicle_not_driver",
        "templateIdToDelete": "",
        "templatesJsons": {
            "faq_representations_contacts": {
                "text": "{{text}}",
                "en": {
                    "text": "FAQ rep contacts details"
                }
            },
            "faq_my_vehicle_not_driver": {
                "text": "{{text}}",
                "data": {
                    "interactive": {
                        "type": "button",
                        "buttons": [
                            {
                                "title": "{{button1}}"
                            },
                            {
                                "title": "{{button2}}"
                            },
                            {
                                "title": "{{button3}}"
                            }
                        ]
                    }
                },
                "en": {
                    "button1": "Contact Details",
                    "button2": "Back to FAQ",
                    "button3": "Main Menu",
                    "text": "Provide us with the following information to process a change of offender:\n\n* A copy of the traffic notice or notice number (found at the top right corner of traffic notice) \n\n* A copy of the driver's licence of the individual who drove the vehicle at the time of offence \n\n* Proof of address for the driver/offender \n\nPlease click the button below for the *contact details* of the Magisterial court your traffic was issued in. *Note:* you can find this in ‘Section E’ of the actual notice that was issued to you."
                }
            }
        },
        "templatesList": [
            "fine_not_found",
            "faq_my_vehicle_not_driver",
            "querying_fine_details_waiting",
            "pay_your_fine",
            "paynow_express_payment",
            "main_nextfines",
            "main_image_file",
            "faq_dispute",
            "main_payment_info_allowedreason",
            "main_finedetail_1",
            "main_image_placeholder",
            "goodbye",
            "enter_digit_number",
            "connect_agent",
            "get_started",
            "select_the_option",
            "enter_digit_number_error",
            "main_3_1_1_1_1_3",
            "welocme",
            "main_3_1_1_1_1",
            "main_1_0",
            "main_3_error",
            "main_3_1",
            "main_1",
            "main_3_1_1_0",
            "main_3",
            "fines_pdf_file",
            "welcomeMessage",
            "main_0_0_pdf",
            "main_0_0",
            "main_2_2",
            "main_3_1_1_1_0_0",
            "main_2",
            "main_2_1",
            "querying_for_fines",
            "sendwindowopener_template",
            "fines_info",
            "main_3_1_1_1_1_2",
            "main_1_3",
            "main_pdf_placeholder",
            "main_1_2",
            "main_1_1",
            "main_3_1_1_1_1_1",
            "faq_other_queries",
            "main_1_2_1",
            "main_3_1_1",
            "main_3_1_3",
            "main_3_1_2",
            "main_3_1_1_1_0",
            "main_3_1_1_1",
            "fines_not_found",
            "faq_representations",
            "errorMessage",
            "faq_representations_contacts",
            "faq_my_vehicle_not_driver_contacts",
            "registration_image_file"
        ],
        "userID": "userID",
        "userIDType": "msg",
        "traceID": "traceID",
        "traceIDType": "msg",
        "useTimer": false,
        "timer": "",
        "outputs": 3,
        "jsonToCreate": "{\"text\":\"{{text}}\",\"en\":{\"text\":\"FAQ my vehicle contacts details\"}}",
        "jsonToCreateType": "json",
        "templateDescriptionButtonsContainerToCreate": [],
        "templateDesciptionDetailsToCreate": "main",
        "templateDesciptionTextToCreate": "",
        "templateIdToCreate": "faq_my_vehicle_not_driver",
        "templateGroupToCreate": "main",
        "currentTemplateDescription": {
            "details": "main"
        },
        "currentTemplateGroup": "main",
        "currentTemplateTimer": "",
        "currentTemplateType": "standard",
        "jsonToEdit": "{\"text\":\"{{text}}\",\"data\":{\"interactive\":{\"type\":\"button\",\"buttons\":[{\"title\":\"{{button1}}\"},{\"title\":\"{{button2}}\"},{\"title\":\"{{button3}}\"}]}},\"en\":{\"button1\":\"Contact Details\",\"button2\":\"Back to FAQ\",\"button3\":\"Main Menu\",\"text\":\"Provide us with the following information to process a change of offender:\\n\\n* A copy of the traffic notice or notice number (found at the top right corner of traffic notice) \\n\\n* A copy of the driver's licence of the individual who drove the vehicle at the time of offence \\n\\n* Proof of address for the driver/offender \\n\\nPlease click the button below for the *contact details* of the Magisterial court your traffic was issued in. *Note:* you can find this in ‘Section E’ of the actual notice that was issued to you.\"}}",
        "jsonToEditType": "json",
        "templateIdToEdit": "faq_my_vehicle_not_driver",
        "templateDescriptionButtonsContainerToEdit": [],
        "templateDesciptionDetailsToEdit": "main",
        "templateDesciptionTextToEdit": "",
        "x": 600,
        "y": 280,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "cd6743287f5ce369",
        "type": "link out",
        "z": "53571d9900b8ee5c",
        "name": "erroe out",
        "mode": "link",
        "links": [
            "a0a45e24a84f7526"
        ],
        "x": 825,
        "y": 220,
        "wires": []
    },
    {
        "id": "d836bba2d9e69357",
        "type": "link out",
        "z": "53571d9900b8ee5c",
        "name": "erroe out",
        "mode": "link",
        "links": [
            "a0a45e24a84f7526"
        ],
        "x": 475,
        "y": 440,
        "wires": []
    },
    {
        "id": "cd19aaec0c161479",
        "type": "send-message",
        "z": "53571d9900b8ee5c",
        "isTimerUsed": false,
        "language": "lang",
        "languageType": "msg",
        "messageOption": "",
        "messageID": "",
        "messageIDType": "str",
        "name": "faq_dispute",
        "props": {
            "faq_dispute": []
        },
        "templateId": "faq_dispute",
        "templateIdToDelete": "",
        "templatesJsons": {
            "faq_dispute": {
                "text": "{{text}}",
                "data": {
                    "interactive": {
                        "type": "button",
                        "buttons": [
                            {
                                "title": "{{button1}}"
                            },
                            {
                                "title": "{{button2}}"
                            }
                        ]
                    }
                },
                "en": {
                    "button1": "Back to FAQ",
                    "button2": "Main Menu",
                    "text": "Submit your representation in an affidavit, listing the reasons/motivation and evidence in a pdf format to EMPD.Reps@ekurhuleni.gov.za"
                }
            }
        },
        "templatesList": [
            "fine_not_found",
            "faq_my_vehicle_not_driver",
            "querying_fine_details_waiting",
            "paynow_express_payment",
            "pay_your_fine",
            "main_nextfines",
            "main_image_file",
            "main_payment_info_allowedreason",
            "faq_dispute",
            "main_finedetail_1",
            "main_image_placeholder",
            "goodbye",
            "enter_digit_number",
            "connect_agent",
            "get_started",
            "select_the_option",
            "enter_digit_number_error",
            "main_3_1_1_1_1_3",
            "welocme",
            "main_3_1_1_1_1",
            "main_1_0",
            "main_3_error",
            "main_3_1",
            "main_1",
            "main_3_1_1_0",
            "main_3",
            "fines_pdf_file",
            "welcomeMessage",
            "main_0_0_pdf",
            "main_0_0",
            "main_2_2",
            "main_3_1_1_1_0_0",
            "main_2",
            "main_2_1",
            "querying_for_fines",
            "sendwindowopener_template",
            "fines_info",
            "main_3_1_1_1_1_2",
            "main_1_3",
            "main_pdf_placeholder",
            "main_1_2",
            "main_1_1",
            "main_3_1_1_1_1_1",
            "faq_other_queries",
            "main_1_2_1",
            "main_3_1_1",
            "main_3_1_3",
            "main_3_1_2",
            "main_3_1_1_1_0",
            "main_3_1_1_1",
            "fines_not_found",
            "faq_representations",
            "errorMessage",
            "faq_representations_contacts",
            "faq_my_vehicle_not_driver_contacts",
            "registration_image_file"
        ],
        "userID": "userID",
        "userIDType": "msg",
        "traceID": "traceID",
        "traceIDType": "msg",
        "useTimer": false,
        "timer": "",
        "outputs": 3,
        "jsonToCreate": "{\"text\":\"{{text}}\",\"en\":{\"text\":\"To dispute a traffic notice email empd.reps@ekurhuleni.gov.za\"}}",
        "jsonToCreateType": "json",
        "templateDescriptionButtonsContainerToCreate": [],
        "templateDesciptionDetailsToCreate": "main",
        "templateDesciptionTextToCreate": "",
        "templateIdToCreate": "faq_dispute",
        "templateGroupToCreate": "main",
        "currentTemplateDescription": {
            "details": "main"
        },
        "currentTemplateGroup": "main",
        "currentTemplateTimer": "",
        "currentTemplateType": "standard",
        "jsonToEdit": "{\"text\":\"{{text}}\",\"data\":{\"interactive\":{\"type\":\"button\",\"buttons\":[{\"title\":\"{{button1}}\"},{\"title\":\"{{button2}}\"}]}},\"en\":{\"button1\":\"Back to FAQ\",\"button2\":\"Main Menu\",\"text\":\"Submit your representation in an affidavit, listing the reasons/motivation and evidence in a pdf format to EMPD.Reps@ekurhuleni.gov.za\"}}",
        "jsonToEditType": "json",
        "templateIdToEdit": "faq_dispute",
        "templateDescriptionButtonsContainerToEdit": [],
        "templateDesciptionDetailsToEdit": "main",
        "templateDesciptionTextToEdit": "",
        "x": 570,
        "y": 400,
        "wires": [
            [],
            [],
            []
        ]
    },
    {
        "id": "3a2dc559e694d5df",
        "type": "function",
        "z": "c0fb582d432c3044",
        "name": "get INBOX details",
        "func": "msg.method = \"GET\";\n\nmsg.url = `${msg.chatwootApiUrl}/accounts/${msg.accountId}/inboxes/${msg.inboxId}`;\n\nmsg.payload = {};\nmsg.headers = {};\nmsg.headers['Content-Type'] = 'application/json';\nmsg.headers['api_access_token'] = msg.chatwootApiKey;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 670,
        "y": 220,
        "wires": [
            [
                "eebe9e8947d3db21"
            ]
        ]
    },
    {
        "id": "1b39cf419b25d36b",
        "type": "change",
        "z": "c0fb582d432c3044",
        "name": "set template details",
        "rules": [
            {
                "t": "set",
                "p": "agent_reply_time_window",
                "pt": "msg",
                "to": "payload.originalBody.agent_reply_time_window",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "agent_reply_time_window_message",
                "pt": "msg",
                "to": "payload.originalBody.agent_reply_time_window_message",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 450,
        "y": 220,
        "wires": [
            [
                "3a2dc559e694d5df"
            ]
        ]
    },
    {
        "id": "eebe9e8947d3db21",
        "type": "subflow:8e9dd0b44d3c40ea",
        "z": "c0fb582d432c3044",
        "name": "",
        "x": 860,
        "y": 220,
        "wires": [
            [
                "9f434e8d0524e263"
            ],
            []
        ]
    },
    {
        "id": "9f434e8d0524e263",
        "type": "change",
        "z": "c0fb582d432c3044",
        "name": "set templates",
        "rules": [
            {
                "t": "set",
                "p": "templates",
                "pt": "msg",
                "to": "payload.additional_attributes.message_templates",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1050,
        "y": 220,
        "wires": [
            [
                "9b099da162326b0b"
            ]
        ]
    },
    {
        "id": "9b099da162326b0b",
        "type": "function",
        "z": "c0fb582d432c3044",
        "name": "set template window",
        "func": "msg.method = \"PATCH\";\n\n/*if (msg.chatId[0] == '+') {\n    msg.chatId = msg.chatId.substring(1, msg.chatId.length)\n}*/\n\nmsg.url = `${msg.chatwootApiUrl}/accounts/${msg.accountId}/inboxes/${msg.inboxId}`;\n\nmsg.payload = {\n  \"channel\": {\n    \"additional_attributes\": {\n\t    \"agent_reply_time_window\": msg.agent_reply_time_window,\n\t    \"agent_reply_time_window_message\": msg.agent_reply_time_window_message,\n      \"message_templates\": msg.templates\n\t  }\n  }\n};\nmsg.headers = {};\nmsg.headers['Content-Type'] = 'application/json';\nmsg.headers['api_access_token'] = msg.chatwootApiKey;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1300,
        "y": 220,
        "wires": [
            [
                "e7cf70ee8b9e3ecf"
            ]
        ]
    },
    {
        "id": "e7cf70ee8b9e3ecf",
        "type": "subflow:8e9dd0b44d3c40ea",
        "z": "c0fb582d432c3044",
        "name": "",
        "x": 1500,
        "y": 220,
        "wires": [
            [
                "7ddf20e50b971570"
            ],
            [
                "7ddf20e50b971570"
            ]
        ]
    },
    {
        "id": "7ddf20e50b971570",
        "type": "debug",
        "z": "c0fb582d432c3044",
        "name": "debug 65",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1540,
        "y": 300,
        "wires": []
    },
    {
        "id": "9e7634d3f84920f0",
        "type": "link in",
        "z": "c0fb582d432c3044",
        "name": "Chatwoot In",
        "links": [
            "1ec41339b9fc26d9",
            "471d31bd88f0b931"
        ],
        "x": 75,
        "y": 300,
        "wires": [
            [
                "141cf0e94784c599"
            ]
        ]
    },
    {
        "id": "141cf0e94784c599",
        "type": "function",
        "z": "c0fb582d432c3044",
        "name": "get envs",
        "func": "msg.chatwootApiUrl = env.get(\"CHATWOOT_API_URL\") + \"/api/v1\"\nmsg.chatwootApiKey = env.get(\"CHATWOOT_API_KEY\")\nmsg.accountId = env.get(\"CHATWOOT_ACCOUNT_ID\")\nmsg.inboxId = env.get(\"CHATWOOT_INBOX_ID\")\n\nmsg.chatIncMessageBusApiUsername = msg.payload.botSettings.chatIncMessageBusApiUsername;\nmsg.chatIncMessageBusApiPassword = msg.payload.botSettings.chatIncMessageBusApiPassword;\nmsg.chatIncMessageBusApiUrl = msg.payload.botSettings.chatIncMessageBusApiUrl;\n\n/*\nmsg.chatwootApiUrl = \"https://helpdesk.chatinc.com/api/v1\"\nmsg.chatwootApiKey = \"L7kLHtRziDHKZcYWj7xRXnFj\"\nmsg.accountId = 5\nmsg.inboxId = 19\n\nmsg.chatIncMessageBusApiUsername = '42flows-syntel';\nmsg.chatIncMessageBusApiPassword = '2i32M2HENObcrawZDSPH';\nmsg.chatIncMessageBusApiUrl = 'http://api-live.sweesh.io';*/\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 180,
        "y": 300,
        "wires": [
            [
                "358b8cbce89b342a"
            ]
        ]
    },
    {
        "id": "3ab306e4bbfd3687",
        "type": "function",
        "z": "c0fb582d432c3044",
        "name": "set template window",
        "func": "msg.method = \"PATCH\";\n\n/*if (msg.chatId[0] == '+') {\n    msg.chatId = msg.chatId.substring(1, msg.chatId.length)\n}*/\n\nmsg.url = `${msg.chatwootApiUrl}/accounts/${msg.accountId}/inboxes/${msg.inboxId}`;\n\nmsg.payload = {\n  \"channel\": {\n    \"additional_attributes\": {\n      \"message_templates\": msg.payload.templates,\n      \"agent_reply_time_window\": msg.agent_reply_time_window,\n      \"agent_reply_time_window_message\": msg.agent_reply_time_window_message,\n\t  }\n  }\n};\nmsg.headers = {};\nmsg.headers['Content-Type'] = 'application/json';\nmsg.headers['api_access_token'] = msg.chatwootApiKey;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 940,
        "y": 500,
        "wires": [
            [
                "48a2d61b9f1448d2"
            ]
        ]
    },
    {
        "id": "b357d73a154c057e",
        "type": "subflow:8e9dd0b44d3c40ea",
        "z": "c0fb582d432c3044",
        "name": "",
        "x": 700,
        "y": 500,
        "wires": [
            [
                "3ab306e4bbfd3687"
            ],
            [
                "833d97051e951260"
            ]
        ]
    },
    {
        "id": "48a2d61b9f1448d2",
        "type": "subflow:8e9dd0b44d3c40ea",
        "z": "c0fb582d432c3044",
        "name": "",
        "x": 1180,
        "y": 500,
        "wires": [
            [
                "a6b26b4552ee96d4"
            ],
            [
                "a6b26b4552ee96d4"
            ]
        ]
    },
    {
        "id": "157b0dcbcdda23ee",
        "type": "function",
        "z": "c0fb582d432c3044",
        "name": "Get templates",
        "func": "msg.method = \"GET\";\n\n/*if (msg.chatId[0] == '+') {\n    msg.chatId = msg.chatId.substring(1, msg.chatId.length)\n}*/\n\nmsg.url = `${msg.chatIncMessageBusApiUrl}/transactional/v1/templates`;\n\nmsg.payload = {};\nmsg.headers = {};\nmsg.headers['Content-Type'] = 'application/json';\nvar base64encodedData = Buffer.from(msg.chatIncMessageBusApiUsername + ':' + msg.chatIncMessageBusApiPassword).toString('base64');\n\nmsg.headers['Authorization'] = 'Basic ' + base64encodedData;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 497,
        "y": 499,
        "wires": [
            [
                "b357d73a154c057e"
            ]
        ]
    },
    {
        "id": "833d97051e951260",
        "type": "debug",
        "z": "c0fb582d432c3044",
        "name": "debug 66",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 700,
        "y": 580,
        "wires": []
    },
    {
        "id": "a6b26b4552ee96d4",
        "type": "debug",
        "z": "c0fb582d432c3044",
        "name": "debug 67",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 1240,
        "y": 580,
        "wires": []
    },
    {
        "id": "358b8cbce89b342a",
        "type": "switch",
        "z": "c0fb582d432c3044",
        "name": "Switch action",
        "property": "temp_action",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "window",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "templates",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 330,
        "y": 360,
        "wires": [
            [
                "1b39cf419b25d36b"
            ],
            [
                "7e068fefb272a062"
            ]
        ]
    },
    {
        "id": "7e068fefb272a062",
        "type": "function",
        "z": "c0fb582d432c3044",
        "name": "get INBOX details",
        "func": "msg.method = \"GET\";\n\nmsg.url = `${msg.chatwootApiUrl}/accounts/${msg.accountId}/inboxes/${msg.inboxId}`;\n\nmsg.payload = {};\nmsg.headers = {};\nmsg.headers['Content-Type'] = 'application/json';\nmsg.headers['api_access_token'] = msg.chatwootApiKey;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 550,
        "y": 420,
        "wires": [
            [
                "fb91e77bbe4b9810"
            ]
        ]
    },
    {
        "id": "fb91e77bbe4b9810",
        "type": "subflow:8e9dd0b44d3c40ea",
        "z": "c0fb582d432c3044",
        "name": "",
        "x": 740,
        "y": 420,
        "wires": [
            [
                "f4e9eb8fc71f5ad3"
            ],
            []
        ]
    },
    {
        "id": "f4e9eb8fc71f5ad3",
        "type": "change",
        "z": "c0fb582d432c3044",
        "name": "set window mwssages",
        "rules": [
            {
                "t": "set",
                "p": "agent_reply_time_window",
                "pt": "msg",
                "to": "payload.additional_attributes.agent_reply_time_window",
                "tot": "msg"
            },
            {
                "t": "set",
                "p": "agent_reply_time_window_message",
                "pt": "msg",
                "to": "payload.additional_attributes.agent_reply_time_window_message",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 923.2000122070312,
        "y": 415.3999938964844,
        "wires": [
            [
                "157b0dcbcdda23ee"
            ]
        ]
    }
]